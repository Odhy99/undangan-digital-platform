function nM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ul(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fI={exports:{}},rp={},pI={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mu=Symbol.for("react.element"),rM=Symbol.for("react.portal"),iM=Symbol.for("react.fragment"),sM=Symbol.for("react.strict_mode"),oM=Symbol.for("react.profiler"),aM=Symbol.for("react.provider"),lM=Symbol.for("react.context"),cM=Symbol.for("react.forward_ref"),uM=Symbol.for("react.suspense"),dM=Symbol.for("react.memo"),hM=Symbol.for("react.lazy"),y1=Symbol.iterator;function fM(t){return t===null||typeof t!="object"?null:(t=y1&&t[y1]||t["@@iterator"],typeof t=="function"?t:null)}var mI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gI=Object.assign,yI={};function dl(t,e,n){this.props=t,this.context=e,this.refs=yI,this.updater=n||mI}dl.prototype.isReactComponent={};dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vI(){}vI.prototype=dl.prototype;function m0(t,e,n){this.props=t,this.context=e,this.refs=yI,this.updater=n||mI}var g0=m0.prototype=new vI;g0.constructor=m0;gI(g0,dl.prototype);g0.isPureReactComponent=!0;var v1=Array.isArray,wI=Object.prototype.hasOwnProperty,y0={current:null},xI={key:!0,ref:!0,__self:!0,__source:!0};function _I(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wI.call(e,r)&&!xI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Mu,type:t,key:s,ref:o,props:i,_owner:y0.current}}function pM(t,e){return{$$typeof:Mu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function v0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mu}function mM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var w1=/\/+/g;function Wm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mM(""+t.key):e.toString(36)}function fh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mu:case rM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Wm(o,0):r,v1(i)?(n="",t!=null&&(n=t.replace(w1,"$&/")+"/"),fh(i,e,n,"",function(c){return c})):i!=null&&(v0(i)&&(i=pM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(w1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",v1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Wm(s,a);o+=fh(s,e,n,l,i)}else if(l=fM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Wm(s,a++),o+=fh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pd(t,e,n){if(t==null)return t;var r=[],i=0;return fh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function gM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},ph={transition:null},yM={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:ph,ReactCurrentOwner:y0};function TI(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Pd,forEach:function(t,e,n){Pd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pd(t,function(){e++}),e},toArray:function(t){return Pd(t,function(e){return e})||[]},only:function(t){if(!v0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=dl;Se.Fragment=iM;Se.Profiler=oM;Se.PureComponent=m0;Se.StrictMode=sM;Se.Suspense=uM;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yM;Se.act=TI;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=y0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)wI.call(e,l)&&!xI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Mu,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:lM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aM,_context:t},t.Consumer=t};Se.createElement=_I;Se.createFactory=function(t){var e=_I.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:cM,render:t}};Se.isValidElement=v0;Se.lazy=function(t){return{$$typeof:hM,_payload:{_status:-1,_result:t},_init:gM}};Se.memo=function(t,e){return{$$typeof:dM,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=ph.transition;ph.transition={};try{t()}finally{ph.transition=e}};Se.unstable_act=TI;Se.useCallback=function(t,e){return cn.current.useCallback(t,e)};Se.useContext=function(t){return cn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return cn.current.useEffect(t,e)};Se.useId=function(){return cn.current.useId()};Se.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return cn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Se.useRef=function(t){return cn.current.useRef(t)};Se.useState=function(t){return cn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return cn.current.useTransition()};Se.version="18.3.1";pI.exports=Se;var _=pI.exports;const ce=ul(_),w0=nM({__proto__:null,default:ce},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM=_,wM=Symbol.for("react.element"),xM=Symbol.for("react.fragment"),_M=Object.prototype.hasOwnProperty,TM=vM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EM={key:!0,ref:!0,__self:!0,__source:!0};function EI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_M.call(e,r)&&!EM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wM,type:t,key:s,ref:o,props:i,_owner:TM.current}}rp.Fragment=xM;rp.jsx=EI;rp.jsxs=EI;fI.exports=rp;var f=fI.exports,oy={},bI={exports:{}},On={},SI={exports:{}},II={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,$){var z=M.length;M.push($);e:for(;0<z;){var W=z-1>>>1,B=M[W];if(0<i(B,$))M[W]=$,M[z]=B,z=W;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var $=M[0],z=M.pop();if(z!==$){M[0]=z;e:for(var W=0,B=M.length,Y=B>>>1;W<Y;){var se=2*(W+1)-1,Pe=M[se],le=se+1,Z=M[le];if(0>i(Pe,z))le<B&&0>i(Z,Pe)?(M[W]=Z,M[le]=z,W=le):(M[W]=Pe,M[se]=z,W=se);else if(le<B&&0>i(Z,z))M[W]=Z,M[le]=z,W=le;else break e}}return $}function i(M,$){var z=M.sortIndex-$.sortIndex;return z!==0?z:M.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,p=3,m=!1,x=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(M){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=M)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function C(M){if(v=!1,T(M),!x)if(n(l)!==null)x=!0,q(D);else{var $=n(c);$!==null&&J(C,$.startTime-M)}}function D(M,$){x=!1,v&&(v=!1,y(S),S=-1),m=!0;var z=p;try{for(T($),h=n(l);h!==null&&(!(h.expirationTime>$)||M&&!k());){var W=h.callback;if(typeof W=="function"){h.callback=null,p=h.priorityLevel;var B=W(h.expirationTime<=$);$=t.unstable_now(),typeof B=="function"?h.callback=B:h===n(l)&&r(l),T($)}else r(l);h=n(l)}if(h!==null)var Y=!0;else{var se=n(c);se!==null&&J(C,se.startTime-$),Y=!1}return Y}finally{h=null,p=z,m=!1}}var j=!1,A=null,S=-1,I=5,P=-1;function k(){return!(t.unstable_now()-P<I)}function V(){if(A!==null){var M=t.unstable_now();P=M;var $=!0;try{$=A(!0,M)}finally{$?N():(j=!1,A=null)}}else j=!1}var N;if(typeof w=="function")N=function(){w(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=V,N=function(){K.postMessage(null)}}else N=function(){E(V,0)};function q(M){A=M,j||(j=!0,N())}function J(M,$){S=E(function(){M(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,q(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var z=p;p=$;try{return M()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,$){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var z=p;p=M;try{return $()}finally{p=z}},t.unstable_scheduleCallback=function(M,$,z){var W=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,M){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,M={id:d++,callback:$,priorityLevel:M,startTime:z,expirationTime:B,sortIndex:-1},z>W?(M.sortIndex=z,e(c,M),n(l)===null&&M===n(c)&&(v?(y(S),S=-1):v=!0,J(C,z-W))):(M.sortIndex=B,e(l,M),x||m||(x=!0,q(D))),M},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(M){var $=p;return function(){var z=p;p=$;try{return M.apply(this,arguments)}finally{p=z}}}})(II);SI.exports=II;var bM=SI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SM=_,Vn=bM;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AI=new Set,Hc={};function To(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(Hc[t]=e,t=0;t<e.length;t++)AI.add(e[t])}var Kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ay=Object.prototype.hasOwnProperty,IM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x1={},_1={};function AM(t){return ay.call(_1,t)?!0:ay.call(x1,t)?!1:IM.test(t)?_1[t]=!0:(x1[t]=!0,!1)}function PM(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CM(t,e,n,r){if(e===null||typeof e>"u"||PM(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var x0=/[\-:]([a-z])/g;function _0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(x0,_0);Lt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(x0,_0);Lt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(x0,_0);Lt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function T0(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CM(e,n,i,r)&&(n=null),r||i===null?AM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var si=SM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),na=Symbol.for("react.portal"),ra=Symbol.for("react.fragment"),E0=Symbol.for("react.strict_mode"),ly=Symbol.for("react.profiler"),PI=Symbol.for("react.provider"),CI=Symbol.for("react.context"),b0=Symbol.for("react.forward_ref"),cy=Symbol.for("react.suspense"),uy=Symbol.for("react.suspense_list"),S0=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),RI=Symbol.for("react.offscreen"),T1=Symbol.iterator;function ql(t){return t===null||typeof t!="object"?null:(t=T1&&t[T1]||t["@@iterator"],typeof t=="function"?t:null)}var at=Object.assign,Gm;function dc(t){if(Gm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gm=e&&e[1]||""}return`
`+Gm+t}var qm=!1;function Hm(t,e){if(!t||qm)return"";qm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dc(t):""}function RM(t){switch(t.tag){case 5:return dc(t.type);case 16:return dc("Lazy");case 13:return dc("Suspense");case 19:return dc("SuspenseList");case 0:case 2:case 15:return t=Hm(t.type,!1),t;case 11:return t=Hm(t.type.render,!1),t;case 1:return t=Hm(t.type,!0),t;default:return""}}function dy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ra:return"Fragment";case na:return"Portal";case ly:return"Profiler";case E0:return"StrictMode";case cy:return"Suspense";case uy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CI:return(t.displayName||"Context")+".Consumer";case PI:return(t._context.displayName||"Context")+".Provider";case b0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S0:return e=t.displayName||null,e!==null?e:dy(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return dy(t(e))}catch{}}return null}function kM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dy(e);case 8:return e===E0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NM(t){var e=kI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rd(t){t._valueTracker||(t._valueTracker=NM(t))}function NI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hy(t,e){var n=e.checked;return at({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function E1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DI(t,e){e=e.checked,e!=null&&T0(t,"checked",e,!1)}function fy(t,e){DI(t,e);var n=Xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?py(t,e.type,n):e.hasOwnProperty("defaultValue")&&py(t,e.type,Xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function b1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function py(t,e,n){(e!=="number"||Wh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var hc=Array.isArray;function wa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function my(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return at({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(hc(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xi(n)}}function VI(t,e){var n=Xi(e.value),r=Xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function I1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kd,MI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kd=kd||document.createElement("div"),kd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DM=["Webkit","ms","Moz","O"];Object.keys(Tc).forEach(function(t){DM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Tc[e]=Tc[t]})});function OI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Tc.hasOwnProperty(t)&&Tc[t]?(""+e).trim():e+"px"}function LI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=OI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VM=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yy(t,e){if(e){if(VM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function vy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wy=null;function I0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xy=null,xa=null,_a=null;function A1(t){if(t=Fu(t)){if(typeof xy!="function")throw Error(X(280));var e=t.stateNode;e&&(e=lp(e),xy(t.stateNode,t.type,e))}}function FI(t){xa?_a?_a.push(t):_a=[t]:xa=t}function BI(){if(xa){var t=xa,e=_a;if(_a=xa=null,A1(t),e)for(t=0;t<e.length;t++)A1(e[t])}}function $I(t,e){return t(e)}function UI(){}var Km=!1;function zI(t,e,n){if(Km)return t(e,n);Km=!0;try{return $I(t,e,n)}finally{Km=!1,(xa!==null||_a!==null)&&(UI(),BI())}}function Qc(t,e){var n=t.stateNode;if(n===null)return null;var r=lp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var _y=!1;if(Kr)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){_y=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{_y=!1}function jM(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ec=!1,Gh=null,qh=!1,Ty=null,MM={onError:function(t){Ec=!0,Gh=t}};function OM(t,e,n,r,i,s,o,a,l){Ec=!1,Gh=null,jM.apply(MM,arguments)}function LM(t,e,n,r,i,s,o,a,l){if(OM.apply(this,arguments),Ec){if(Ec){var c=Gh;Ec=!1,Gh=null}else throw Error(X(198));qh||(qh=!0,Ty=c)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P1(t){if(Eo(t)!==t)throw Error(X(188))}function FM(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return P1(i),t;if(s===r)return P1(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function GI(t){return t=FM(t),t!==null?qI(t):null}function qI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qI(t);if(e!==null)return e;t=t.sibling}return null}var HI=Vn.unstable_scheduleCallback,C1=Vn.unstable_cancelCallback,BM=Vn.unstable_shouldYield,$M=Vn.unstable_requestPaint,pt=Vn.unstable_now,UM=Vn.unstable_getCurrentPriorityLevel,A0=Vn.unstable_ImmediatePriority,KI=Vn.unstable_UserBlockingPriority,Hh=Vn.unstable_NormalPriority,zM=Vn.unstable_LowPriority,QI=Vn.unstable_IdlePriority,ip=null,_r=null;function WM(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(ip,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:HM,GM=Math.log,qM=Math.LN2;function HM(t){return t>>>=0,t===0?32:31-(GM(t)/qM|0)|0}var Nd=64,Dd=4194304;function fc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=fc(a):(s&=o,s!==0&&(r=fc(s)))}else o=n&~i,o!==0?r=fc(o):s!==0&&(r=fc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),i=1<<n,r|=t[n],e&=~i;return r}function KM(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QM(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ir(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=KM(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ey(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function YI(){var t=Nd;return Nd<<=1,!(Nd&4194240)&&(Nd=64),t}function Qm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ou(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function YM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ir(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function P0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Le=0;function XI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var JI,C0,ZI,eA,tA,by=!1,Vd=[],ji=null,Mi=null,Oi=null,Yc=new Map,Xc=new Map,Si=[],XM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R1(t,e){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(e.pointerId)}}function Kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fu(e),e!==null&&C0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JM(t,e,n,r,i){switch(e){case"focusin":return ji=Kl(ji,t,e,n,r,i),!0;case"dragenter":return Mi=Kl(Mi,t,e,n,r,i),!0;case"mouseover":return Oi=Kl(Oi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Yc.set(s,Kl(Yc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Xc.set(s,Kl(Xc.get(s)||null,t,e,n,r,i)),!0}return!1}function nA(t){var e=$s(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=WI(n),e!==null){t.blockedOn=e,tA(t.priority,function(){ZI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wy=r,n.target.dispatchEvent(r),wy=null}else return e=Fu(n),e!==null&&C0(e),t.blockedOn=n,!1;e.shift()}return!0}function k1(t,e,n){mh(t)&&n.delete(e)}function ZM(){by=!1,ji!==null&&mh(ji)&&(ji=null),Mi!==null&&mh(Mi)&&(Mi=null),Oi!==null&&mh(Oi)&&(Oi=null),Yc.forEach(k1),Xc.forEach(k1)}function Ql(t,e){t.blockedOn===e&&(t.blockedOn=null,by||(by=!0,Vn.unstable_scheduleCallback(Vn.unstable_NormalPriority,ZM)))}function Jc(t){function e(i){return Ql(i,t)}if(0<Vd.length){Ql(Vd[0],t);for(var n=1;n<Vd.length;n++){var r=Vd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ji!==null&&Ql(ji,t),Mi!==null&&Ql(Mi,t),Oi!==null&&Ql(Oi,t),Yc.forEach(e),Xc.forEach(e),n=0;n<Si.length;n++)r=Si[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Si.length&&(n=Si[0],n.blockedOn===null);)nA(n),n.blockedOn===null&&Si.shift()}var Ta=si.ReactCurrentBatchConfig,Qh=!0;function eO(t,e,n,r){var i=Le,s=Ta.transition;Ta.transition=null;try{Le=1,R0(t,e,n,r)}finally{Le=i,Ta.transition=s}}function tO(t,e,n,r){var i=Le,s=Ta.transition;Ta.transition=null;try{Le=4,R0(t,e,n,r)}finally{Le=i,Ta.transition=s}}function R0(t,e,n,r){if(Qh){var i=Sy(t,e,n,r);if(i===null)sg(t,e,r,Yh,n),R1(t,r);else if(JM(i,t,e,n,r))r.stopPropagation();else if(R1(t,r),e&4&&-1<XM.indexOf(t)){for(;i!==null;){var s=Fu(i);if(s!==null&&JI(s),s=Sy(t,e,n,r),s===null&&sg(t,e,r,Yh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sg(t,e,r,null,n)}}var Yh=null;function Sy(t,e,n,r){if(Yh=null,t=I0(r),t=$s(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yh=t,null}function rA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UM()){case A0:return 1;case KI:return 4;case Hh:case zM:return 16;case QI:return 536870912;default:return 16}default:return 16}}var Ci=null,k0=null,gh=null;function iA(){if(gh)return gh;var t,e=k0,n=e.length,r,i="value"in Ci?Ci.value:Ci.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return gh=i.slice(t,1<r?1-r:void 0)}function yh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jd(){return!0}function N1(){return!1}function Ln(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jd:N1,this.isPropagationStopped=N1,this}return at(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jd)},persist:function(){},isPersistent:jd}),e}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=Ln(hl),Lu=at({},hl,{view:0,detail:0}),nO=Ln(Lu),Ym,Xm,Yl,sp=at({},Lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:D0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yl&&(Yl&&t.type==="mousemove"?(Ym=t.screenX-Yl.screenX,Xm=t.screenY-Yl.screenY):Xm=Ym=0,Yl=t),Ym)},movementY:function(t){return"movementY"in t?t.movementY:Xm}}),D1=Ln(sp),rO=at({},sp,{dataTransfer:0}),iO=Ln(rO),sO=at({},Lu,{relatedTarget:0}),Jm=Ln(sO),oO=at({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),aO=Ln(oO),lO=at({},hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cO=Ln(lO),uO=at({},hl,{data:0}),V1=Ln(uO),dO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fO[t])?!!e[t]:!1}function D0(){return pO}var mO=at({},Lu,{key:function(t){if(t.key){var e=dO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:D0,charCode:function(t){return t.type==="keypress"?yh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gO=Ln(mO),yO=at({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j1=Ln(yO),vO=at({},Lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:D0}),wO=Ln(vO),xO=at({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_O=Ln(xO),TO=at({},sp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EO=Ln(TO),bO=[9,13,27,32],V0=Kr&&"CompositionEvent"in window,bc=null;Kr&&"documentMode"in document&&(bc=document.documentMode);var SO=Kr&&"TextEvent"in window&&!bc,sA=Kr&&(!V0||bc&&8<bc&&11>=bc),M1=String.fromCharCode(32),O1=!1;function oA(t,e){switch(t){case"keyup":return bO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ia=!1;function IO(t,e){switch(t){case"compositionend":return aA(e);case"keypress":return e.which!==32?null:(O1=!0,M1);case"textInput":return t=e.data,t===M1&&O1?null:t;default:return null}}function AO(t,e){if(ia)return t==="compositionend"||!V0&&oA(t,e)?(t=iA(),gh=k0=Ci=null,ia=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sA&&e.locale!=="ko"?null:e.data;default:return null}}var PO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PO[t.type]:e==="textarea"}function lA(t,e,n,r){FI(r),e=Xh(e,"onChange"),0<e.length&&(n=new N0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Sc=null,Zc=null;function CO(t){wA(t,0)}function op(t){var e=aa(t);if(NI(e))return t}function RO(t,e){if(t==="change")return e}var cA=!1;if(Kr){var Zm;if(Kr){var eg="oninput"in document;if(!eg){var F1=document.createElement("div");F1.setAttribute("oninput","return;"),eg=typeof F1.oninput=="function"}Zm=eg}else Zm=!1;cA=Zm&&(!document.documentMode||9<document.documentMode)}function B1(){Sc&&(Sc.detachEvent("onpropertychange",uA),Zc=Sc=null)}function uA(t){if(t.propertyName==="value"&&op(Zc)){var e=[];lA(e,Zc,t,I0(t)),zI(CO,e)}}function kO(t,e,n){t==="focusin"?(B1(),Sc=e,Zc=n,Sc.attachEvent("onpropertychange",uA)):t==="focusout"&&B1()}function NO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return op(Zc)}function DO(t,e){if(t==="click")return op(e)}function VO(t,e){if(t==="input"||t==="change")return op(e)}function jO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ar=typeof Object.is=="function"?Object.is:jO;function eu(t,e){if(ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ay.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function $1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function U1(t,e){var n=$1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$1(n)}}function dA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hA(){for(var t=window,e=Wh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wh(t.document)}return e}function j0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MO(t){var e=hA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dA(n.ownerDocument.documentElement,n)){if(r!==null&&j0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=U1(n,s);var o=U1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OO=Kr&&"documentMode"in document&&11>=document.documentMode,sa=null,Iy=null,Ic=null,Ay=!1;function z1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ay||sa==null||sa!==Wh(r)||(r=sa,"selectionStart"in r&&j0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ic&&eu(Ic,r)||(Ic=r,r=Xh(Iy,"onSelect"),0<r.length&&(e=new N0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sa)))}function Md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oa={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},tg={},fA={};Kr&&(fA=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function ap(t){if(tg[t])return tg[t];if(!oa[t])return t;var e=oa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fA)return tg[t]=e[n];return t}var pA=ap("animationend"),mA=ap("animationiteration"),gA=ap("animationstart"),yA=ap("transitionend"),vA=new Map,W1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ds(t,e){vA.set(t,e),To(e,[t])}for(var ng=0;ng<W1.length;ng++){var rg=W1[ng],LO=rg.toLowerCase(),FO=rg[0].toUpperCase()+rg.slice(1);ds(LO,"on"+FO)}ds(pA,"onAnimationEnd");ds(mA,"onAnimationIteration");ds(gA,"onAnimationStart");ds("dblclick","onDoubleClick");ds("focusin","onFocus");ds("focusout","onBlur");ds(yA,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);To("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));To("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));To("onBeforeInput",["compositionend","keypress","textInput","paste"]);To("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));To("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));To("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BO=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function G1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LM(r,e,void 0,t),t.currentTarget=null}function wA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;G1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;G1(i,a,c),s=l}}}if(qh)throw t=Ty,qh=!1,Ty=null,t}function He(t,e){var n=e[Ny];n===void 0&&(n=e[Ny]=new Set);var r=t+"__bubble";n.has(r)||(xA(e,t,2,!1),n.add(r))}function ig(t,e,n){var r=0;e&&(r|=4),xA(n,t,r,e)}var Od="_reactListening"+Math.random().toString(36).slice(2);function tu(t){if(!t[Od]){t[Od]=!0,AI.forEach(function(n){n!=="selectionchange"&&(BO.has(n)||ig(n,!1,t),ig(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Od]||(e[Od]=!0,ig("selectionchange",!1,e))}}function xA(t,e,n,r){switch(rA(e)){case 1:var i=eO;break;case 4:i=tO;break;default:i=R0}n=i.bind(null,e,n,t),i=void 0,!_y||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$s(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}zI(function(){var c=s,d=I0(n),h=[];e:{var p=vA.get(t);if(p!==void 0){var m=N0,x=t;switch(t){case"keypress":if(yh(n)===0)break e;case"keydown":case"keyup":m=gO;break;case"focusin":x="focus",m=Jm;break;case"focusout":x="blur",m=Jm;break;case"beforeblur":case"afterblur":m=Jm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=iO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wO;break;case pA:case mA:case gA:m=aO;break;case yA:m=_O;break;case"scroll":m=nO;break;case"wheel":m=EO;break;case"copy":case"cut":case"paste":m=cO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=j1}var v=(e&4)!==0,E=!v&&t==="scroll",y=v?p!==null?p+"Capture":null:p;v=[];for(var w=c,T;w!==null;){T=w;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,y!==null&&(C=Qc(w,y),C!=null&&v.push(nu(w,C,T)))),E)break;w=w.return}0<v.length&&(p=new m(p,x,null,n,d),h.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==wy&&(x=n.relatedTarget||n.fromElement)&&($s(x)||x[Qr]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?$s(x):null,x!==null&&(E=Eo(x),x!==E||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(v=D1,C="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=j1,C="onPointerLeave",y="onPointerEnter",w="pointer"),E=m==null?p:aa(m),T=x==null?p:aa(x),p=new v(C,w+"leave",m,n,d),p.target=E,p.relatedTarget=T,C=null,$s(d)===c&&(v=new v(y,w+"enter",x,n,d),v.target=T,v.relatedTarget=E,C=v),E=C,m&&x)t:{for(v=m,y=x,w=0,T=v;T;T=$o(T))w++;for(T=0,C=y;C;C=$o(C))T++;for(;0<w-T;)v=$o(v),w--;for(;0<T-w;)y=$o(y),T--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=$o(v),y=$o(y)}v=null}else v=null;m!==null&&q1(h,p,m,v,!1),x!==null&&E!==null&&q1(h,E,x,v,!0)}}e:{if(p=c?aa(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var D=RO;else if(L1(p))if(cA)D=VO;else{D=NO;var j=kO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=DO);if(D&&(D=D(t,c))){lA(h,D,n,d);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&py(p,"number",p.value)}switch(j=c?aa(c):window,t){case"focusin":(L1(j)||j.contentEditable==="true")&&(sa=j,Iy=c,Ic=null);break;case"focusout":Ic=Iy=sa=null;break;case"mousedown":Ay=!0;break;case"contextmenu":case"mouseup":case"dragend":Ay=!1,z1(h,n,d);break;case"selectionchange":if(OO)break;case"keydown":case"keyup":z1(h,n,d)}var A;if(V0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ia?oA(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(sA&&n.locale!=="ko"&&(ia||S!=="onCompositionStart"?S==="onCompositionEnd"&&ia&&(A=iA()):(Ci=d,k0="value"in Ci?Ci.value:Ci.textContent,ia=!0)),j=Xh(c,S),0<j.length&&(S=new V1(S,t,null,n,d),h.push({event:S,listeners:j}),A?S.data=A:(A=aA(n),A!==null&&(S.data=A)))),(A=SO?IO(t,n):AO(t,n))&&(c=Xh(c,"onBeforeInput"),0<c.length&&(d=new V1("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=A))}wA(h,e)})}function nu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Qc(t,n),s!=null&&r.unshift(nu(t,s,i)),s=Qc(t,e),s!=null&&r.push(nu(t,s,i))),t=t.return}return r}function $o(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Qc(n,s),l!=null&&o.unshift(nu(n,l,a))):i||(l=Qc(n,s),l!=null&&o.push(nu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $O=/\r\n?/g,UO=/\u0000|\uFFFD/g;function H1(t){return(typeof t=="string"?t:""+t).replace($O,`
`).replace(UO,"")}function Ld(t,e,n){if(e=H1(e),H1(t)!==e&&n)throw Error(X(425))}function Jh(){}var Py=null,Cy=null;function Ry(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ky=typeof setTimeout=="function"?setTimeout:void 0,zO=typeof clearTimeout=="function"?clearTimeout:void 0,K1=typeof Promise=="function"?Promise:void 0,WO=typeof queueMicrotask=="function"?queueMicrotask:typeof K1<"u"?function(t){return K1.resolve(null).then(t).catch(GO)}:ky;function GO(t){setTimeout(function(){throw t})}function og(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Jc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Jc(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Q1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fl=Math.random().toString(36).slice(2),gr="__reactFiber$"+fl,ru="__reactProps$"+fl,Qr="__reactContainer$"+fl,Ny="__reactEvents$"+fl,qO="__reactListeners$"+fl,HO="__reactHandles$"+fl;function $s(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Q1(t);t!==null;){if(n=t[gr])return n;t=Q1(t)}return e}t=n,n=t.parentNode}return null}function Fu(t){return t=t[gr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function aa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function lp(t){return t[ru]||null}var Dy=[],la=-1;function hs(t){return{current:t}}function Qe(t){0>la||(t.current=Dy[la],Dy[la]=null,la--)}function ze(t,e){la++,Dy[la]=t.current,t.current=e}var Ji={},Zt=hs(Ji),yn=hs(!1),eo=Ji;function Da(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function vn(t){return t=t.childContextTypes,t!=null}function Zh(){Qe(yn),Qe(Zt)}function Y1(t,e,n){if(Zt.current!==Ji)throw Error(X(168));ze(Zt,e),ze(yn,n)}function _A(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,kM(t)||"Unknown",i));return at({},n,r)}function ef(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,eo=Zt.current,ze(Zt,t),ze(yn,yn.current),!0}function X1(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=_A(t,e,eo),r.__reactInternalMemoizedMergedChildContext=t,Qe(yn),Qe(Zt),ze(Zt,t)):Qe(yn),ze(yn,n)}var Br=null,cp=!1,ag=!1;function TA(t){Br===null?Br=[t]:Br.push(t)}function KO(t){cp=!0,TA(t)}function fs(){if(!ag&&Br!==null){ag=!0;var t=0,e=Le;try{var n=Br;for(Le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,cp=!1}catch(i){throw Br!==null&&(Br=Br.slice(t+1)),HI(A0,fs),i}finally{Le=e,ag=!1}}return null}var ca=[],ua=0,tf=null,nf=0,Un=[],zn=0,to=null,$r=1,Ur="";function Rs(t,e){ca[ua++]=nf,ca[ua++]=tf,tf=t,nf=e}function EA(t,e,n){Un[zn++]=$r,Un[zn++]=Ur,Un[zn++]=to,to=t;var r=$r;t=Ur;var i=32-ir(r)-1;r&=~(1<<i),n+=1;var s=32-ir(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-ir(e)+i|n<<i|r,Ur=s+t}else $r=1<<s|n<<i|r,Ur=t}function M0(t){t.return!==null&&(Rs(t,1),EA(t,1,0))}function O0(t){for(;t===tf;)tf=ca[--ua],ca[ua]=null,nf=ca[--ua],ca[ua]=null;for(;t===to;)to=Un[--zn],Un[zn]=null,Ur=Un[--zn],Un[zn]=null,$r=Un[--zn],Un[zn]=null}var Rn=null,Cn=null,et=!1,nr=null;function bA(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function J1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rn=t,Cn=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rn=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:$r,overflow:Ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Rn=t,Cn=null,!0):!1;default:return!1}}function Vy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jy(t){if(et){var e=Cn;if(e){var n=e;if(!J1(t,e)){if(Vy(t))throw Error(X(418));e=Li(n.nextSibling);var r=Rn;e&&J1(t,e)?bA(r,n):(t.flags=t.flags&-4097|2,et=!1,Rn=t)}}else{if(Vy(t))throw Error(X(418));t.flags=t.flags&-4097|2,et=!1,Rn=t}}}function Z1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rn=t}function Fd(t){if(t!==Rn)return!1;if(!et)return Z1(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ry(t.type,t.memoizedProps)),e&&(e=Cn)){if(Vy(t))throw SA(),Error(X(418));for(;e;)bA(t,e),e=Li(e.nextSibling)}if(Z1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=Rn?Li(t.stateNode.nextSibling):null;return!0}function SA(){for(var t=Cn;t;)t=Li(t.nextSibling)}function Va(){Cn=Rn=null,et=!1}function L0(t){nr===null?nr=[t]:nr.push(t)}var QO=si.ReactCurrentBatchConfig;function Xl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Bd(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eT(t){var e=t._init;return e(t._payload)}function IA(t){function e(y,w){if(t){var T=y.deletions;T===null?(y.deletions=[w],y.flags|=16):T.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Ui(y,w),y.index=0,y.sibling=null,y}function s(y,w,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<w?(y.flags|=2,w):T):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,T,C){return w===null||w.tag!==6?(w=pg(T,y.mode,C),w.return=y,w):(w=i(w,T),w.return=y,w)}function l(y,w,T,C){var D=T.type;return D===ra?d(y,w,T.props.children,C,T.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ti&&eT(D)===w.type)?(C=i(w,T.props),C.ref=Xl(y,w,T),C.return=y,C):(C=bh(T.type,T.key,T.props,null,y.mode,C),C.ref=Xl(y,w,T),C.return=y,C)}function c(y,w,T,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=mg(T,y.mode,C),w.return=y,w):(w=i(w,T.children||[]),w.return=y,w)}function d(y,w,T,C,D){return w===null||w.tag!==7?(w=Ks(T,y.mode,C,D),w.return=y,w):(w=i(w,T),w.return=y,w)}function h(y,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=pg(""+w,y.mode,T),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Cd:return T=bh(w.type,w.key,w.props,null,y.mode,T),T.ref=Xl(y,null,w),T.return=y,T;case na:return w=mg(w,y.mode,T),w.return=y,w;case Ti:var C=w._init;return h(y,C(w._payload),T)}if(hc(w)||ql(w))return w=Ks(w,y.mode,T,null),w.return=y,w;Bd(y,w)}return null}function p(y,w,T,C){var D=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:a(y,w,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Cd:return T.key===D?l(y,w,T,C):null;case na:return T.key===D?c(y,w,T,C):null;case Ti:return D=T._init,p(y,w,D(T._payload),C)}if(hc(T)||ql(T))return D!==null?null:d(y,w,T,C,null);Bd(y,T)}return null}function m(y,w,T,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(T)||null,a(w,y,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Cd:return y=y.get(C.key===null?T:C.key)||null,l(w,y,C,D);case na:return y=y.get(C.key===null?T:C.key)||null,c(w,y,C,D);case Ti:var j=C._init;return m(y,w,T,j(C._payload),D)}if(hc(C)||ql(C))return y=y.get(T)||null,d(w,y,C,D,null);Bd(w,C)}return null}function x(y,w,T,C){for(var D=null,j=null,A=w,S=w=0,I=null;A!==null&&S<T.length;S++){A.index>S?(I=A,A=null):I=A.sibling;var P=p(y,A,T[S],C);if(P===null){A===null&&(A=I);break}t&&A&&P.alternate===null&&e(y,A),w=s(P,w,S),j===null?D=P:j.sibling=P,j=P,A=I}if(S===T.length)return n(y,A),et&&Rs(y,S),D;if(A===null){for(;S<T.length;S++)A=h(y,T[S],C),A!==null&&(w=s(A,w,S),j===null?D=A:j.sibling=A,j=A);return et&&Rs(y,S),D}for(A=r(y,A);S<T.length;S++)I=m(A,y,S,T[S],C),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?S:I.key),w=s(I,w,S),j===null?D=I:j.sibling=I,j=I);return t&&A.forEach(function(k){return e(y,k)}),et&&Rs(y,S),D}function v(y,w,T,C){var D=ql(T);if(typeof D!="function")throw Error(X(150));if(T=D.call(T),T==null)throw Error(X(151));for(var j=D=null,A=w,S=w=0,I=null,P=T.next();A!==null&&!P.done;S++,P=T.next()){A.index>S?(I=A,A=null):I=A.sibling;var k=p(y,A,P.value,C);if(k===null){A===null&&(A=I);break}t&&A&&k.alternate===null&&e(y,A),w=s(k,w,S),j===null?D=k:j.sibling=k,j=k,A=I}if(P.done)return n(y,A),et&&Rs(y,S),D;if(A===null){for(;!P.done;S++,P=T.next())P=h(y,P.value,C),P!==null&&(w=s(P,w,S),j===null?D=P:j.sibling=P,j=P);return et&&Rs(y,S),D}for(A=r(y,A);!P.done;S++,P=T.next())P=m(A,y,S,P.value,C),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?S:P.key),w=s(P,w,S),j===null?D=P:j.sibling=P,j=P);return t&&A.forEach(function(V){return e(y,V)}),et&&Rs(y,S),D}function E(y,w,T,C){if(typeof T=="object"&&T!==null&&T.type===ra&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Cd:e:{for(var D=T.key,j=w;j!==null;){if(j.key===D){if(D=T.type,D===ra){if(j.tag===7){n(y,j.sibling),w=i(j,T.props.children),w.return=y,y=w;break e}}else if(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ti&&eT(D)===j.type){n(y,j.sibling),w=i(j,T.props),w.ref=Xl(y,j,T),w.return=y,y=w;break e}n(y,j);break}else e(y,j);j=j.sibling}T.type===ra?(w=Ks(T.props.children,y.mode,C,T.key),w.return=y,y=w):(C=bh(T.type,T.key,T.props,null,y.mode,C),C.ref=Xl(y,w,T),C.return=y,y=C)}return o(y);case na:e:{for(j=T.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(y,w.sibling),w=i(w,T.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=mg(T,y.mode,C),w.return=y,y=w}return o(y);case Ti:return j=T._init,E(y,w,j(T._payload),C)}if(hc(T))return x(y,w,T,C);if(ql(T))return v(y,w,T,C);Bd(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(y,w.sibling),w=i(w,T),w.return=y,y=w):(n(y,w),w=pg(T,y.mode,C),w.return=y,y=w),o(y)):n(y,w)}return E}var ja=IA(!0),AA=IA(!1),rf=hs(null),sf=null,da=null,F0=null;function B0(){F0=da=sf=null}function $0(t){var e=rf.current;Qe(rf),t._currentValue=e}function My(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ea(t,e){sf=t,F0=da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(F0!==t)if(t={context:t,memoizedValue:e,next:null},da===null){if(sf===null)throw Error(X(308));da=t,sf.dependencies={lanes:0,firstContext:t}}else da=da.next=t;return e}var Us=null;function U0(t){Us===null?Us=[t]:Us.push(t)}function PA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,U0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yr(t,r)}function Yr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ei=!1;function z0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yr(t,n)}return i=r.interleaved,i===null?(e.next=e,U0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yr(t,n)}function vh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P0(t,n)}}function tT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function of(t,e,n,r){var i=t.updateQueue;Ei=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,v=a;switch(p=e,m=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){h=x.call(m,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,p=typeof x=="function"?x.call(m,h,p):x,p==null)break e;h=at({},h,p);break e;case 2:Ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ro|=o,t.lanes=o,t.memoizedState=h}}function nT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Bu={},Tr=hs(Bu),iu=hs(Bu),su=hs(Bu);function zs(t){if(t===Bu)throw Error(X(174));return t}function W0(t,e){switch(ze(su,e),ze(iu,t),ze(Tr,Bu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gy(e,t)}Qe(Tr),ze(Tr,e)}function Ma(){Qe(Tr),Qe(iu),Qe(su)}function RA(t){zs(su.current);var e=zs(Tr.current),n=gy(e,t.type);e!==n&&(ze(iu,t),ze(Tr,n))}function G0(t){iu.current===t&&(Qe(Tr),Qe(iu))}var it=hs(0);function af(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lg=[];function q0(){for(var t=0;t<lg.length;t++)lg[t]._workInProgressVersionPrimary=null;lg.length=0}var wh=si.ReactCurrentDispatcher,cg=si.ReactCurrentBatchConfig,no=0,ot=null,Tt=null,Pt=null,lf=!1,Ac=!1,ou=0,YO=0;function Wt(){throw Error(X(321))}function H0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function K0(t,e,n,r,i,s){if(no=s,ot=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wh.current=t===null||t.memoizedState===null?eL:tL,t=n(r,i),Ac){s=0;do{if(Ac=!1,ou=0,25<=s)throw Error(X(301));s+=1,Pt=Tt=null,e.updateQueue=null,wh.current=nL,t=n(r,i)}while(Ac)}if(wh.current=cf,e=Tt!==null&&Tt.next!==null,no=0,Pt=Tt=ot=null,lf=!1,e)throw Error(X(300));return t}function Q0(){var t=ou!==0;return ou=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ot.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Hn(){if(Tt===null){var t=ot.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Pt===null?ot.memoizedState:Pt.next;if(e!==null)Pt=e,Tt=t;else{if(t===null)throw Error(X(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Pt===null?ot.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function au(t,e){return typeof e=="function"?e(t):e}function ug(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=Tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((no&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ot.lanes|=d,ro|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ar(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ot.lanes|=s,ro|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dg(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ar(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function kA(){}function NA(t,e){var n=ot,r=Hn(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,fn=!0),r=r.queue,Y0(jA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,lu(9,VA.bind(null,n,r,i,e),void 0,null),Rt===null)throw Error(X(349));no&30||DA(n,e,i)}return i}function DA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function VA(t,e,n,r){e.value=n,e.getSnapshot=r,MA(e)&&OA(t)}function jA(t,e,n){return n(function(){MA(e)&&OA(t)})}function MA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch{return!0}}function OA(t){var e=Yr(t,1);e!==null&&sr(e,t,1,-1)}function rT(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:t},e.queue=t,t=t.dispatch=ZO.bind(null,ot,t),[e.memoizedState,t]}function lu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ot.updateQueue,e===null?(e={lastEffect:null,stores:null},ot.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LA(){return Hn().memoizedState}function xh(t,e,n,r){var i=fr();ot.flags|=t,i.memoizedState=lu(1|e,n,void 0,r===void 0?null:r)}function up(t,e,n,r){var i=Hn();r=r===void 0?null:r;var s=void 0;if(Tt!==null){var o=Tt.memoizedState;if(s=o.destroy,r!==null&&H0(r,o.deps)){i.memoizedState=lu(e,n,s,r);return}}ot.flags|=t,i.memoizedState=lu(1|e,n,s,r)}function iT(t,e){return xh(8390656,8,t,e)}function Y0(t,e){return up(2048,8,t,e)}function FA(t,e){return up(4,2,t,e)}function BA(t,e){return up(4,4,t,e)}function $A(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UA(t,e,n){return n=n!=null?n.concat([t]):null,up(4,4,$A.bind(null,e,t),n)}function X0(){}function zA(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function WA(t,e){var n=Hn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GA(t,e,n){return no&21?(ar(n,e)||(n=YI(),ot.lanes|=n,ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function XO(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var r=cg.transition;cg.transition={};try{t(!1),e()}finally{Le=n,cg.transition=r}}function qA(){return Hn().memoizedState}function JO(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HA(t))KA(e,n);else if(n=PA(t,e,n,r),n!==null){var i=on();sr(n,t,r,i),QA(n,e,r)}}function ZO(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HA(t))KA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=e.interleaved;l===null?(i.next=i,U0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=PA(t,e,i,r),n!==null&&(i=on(),sr(n,t,r,i),QA(n,e,r))}}function HA(t){var e=t.alternate;return t===ot||e!==null&&e===ot}function KA(t,e){Ac=lf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,P0(t,n)}}var cf={readContext:qn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},eL={readContext:qn,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:iT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xh(4194308,4,$A.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return xh(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JO.bind(null,ot,t),[r.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:rT,useDebugValue:X0,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=rT(!1),e=t[0];return t=XO.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ot,i=fr();if(et){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));no&30||DA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iT(jA.bind(null,r,s,t),[t]),r.flags|=2048,lu(9,VA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=fr(),e=Rt.identifierPrefix;if(et){var n=Ur,r=$r;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tL={readContext:qn,useCallback:zA,useContext:qn,useEffect:Y0,useImperativeHandle:UA,useInsertionEffect:FA,useLayoutEffect:BA,useMemo:WA,useReducer:ug,useRef:LA,useState:function(){return ug(au)},useDebugValue:X0,useDeferredValue:function(t){var e=Hn();return GA(e,Tt.memoizedState,t)},useTransition:function(){var t=ug(au)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:kA,useSyncExternalStore:NA,useId:qA,unstable_isNewReconciler:!1},nL={readContext:qn,useCallback:zA,useContext:qn,useEffect:Y0,useImperativeHandle:UA,useInsertionEffect:FA,useLayoutEffect:BA,useMemo:WA,useReducer:dg,useRef:LA,useState:function(){return dg(au)},useDebugValue:X0,useDeferredValue:function(t){var e=Hn();return Tt===null?e.memoizedState=t:GA(e,Tt.memoizedState,t)},useTransition:function(){var t=dg(au)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:kA,useSyncExternalStore:NA,useId:qA,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=at({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:at({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dp={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=on(),i=$i(t),s=Gr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fi(t,s,i),e!==null&&(sr(e,t,i,r),vh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=on(),i=$i(t),s=Gr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fi(t,s,i),e!==null&&(sr(e,t,i,r),vh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),r=$i(t),i=Gr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fi(t,i,r),e!==null&&(sr(e,t,r,n),vh(e,t,r))}};function sT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!eu(n,r)||!eu(i,s):!0}function YA(t,e,n){var r=!1,i=Ji,s=e.contextType;return typeof s=="object"&&s!==null?s=qn(s):(i=vn(e)?eo:Zt.current,r=e.contextTypes,s=(r=r!=null)?Da(t,i):Ji),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dp.enqueueReplaceState(e,e.state,null)}function Ly(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},z0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=qn(s):(s=vn(e)?eo:Zt.current,i.context=Da(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Oy(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dp.enqueueReplaceState(i,i.state,null),of(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Oa(t,e){try{var n="",r=e;do n+=RM(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rL=typeof WeakMap=="function"?WeakMap:Map;function XA(t,e,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){df||(df=!0,Qy=r),Fy(t,e)},n}function JA(t,e,n){n=Gr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fy(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Fy(t,e),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function aT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=yL.bind(null,t,e,n),e.then(t,t))}function lT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gr(-1,1),e.tag=2,Fi(n,e,1))),n.lanes|=1),t)}var iL=si.ReactCurrentOwner,fn=!1;function sn(t,e,n,r){e.child=t===null?AA(e,null,n,r):ja(e,t.child,n,r)}function uT(t,e,n,r,i){n=n.render;var s=e.ref;return Ea(e,i),r=K0(t,e,n,r,s,i),n=Q0(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(et&&n&&M0(e),e.flags|=1,sn(t,e,r,i),e.child)}function dT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!sw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ZA(t,e,s,r,i)):(t=bh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:eu,n(o,r)&&t.ref===e.ref)return Xr(t,e,i)}return e.flags|=1,t=Ui(s,r),t.ref=e.ref,t.return=e,e.child=t}function ZA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(eu(s,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,Xr(t,e,i)}return By(t,e,n,r,i)}function eP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(fa,bn),bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(fa,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(fa,bn),bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(fa,bn),bn|=r;return sn(t,e,i,n),e.child}function tP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function By(t,e,n,r,i){var s=vn(n)?eo:Zt.current;return s=Da(e,s),Ea(e,i),n=K0(t,e,n,r,s,i),r=Q0(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(et&&r&&M0(e),e.flags|=1,sn(t,e,n,i),e.child)}function hT(t,e,n,r,i){if(vn(n)){var s=!0;ef(e)}else s=!1;if(Ea(e,i),e.stateNode===null)_h(t,e),YA(e,n,r),Ly(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qn(c):(c=vn(n)?eo:Zt.current,c=Da(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&oT(e,o,r,c),Ei=!1;var p=e.memoizedState;o.state=p,of(e,r,o,i),l=e.memoizedState,a!==r||p!==l||yn.current||Ei?(typeof d=="function"&&(Oy(e,n,d,r),l=e.memoizedState),(a=Ei||sT(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zn(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qn(l):(l=vn(n)?eo:Zt.current,l=Da(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&oT(e,o,r,l),Ei=!1,p=e.memoizedState,o.state=p,of(e,r,o,i);var x=e.memoizedState;a!==h||p!==x||yn.current||Ei?(typeof m=="function"&&(Oy(e,n,m,r),x=e.memoizedState),(c=Ei||sT(e,n,c,r,p,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return $y(t,e,n,r,s,i)}function $y(t,e,n,r,i,s){tP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&X1(e,n,!1),Xr(t,e,s);r=e.stateNode,iL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ja(e,t.child,null,s),e.child=ja(e,null,a,s)):sn(t,e,a,s),e.memoizedState=r.state,i&&X1(e,n,!0),e.child}function nP(t){var e=t.stateNode;e.pendingContext?Y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y1(t,e.context,!1),W0(t,e.containerInfo)}function fT(t,e,n,r,i){return Va(),L0(i),e.flags|=256,sn(t,e,n,r),e.child}var Uy={dehydrated:null,treeContext:null,retryLane:0};function zy(t){return{baseLanes:t,cachePool:null,transitions:null}}function rP(t,e,n){var r=e.pendingProps,i=it.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(it,i&1),t===null)return jy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pp(o,r,0,null),t=Ks(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=zy(n),e.memoizedState=Uy,t):J0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return sL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ui(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ui(a,s):(s=Ks(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?zy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Uy,r}return s=t.child,t=s.sibling,r=Ui(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function J0(t,e){return e=pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $d(t,e,n,r){return r!==null&&L0(r),ja(e,t.child,null,n),t=J0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hg(Error(X(422))),$d(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pp({mode:"visible",children:r.children},i,0,null),s=Ks(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ja(e,t.child,null,o),e.child.memoizedState=zy(o),e.memoizedState=Uy,s);if(!(e.mode&1))return $d(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(X(419)),r=hg(s,r,void 0),$d(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=Rt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yr(t,i),sr(r,t,i,-1))}return iw(),r=hg(Error(X(421))),$d(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Cn=Li(i.nextSibling),Rn=e,et=!0,nr=null,t!==null&&(Un[zn++]=$r,Un[zn++]=Ur,Un[zn++]=to,$r=t.id,Ur=t.overflow,to=e),e=J0(e,r.children),e.flags|=4096,e)}function pT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),My(t.return,e,n)}function fg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pT(t,n,e);else if(t.tag===19)pT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(it,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&af(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&af(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fg(e,!0,n,null,s);break;case"together":fg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _h(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oL(t,e,n){switch(e.tag){case 3:nP(e),Va();break;case 5:RA(e);break;case 1:vn(e.type)&&ef(e);break;case 4:W0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(rf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?rP(t,e,n):(ze(it,it.current&1),t=Xr(t,e,n),t!==null?t.sibling:null);ze(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,eP(t,e,n)}return Xr(t,e,n)}var sP,Wy,oP,aP;sP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wy=function(){};oP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zs(Tr.current);var s=null;switch(n){case"input":i=hy(t,i),r=hy(t,r),s=[];break;case"select":i=at({},i,{value:void 0}),r=at({},r,{value:void 0}),s=[];break;case"textarea":i=my(t,i),r=my(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Jh)}yy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&He("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jl(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aL(t,e,n){var r=e.pendingProps;switch(O0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return vn(e.type)&&Zh(),Gt(e),null;case 3:return r=e.stateNode,Ma(),Qe(yn),Qe(Zt),q0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nr!==null&&(Jy(nr),nr=null))),Wy(t,e),Gt(e),null;case 5:G0(e);var i=zs(su.current);if(n=e.type,t!==null&&e.stateNode!=null)oP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Gt(e),null}if(t=zs(Tr.current),Fd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gr]=e,r[ru]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(i=0;i<pc.length;i++)He(pc[i],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":E1(r,s),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},He("invalid",r);break;case"textarea":S1(r,s),He("invalid",r)}yy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ld(r.textContent,a,t),i=["children",""+a]):Hc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":Rd(r),b1(r,s,!0);break;case"textarea":Rd(r),I1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Jh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gr]=e,t[ru]=r,sP(t,e,!1,!1),e.stateNode=t;e:{switch(o=vy(n,r),n){case"dialog":He("cancel",t),He("close",t),i=r;break;case"iframe":case"object":case"embed":He("load",t),i=r;break;case"video":case"audio":for(i=0;i<pc.length;i++)He(pc[i],t);i=r;break;case"source":He("error",t),i=r;break;case"img":case"image":case"link":He("error",t),He("load",t),i=r;break;case"details":He("toggle",t),i=r;break;case"input":E1(t,r),i=hy(t,r),He("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=at({},r,{value:void 0}),He("invalid",t);break;case"textarea":S1(t,r),i=my(t,r),He("invalid",t);break;default:i=r}yy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&MI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kc(t,l):typeof l=="number"&&Kc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&He("scroll",t):l!=null&&T0(t,s,l,o))}switch(n){case"input":Rd(t),b1(t,r,!1);break;case"textarea":Rd(t),I1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wa(t,!!r.multiple,s,!1):r.defaultValue!=null&&wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Jh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)aP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=zs(su.current),zs(Tr.current),Fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(s=r.nodeValue!==n)&&(t=Rn,t!==null))switch(t.tag){case 3:Ld(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ld(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return Gt(e),null;case 13:if(Qe(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Cn!==null&&e.mode&1&&!(e.flags&128))SA(),Va(),e.flags|=98560,s=!1;else if(s=Fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[gr]=e}else Va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),s=!1}else nr!==null&&(Jy(nr),nr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Et===0&&(Et=3):iw())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return Ma(),Wy(t,e),t===null&&tu(e.stateNode.containerInfo),Gt(e),null;case 10:return $0(e.type._context),Gt(e),null;case 17:return vn(e.type)&&Zh(),Gt(e),null;case 19:if(Qe(it),s=e.memoizedState,s===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Jl(s,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=af(t),o!==null){for(e.flags|=128,Jl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(it,it.current&1|2),e.child}t=t.sibling}s.tail!==null&&pt()>La&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304)}else{if(!r)if(t=af(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!et)return Gt(e),null}else 2*pt()-s.renderingStartTime>La&&n!==1073741824&&(e.flags|=128,r=!0,Jl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=pt(),e.sibling=null,n=it.current,ze(it,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return rw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function lL(t,e){switch(O0(e),e.tag){case 1:return vn(e.type)&&Zh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),Qe(yn),Qe(Zt),q0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return G0(e),null;case 13:if(Qe(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(it),null;case 4:return Ma(),null;case 10:return $0(e.type._context),null;case 22:case 23:return rw(),null;case 24:return null;default:return null}}var Ud=!1,Qt=!1,cL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ha(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dt(t,e,r)}else n.current=null}function Gy(t,e,n){try{n()}catch(r){dt(t,e,r)}}var mT=!1;function uL(t,e){if(Py=Qh,t=hA(),j0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cy={focusedElem:t,selectionRange:n},Qh=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,E=x.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Zn(e.type,v),E);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(C){dt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return x=mT,mT=!1,x}function Pc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gy(e,n,s)}i=i.next}while(i!==r)}}function hp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lP(t){var e=t.alternate;e!==null&&(t.alternate=null,lP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[ru],delete e[Ny],delete e[qO],delete e[HO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cP(t){return t.tag===5||t.tag===3||t.tag===4}function gT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jh));else if(r!==4&&(t=t.child,t!==null))for(Hy(t,e,n),t=t.sibling;t!==null;)Hy(t,e,n),t=t.sibling}function Ky(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ky(t,e,n),t=t.sibling;t!==null;)Ky(t,e,n),t=t.sibling}var Vt=null,er=!1;function mi(t,e,n){for(n=n.child;n!==null;)uP(t,e,n),n=n.sibling}function uP(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(ip,n)}catch{}switch(n.tag){case 5:Qt||ha(n,e);case 6:var r=Vt,i=er;Vt=null,mi(t,e,n),Vt=r,er=i,Vt!==null&&(er?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(er?(t=Vt,n=n.stateNode,t.nodeType===8?og(t.parentNode,n):t.nodeType===1&&og(t,n),Jc(t)):og(Vt,n.stateNode));break;case 4:r=Vt,i=er,Vt=n.stateNode.containerInfo,er=!0,mi(t,e,n),Vt=r,er=i;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gy(n,e,o),i=i.next}while(i!==r)}mi(t,e,n);break;case 1:if(!Qt&&(ha(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){dt(n,e,a)}mi(t,e,n);break;case 21:mi(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,mi(t,e,n),Qt=r):mi(t,e,n);break;default:mi(t,e,n)}}function yT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new cL),e.forEach(function(r){var i=wL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vt=a.stateNode,er=!1;break e;case 3:Vt=a.stateNode.containerInfo,er=!0;break e;case 4:Vt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(Vt===null)throw Error(X(160));uP(s,o,i),Vt=null,er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){dt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dP(e,t),e=e.sibling}function dP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),hr(t),r&4){try{Pc(3,t,t.return),hp(3,t)}catch(v){dt(t,t.return,v)}try{Pc(5,t,t.return)}catch(v){dt(t,t.return,v)}}break;case 1:Yn(e,t),hr(t),r&512&&n!==null&&ha(n,n.return);break;case 5:if(Yn(e,t),hr(t),r&512&&n!==null&&ha(n,n.return),t.flags&32){var i=t.stateNode;try{Kc(i,"")}catch(v){dt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DI(i,s),vy(a,o);var c=vy(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?LI(i,h):d==="dangerouslySetInnerHTML"?MI(i,h):d==="children"?Kc(i,h):T0(i,d,h,c)}switch(a){case"input":fy(i,s);break;case"textarea":VI(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?wa(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?wa(i,!!s.multiple,s.defaultValue,!0):wa(i,!!s.multiple,s.multiple?[]:"",!1))}i[ru]=s}catch(v){dt(t,t.return,v)}}break;case 6:if(Yn(e,t),hr(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){dt(t,t.return,v)}}break;case 3:if(Yn(e,t),hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jc(e.containerInfo)}catch(v){dt(t,t.return,v)}break;case 4:Yn(e,t),hr(t);break;case 13:Yn(e,t),hr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(tw=pt())),r&4&&yT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(c=Qt)||d,Yn(e,t),Qt=c):Yn(e,t),hr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ie=t,d=t.child;d!==null;){for(h=ie=d;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Pc(4,p,p.return);break;case 1:ha(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){dt(r,n,v)}}break;case 5:ha(p,p.return);break;case 22:if(p.memoizedState!==null){wT(h);continue}}m!==null?(m.return=p,ie=m):wT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=OI("display",o))}catch(v){dt(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){dt(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(e,t),hr(t),r&4&&yT(t);break;case 21:break;default:Yn(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cP(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kc(i,""),r.flags&=-33);var s=gT(t);Ky(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gT(t);Hy(t,a,o);break;default:throw Error(X(161))}}catch(l){dt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dL(t,e,n){ie=t,hP(t)}function hP(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ud;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qt;a=Ud;var c=Qt;if(Ud=o,(Qt=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?xT(i):l!==null?(l.return=o,ie=l):xT(i);for(;s!==null;)ie=s,hP(s),s=s.sibling;ie=i,Ud=a,Qt=c}vT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):vT(t)}}function vT(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||hp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Jc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Qt||e.flags&512&&qy(e)}catch(p){dt(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function wT(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function xT(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hp(4,e)}catch(l){dt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dt(e,i,l)}}var s=e.return;try{qy(e)}catch(l){dt(e,s,l)}break;case 5:var o=e.return;try{qy(e)}catch(l){dt(e,o,l)}}}catch(l){dt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var hL=Math.ceil,uf=si.ReactCurrentDispatcher,Z0=si.ReactCurrentOwner,Gn=si.ReactCurrentBatchConfig,Ne=0,Rt=null,wt=null,Ot=0,bn=0,fa=hs(0),Et=0,cu=null,ro=0,fp=0,ew=0,Cc=null,hn=null,tw=0,La=1/0,Fr=null,df=!1,Qy=null,Bi=null,zd=!1,Ri=null,hf=0,Rc=0,Yy=null,Th=-1,Eh=0;function on(){return Ne&6?pt():Th!==-1?Th:Th=pt()}function $i(t){return t.mode&1?Ne&2&&Ot!==0?Ot&-Ot:QO.transition!==null?(Eh===0&&(Eh=YI()),Eh):(t=Le,t!==0||(t=window.event,t=t===void 0?16:rA(t.type)),t):1}function sr(t,e,n,r){if(50<Rc)throw Rc=0,Yy=null,Error(X(185));Ou(t,n,r),(!(Ne&2)||t!==Rt)&&(t===Rt&&(!(Ne&2)&&(fp|=n),Et===4&&Ii(t,Ot)),wn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(La=pt()+500,cp&&fs()))}function wn(t,e){var n=t.callbackNode;QM(t,e);var r=Kh(t,t===Rt?Ot:0);if(r===0)n!==null&&C1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&C1(n),e===1)t.tag===0?KO(_T.bind(null,t)):TA(_T.bind(null,t)),WO(function(){!(Ne&6)&&fs()}),n=null;else{switch(XI(r)){case 1:n=A0;break;case 4:n=KI;break;case 16:n=Hh;break;case 536870912:n=QI;break;default:n=Hh}n=xP(n,fP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fP(t,e){if(Th=-1,Eh=0,Ne&6)throw Error(X(327));var n=t.callbackNode;if(ba()&&t.callbackNode!==n)return null;var r=Kh(t,t===Rt?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ff(t,r);else{e=r;var i=Ne;Ne|=2;var s=mP();(Rt!==t||Ot!==e)&&(Fr=null,La=pt()+500,Hs(t,e));do try{mL();break}catch(a){pP(t,a)}while(1);B0(),uf.current=s,Ne=i,wt!==null?e=0:(Rt=null,Ot=0,e=Et)}if(e!==0){if(e===2&&(i=Ey(t),i!==0&&(r=i,e=Xy(t,i))),e===1)throw n=cu,Hs(t,0),Ii(t,r),wn(t,pt()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!fL(i)&&(e=ff(t,r),e===2&&(s=Ey(t),s!==0&&(r=s,e=Xy(t,s))),e===1))throw n=cu,Hs(t,0),Ii(t,r),wn(t,pt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:ks(t,hn,Fr);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=tw+500-pt(),10<e)){if(Kh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){on(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ky(ks.bind(null,t,hn,Fr),e);break}ks(t,hn,Fr);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ir(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hL(r/1960))-r,10<r){t.timeoutHandle=ky(ks.bind(null,t,hn,Fr),r);break}ks(t,hn,Fr);break;case 5:ks(t,hn,Fr);break;default:throw Error(X(329))}}}return wn(t,pt()),t.callbackNode===n?fP.bind(null,t):null}function Xy(t,e){var n=Cc;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=ff(t,e),t!==2&&(e=hn,hn=n,e!==null&&Jy(e)),t}function Jy(t){hn===null?hn=t:hn.push.apply(hn,t)}function fL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~ew,e&=~fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function _T(t){if(Ne&6)throw Error(X(327));ba();var e=Kh(t,0);if(!(e&1))return wn(t,pt()),null;var n=ff(t,e);if(t.tag!==0&&n===2){var r=Ey(t);r!==0&&(e=r,n=Xy(t,r))}if(n===1)throw n=cu,Hs(t,0),Ii(t,e),wn(t,pt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,hn,Fr),wn(t,pt()),null}function nw(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(La=pt()+500,cp&&fs())}}function io(t){Ri!==null&&Ri.tag===0&&!(Ne&6)&&ba();var e=Ne;Ne|=1;var n=Gn.transition,r=Le;try{if(Gn.transition=null,Le=1,t)return t()}finally{Le=r,Gn.transition=n,Ne=e,!(Ne&6)&&fs()}}function rw(){bn=fa.current,Qe(fa)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zO(n)),wt!==null)for(n=wt.return;n!==null;){var r=n;switch(O0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zh();break;case 3:Ma(),Qe(yn),Qe(Zt),q0();break;case 5:G0(r);break;case 4:Ma();break;case 13:Qe(it);break;case 19:Qe(it);break;case 10:$0(r.type._context);break;case 22:case 23:rw()}n=n.return}if(Rt=t,wt=t=Ui(t.current,null),Ot=bn=e,Et=0,cu=null,ew=fp=ro=0,hn=Cc=null,Us!==null){for(e=0;e<Us.length;e++)if(n=Us[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Us=null}return t}function pP(t,e){do{var n=wt;try{if(B0(),wh.current=cf,lf){for(var r=ot.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lf=!1}if(no=0,Pt=Tt=ot=null,Ac=!1,ou=0,Z0.current=null,n===null||n.return===null){Et=1,cu=e,wt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Ot,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=lT(o);if(m!==null){m.flags&=-257,cT(m,o,a,s,e),m.mode&1&&aT(s,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var v=new Set;v.add(l),e.updateQueue=v}else x.add(l);break e}else{if(!(e&1)){aT(s,c,e),iw();break e}l=Error(X(426))}}else if(et&&a.mode&1){var E=lT(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),cT(E,o,a,s,e),L0(Oa(l,a));break e}}s=l=Oa(l,a),Et!==4&&(Et=2),Cc===null?Cc=[s]:Cc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=XA(s,l,e);tT(s,y);break e;case 1:a=l;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Bi===null||!Bi.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=JA(s,a,e);tT(s,C);break e}}s=s.return}while(s!==null)}yP(n)}catch(D){e=D,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(1)}function mP(){var t=uf.current;return uf.current=cf,t===null?cf:t}function iw(){(Et===0||Et===3||Et===2)&&(Et=4),Rt===null||!(ro&268435455)&&!(fp&268435455)||Ii(Rt,Ot)}function ff(t,e){var n=Ne;Ne|=2;var r=mP();(Rt!==t||Ot!==e)&&(Fr=null,Hs(t,e));do try{pL();break}catch(i){pP(t,i)}while(1);if(B0(),Ne=n,uf.current=r,wt!==null)throw Error(X(261));return Rt=null,Ot=0,Et}function pL(){for(;wt!==null;)gP(wt)}function mL(){for(;wt!==null&&!BM();)gP(wt)}function gP(t){var e=wP(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?yP(t):wt=e,Z0.current=null}function yP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lL(n,e),n!==null){n.flags&=32767,wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,wt=null;return}}else if(n=aL(n,e,bn),n!==null){wt=n;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);Et===0&&(Et=5)}function ks(t,e,n){var r=Le,i=Gn.transition;try{Gn.transition=null,Le=1,gL(t,e,n,r)}finally{Gn.transition=i,Le=r}return null}function gL(t,e,n,r){do ba();while(Ri!==null);if(Ne&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(YM(t,s),t===Rt&&(wt=Rt=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zd||(zd=!0,xP(Hh,function(){return ba(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gn.transition,Gn.transition=null;var o=Le;Le=1;var a=Ne;Ne|=4,Z0.current=null,uL(t,n),dP(n,t),MO(Cy),Qh=!!Py,Cy=Py=null,t.current=n,dL(n),$M(),Ne=a,Le=o,Gn.transition=s}else t.current=n;if(zd&&(zd=!1,Ri=t,hf=i),s=t.pendingLanes,s===0&&(Bi=null),WM(n.stateNode),wn(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(df)throw df=!1,t=Qy,Qy=null,t;return hf&1&&t.tag!==0&&ba(),s=t.pendingLanes,s&1?t===Yy?Rc++:(Rc=0,Yy=t):Rc=0,fs(),null}function ba(){if(Ri!==null){var t=XI(hf),e=Gn.transition,n=Le;try{if(Gn.transition=null,Le=16>t?16:t,Ri===null)var r=!1;else{if(t=Ri,Ri=null,hf=0,Ne&6)throw Error(X(331));var i=Ne;for(Ne|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var d=ie;switch(d.tag){case 0:case 11:case 15:Pc(8,d,s)}var h=d.child;if(h!==null)h.return=d,ie=h;else for(;ie!==null;){d=ie;var p=d.sibling,m=d.return;if(lP(d),d===c){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var x=s.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Pc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ie=y;break e}ie=s.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ie=T;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hp(9,a)}}catch(D){dt(a,a.return,D)}if(a===o){ie=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ie=C;break e}ie=a.return}}if(Ne=i,fs(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(ip,t)}catch{}r=!0}return r}finally{Le=n,Gn.transition=e}}return!1}function TT(t,e,n){e=Oa(n,e),e=XA(t,e,1),t=Fi(t,e,1),e=on(),t!==null&&(Ou(t,1,e),wn(t,e))}function dt(t,e,n){if(t.tag===3)TT(t,t,n);else for(;e!==null;){if(e.tag===3){TT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){t=Oa(n,t),t=JA(e,t,1),e=Fi(e,t,1),t=on(),e!==null&&(Ou(e,1,t),wn(e,t));break}}e=e.return}}function yL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Ot&n)===n&&(Et===4||Et===3&&(Ot&130023424)===Ot&&500>pt()-tw?Hs(t,0):ew|=n),wn(t,e)}function vP(t,e){e===0&&(t.mode&1?(e=Dd,Dd<<=1,!(Dd&130023424)&&(Dd=4194304)):e=1);var n=on();t=Yr(t,e),t!==null&&(Ou(t,e,n),wn(t,n))}function vL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vP(t,n)}function wL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),vP(t,n)}var wP;wP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,oL(t,e,n);fn=!!(t.flags&131072)}else fn=!1,et&&e.flags&1048576&&EA(e,nf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_h(t,e),t=e.pendingProps;var i=Da(e,Zt.current);Ea(e,n),i=K0(null,e,r,t,i,n);var s=Q0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(s=!0,ef(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,z0(e),i.updater=dp,e.stateNode=i,i._reactInternals=e,Ly(e,r,t,n),e=$y(null,e,r,!0,s,n)):(e.tag=0,et&&s&&M0(e),sn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_h(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=_L(r),t=Zn(r,t),i){case 0:e=By(null,e,r,t,n);break e;case 1:e=hT(null,e,r,t,n);break e;case 11:e=uT(null,e,r,t,n);break e;case 14:e=dT(null,e,r,Zn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),By(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),hT(t,e,r,i,n);case 3:e:{if(nP(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,CA(t,e),of(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Oa(Error(X(423)),e),e=fT(t,e,r,n,i);break e}else if(r!==i){i=Oa(Error(X(424)),e),e=fT(t,e,r,n,i);break e}else for(Cn=Li(e.stateNode.containerInfo.firstChild),Rn=e,et=!0,nr=null,n=AA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Va(),r===i){e=Xr(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return RA(e),t===null&&jy(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ry(r,i)?o=null:s!==null&&Ry(r,s)&&(e.flags|=32),tP(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&jy(e),null;case 13:return rP(t,e,n);case 4:return W0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ja(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),uT(t,e,r,i,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(rf,r._currentValue),r._currentValue=o,s!==null)if(ar(s.value,o)){if(s.children===i.children&&!yn.current){e=Xr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Gr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),My(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),My(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ea(e,n),i=qn(i),r=r(i),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),dT(t,e,r,i,n);case 15:return ZA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),_h(t,e),e.tag=1,vn(r)?(t=!0,ef(e)):t=!1,Ea(e,n),YA(e,r,i),Ly(e,r,i,n),$y(null,e,r,!0,t,n);case 19:return iP(t,e,n);case 22:return eP(t,e,n)}throw Error(X(156,e.tag))};function xP(t,e){return HI(t,e)}function xL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new xL(t,e,n,r)}function sw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _L(t){if(typeof t=="function")return sw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===b0)return 11;if(t===S0)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")sw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ra:return Ks(n.children,i,s,e);case E0:o=8,i|=8;break;case ly:return t=Wn(12,n,e,i|2),t.elementType=ly,t.lanes=s,t;case cy:return t=Wn(13,n,e,i),t.elementType=cy,t.lanes=s,t;case uy:return t=Wn(19,n,e,i),t.elementType=uy,t.lanes=s,t;case RI:return pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PI:o=10;break e;case CI:o=9;break e;case b0:o=11;break e;case S0:o=14;break e;case Ti:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ks(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function pp(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=RI,t.lanes=n,t.stateNode={isHidden:!1},t}function pg(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function mg(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function TL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qm(0),this.expirationTimes=Qm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ow(t,e,n,r,i,s,o,a,l){return t=new TL(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},z0(s),t}function EL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:na,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _P(t){if(!t)return Ji;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(vn(n))return _A(t,n,e)}return e}function TP(t,e,n,r,i,s,o,a,l){return t=ow(n,r,!0,t,i,s,o,a,l),t.context=_P(null),n=t.current,r=on(),i=$i(n),s=Gr(r,i),s.callback=e??null,Fi(n,s,i),t.current.lanes=i,Ou(t,i,r),wn(t,r),t}function mp(t,e,n,r){var i=e.current,s=on(),o=$i(i);return n=_P(n),e.context===null?e.context=n:e.pendingContext=n,e=Gr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fi(i,e,o),t!==null&&(sr(t,i,o,s),vh(t,i,o)),o}function pf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ET(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function aw(t,e){ET(t,e),(t=t.alternate)&&ET(t,e)}function bL(){return null}var EP=typeof reportError=="function"?reportError:function(t){console.error(t)};function lw(t){this._internalRoot=t}gp.prototype.render=lw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));mp(t,e,null,null)};gp.prototype.unmount=lw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){mp(null,t,null,null)}),e[Qr]=null}};function gp(t){this._internalRoot=t}gp.prototype.unstable_scheduleHydration=function(t){if(t){var e=eA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Si.length&&e!==0&&e<Si[n].priority;n++);Si.splice(n,0,t),n===0&&nA(t)}};function cw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bT(){}function SL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=pf(o);s.call(c)}}var o=TP(e,r,t,0,null,!1,!1,"",bT);return t._reactRootContainer=o,t[Qr]=o.current,tu(t.nodeType===8?t.parentNode:t),io(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=pf(l);a.call(c)}}var l=ow(t,0,!1,null,null,!1,!1,"",bT);return t._reactRootContainer=l,t[Qr]=l.current,tu(t.nodeType===8?t.parentNode:t),io(function(){mp(e,l,n,r)}),l}function vp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=pf(o);a.call(l)}}mp(e,o,t,i)}else o=SL(n,e,t,i,r);return pf(o)}JI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fc(e.pendingLanes);n!==0&&(P0(e,n|1),wn(e,pt()),!(Ne&6)&&(La=pt()+500,fs()))}break;case 13:io(function(){var r=Yr(t,1);if(r!==null){var i=on();sr(r,t,1,i)}}),aw(t,1)}};C0=function(t){if(t.tag===13){var e=Yr(t,134217728);if(e!==null){var n=on();sr(e,t,134217728,n)}aw(t,134217728)}};ZI=function(t){if(t.tag===13){var e=$i(t),n=Yr(t,e);if(n!==null){var r=on();sr(n,t,e,r)}aw(t,e)}};eA=function(){return Le};tA=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};xy=function(t,e,n){switch(e){case"input":if(fy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lp(r);if(!i)throw Error(X(90));NI(r),fy(r,i)}}}break;case"textarea":VI(t,n);break;case"select":e=n.value,e!=null&&wa(t,!!n.multiple,e,!1)}};$I=nw;UI=io;var IL={usingClientEntryPoint:!1,Events:[Fu,aa,lp,FI,BI,nw]},Zl={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AL={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GI(t),t===null?null:t.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||bL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{ip=Wd.inject(AL),_r=Wd}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IL;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cw(e))throw Error(X(200));return EL(t,e,null,n)};On.createRoot=function(t,e){if(!cw(t))throw Error(X(299));var n=!1,r="",i=EP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ow(t,1,!1,null,null,n,!1,r,i),t[Qr]=e.current,tu(t.nodeType===8?t.parentNode:t),new lw(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=GI(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return io(t)};On.hydrate=function(t,e,n){if(!yp(e))throw Error(X(200));return vp(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!cw(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=EP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TP(e,null,t,1,n??null,i,!1,s,o),t[Qr]=e.current,tu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gp(e)};On.render=function(t,e,n){if(!yp(e))throw Error(X(200));return vp(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!yp(t))throw Error(X(40));return t._reactRootContainer?(io(function(){vp(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};On.unstable_batchedUpdates=nw;On.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yp(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return vp(t,e,n,!1,r)};On.version="18.3.1-next-f1338f8080-20240426";function bP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bP)}catch(t){console.error(t)}}bP(),bI.exports=On;var bo=bI.exports;const PL=ul(bo);var ST=bo;oy.createRoot=ST.createRoot,oy.hydrateRoot=ST.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const IT="popstate";function CL(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Zy("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:IP(i)}return kL(e,n,null,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function SP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RL(){return Math.random().toString(36).substr(2,8)}function AT(t,e){return{usr:t.state,key:t.key,idx:e}}function Zy(t,e,n,r){return n===void 0&&(n=null),uu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pl(e):e,{state:n,key:e&&e.key||r||RL()})}function IP(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ki.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(uu({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=ki.Pop;let E=d(),y=E==null?null:E-c;c=E,l&&l({action:a,location:v.location,delta:y})}function p(E,y){a=ki.Push;let w=Zy(v.location,E,y);n&&n(w,E),c=d()+1;let T=AT(w,c),C=v.createHref(w);try{o.pushState(T,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(C)}s&&l&&l({action:a,location:v.location,delta:1})}function m(E,y){a=ki.Replace;let w=Zy(v.location,E,y);n&&n(w,E),c=d();let T=AT(w,c),C=v.createHref(w);o.replaceState(T,"",C),s&&l&&l({action:a,location:v.location,delta:0})}function x(E){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof E=="string"?E:IP(E);return w=w.replace(/ $/,"%20"),bt(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let v={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(IT,h),l=E,()=>{i.removeEventListener(IT,h),l=null}},createHref(E){return e(i,E)},createURL:x,encodeLocation(E){let y=x(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(E){return o.go(E)}};return v}var PT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(PT||(PT={}));function NL(t,e,n){return n===void 0&&(n="/"),DL(t,e,n,!1)}function DL(t,e,n,r){let i=typeof e=="string"?pl(e):e,s=CP(i.pathname||"/",n);if(s==null)return null;let o=AP(t);VL(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=GL(s);a=zL(o[l],c,r)}return a}function AP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(bt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Qs([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(bt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AP(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:$L(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of PP(s.path))i(s,o,l)}),e}function PP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=PP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function VL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jL=/^:[\w-]+$/,ML=3,OL=2,LL=1,FL=10,BL=-2,CT=t=>t==="*";function $L(t,e){let n=t.split("/"),r=n.length;return n.some(CT)&&(r+=BL),e&&(r+=OL),n.filter(i=>!CT(i)).reduce((i,s)=>i+(jL.test(s)?ML:s===""?LL:FL),r)}function UL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function zL(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=RT({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=RT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Qs([s,h.pathname]),pathnameBase:XL(Qs([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Qs([s,h.pathnameBase]))}return o}function RT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=WL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let v=a[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const x=a[h];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function WL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),SP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return SP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function CP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?pl(t):t;return{pathname:n?n.startsWith("/")?n:HL(n,e):e,search:JL(r),hash:ZL(i)}}function HL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function QL(t,e){let n=KL(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function YL(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=pl(t):(i=uu({},t),bt(!i.pathname||!i.pathname.includes("?"),gg("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),gg("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),gg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=qL(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Qs=t=>t.join("/").replace(/\/\/+/g,"/"),XL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RP=["post","put","patch","delete"];new Set(RP);const t4=["get",...RP];new Set(t4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}const uw=_.createContext(null),n4=_.createContext(null),wp=_.createContext(null),xp=_.createContext(null),So=_.createContext({outlet:null,matches:[],isDataRoute:!1}),kP=_.createContext(null);function _p(){return _.useContext(xp)!=null}function dw(){return _p()||bt(!1),_.useContext(xp).location}function NP(t){_.useContext(wp).static||_.useLayoutEffect(t)}function Io(){let{isDataRoute:t}=_.useContext(So);return t?m4():r4()}function r4(){_p()||bt(!1);let t=_.useContext(uw),{basename:e,future:n,navigator:r}=_.useContext(wp),{matches:i}=_.useContext(So),{pathname:s}=dw(),o=JSON.stringify(QL(i,n.v7_relativeSplatPath)),a=_.useRef(!1);return NP(()=>{a.current=!0}),_.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=YL(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Qs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function Tp(){let{matches:t}=_.useContext(So),e=t[t.length-1];return e?e.params:{}}function i4(t,e){return s4(t,e)}function s4(t,e,n,r){_p()||bt(!1);let{navigator:i}=_.useContext(wp),{matches:s}=_.useContext(So),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=dw(),d;if(e){var h;let E=typeof e=="string"?pl(e):e;l==="/"||(h=E.pathname)!=null&&h.startsWith(l)||bt(!1),d=E}else d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let E=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=NL(t,{pathname:m}),v=u4(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Qs([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Qs([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,r);return e&&v?_.createElement(xp.Provider,{value:{location:du({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ki.Pop}},v):v}function o4(){let t=p4(),e=e4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:i},n):null,s)}const a4=_.createElement(o4,null);class l4 extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?_.createElement(So.Provider,{value:this.props.routeContext},_.createElement(kP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c4(t){let{routeContext:e,match:n,children:r}=t,i=_.useContext(uw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(So.Provider,{value:e},r)}function u4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||bt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:m}=n,x=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,x=!1,v=null,E=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||a4,l&&(c<0&&p===0?(g4("route-fallback",!1),x=!0,E=null):c===p&&(x=!0,E=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,p+1)),w=()=>{let T;return m?T=v:x?T=E:h.route.Component?T=_.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,_.createElement(c4,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?_.createElement(l4,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var DP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DP||{}),mf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(mf||{});function d4(t){let e=_.useContext(uw);return e||bt(!1),e}function h4(t){let e=_.useContext(n4);return e||bt(!1),e}function f4(t){let e=_.useContext(So);return e||bt(!1),e}function VP(t){let e=f4(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function p4(){var t;let e=_.useContext(kP),n=h4(mf.UseRouteError),r=VP(mf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function m4(){let{router:t}=d4(DP.UseNavigateStable),e=VP(mf.UseNavigateStable),n=_.useRef(!1);return NP(()=>{n.current=!0}),_.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,du({fromRouteId:e},s)))},[t,e])}const kT={};function g4(t,e,n){!e&&!kT[t]&&(kT[t]=!0)}function y4(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Lr(t){bt(!1)}function v4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ki.Pop,navigator:s,static:o=!1,future:a}=t;_p()&&bt(!1);let l=e.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:l,navigator:s,static:o,future:du({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=pl(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:x="default"}=r,v=_.useMemo(()=>{let E=CP(d,l);return E==null?null:{location:{pathname:E,search:h,hash:p,state:m,key:x},navigationType:i}},[l,d,h,p,m,x,i]);return v==null?null:_.createElement(wp.Provider,{value:c},_.createElement(xp.Provider,{children:n,value:v}))}function w4(t){let{children:e,location:n}=t;return i4(ev(e),n)}new Promise(()=>{});function ev(t,e){e===void 0&&(e=[]);let n=[];return _.Children.forEach(t,(r,i)=>{if(!_.isValidElement(r))return;let s=[...e,i];if(r.type===_.Fragment){n.push.apply(n,ev(r.props.children,s));return}r.type!==Lr&&bt(!1),!r.props.index||!r.props.children||bt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ev(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const x4="6";try{window.__reactRouterVersion=x4}catch{}const _4="startTransition",NT=w0[_4];function T4(t){let{basename:e,children:n,future:r,window:i}=t,s=_.useRef();s.current==null&&(s.current=CL({window:i,v5Compat:!0}));let o=s.current,[a,l]=_.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=_.useCallback(h=>{c&&NT?NT(()=>l(h)):l(h)},[l,c]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>y4(r),[r]),_.createElement(v4,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var DT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(DT||(DT={}));var VT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(VT||(VT={}));function jP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=jP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function MP(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=jP(t))&&(r&&(r+=" "),r+=e);return r}function E4(){for(var t=0,e,n,r="";t<arguments.length;)(e=arguments[t++])&&(n=OP(e))&&(r&&(r+=" "),r+=n);return r}function OP(t){if(typeof t=="string")return t;for(var e,n="",r=0;r<t.length;r++)t[r]&&(e=OP(t[r]))&&(n&&(n+=" "),n+=e);return n}var hw="-";function b4(t){var e=I4(t),n=t.conflictingClassGroups,r=t.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(hw);return l[0]===""&&l.length!==1&&l.shift(),LP(l,e)||S4(a)}function o(a,l){var c=n[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function LP(t,e){var o;if(t.length===0)return e.classGroupId;var n=t[0],r=e.nextPart.get(n),i=r?LP(t.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=t.join(hw);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var jT=/^\[(.+)\]$/;function S4(t){if(jT.test(t)){var e=jT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function I4(t){var e=t.theme,n=t.prefix,r={nextPart:new Map,validators:[]},i=P4(Object.entries(t.classGroups),n);return i.forEach(function(s){var o=s[0],a=s[1];tv(a,r,o,e)}),r}function tv(t,e,n,r){t.forEach(function(i){if(typeof i=="string"){var s=i===""?e:MT(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(A4(i)){tv(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];tv(l,MT(e,a),n,r)})})}function MT(t,e){var n=t;return e.split(hw).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function A4(t){return t.isThemeGetter}function P4(t,e){return e?t.map(function(n){var r=n[0],i=n[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):t}function C4(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get:function(o){var a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){n.has(o)?n.set(o,a):i(o,a)}}}var FP="!";function R4(t){var e=t.separator||":",n=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,d,h=0;h<o.length;h++){var p=o[h];if(l===0){if(p===r&&(n||o.slice(h,h+i)===e)){a.push(o.slice(c,h)),c=h+i;continue}if(p==="/"){d=h;continue}}p==="["?l++:p==="]"&&l--}var m=a.length===0?o:o.substring(c),x=m.startsWith(FP),v=x?m.substring(1):m,E=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:x,baseClassName:v,maybePostfixModifierPosition:E}}}function k4(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,n.sort().concat([r])),n=[]):n.push(r)}),e.push.apply(e,n.sort()),e}function N4(t){return{cache:C4(t.cacheSize),splitModifiers:R4(t),...b4(t)}}var D4=/\s+/;function V4(t,e){var n=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(D4).map(function(o){var a=n(o),l=a.modifiers,c=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,p=r(h?d.substring(0,h):d),m=!!h;if(!p){if(!h)return{isTailwindClass:!1,originalClassName:o};if(p=r(d),!p)return{isTailwindClass:!1,originalClassName:o};m=!1}var x=k4(l).join(":"),v=c?x+FP:x;return{isTailwindClass:!0,modifierId:v,classGroupId:p,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,d=a+l;return s.has(d)?!1:(s.add(d),i(l,c).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function j4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i,s,o=a;function a(c){var d=e[0],h=e.slice(1),p=h.reduce(function(m,x){return x(m)},d());return r=N4(p),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var d=i(c);if(d)return d;var h=V4(c,r);return s(c,h),h}return function(){return o(E4.apply(null,arguments))}}function qe(t){var e=function(r){return r[t]||[]};return e.isThemeGetter=!0,e}var BP=/^\[(?:([a-z-]+):)?(.+)\]$/i,M4=/^\d+\/\d+$/,O4=new Set(["px","full","screen"]),L4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,B4=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Xn(t){return Ws(t)||O4.has(t)||M4.test(t)||nv(t)}function nv(t){return Ao(t,"length",q4)}function $4(t){return Ao(t,"size",$P)}function U4(t){return Ao(t,"position",$P)}function z4(t){return Ao(t,"url",H4)}function Gd(t){return Ao(t,"number",Ws)}function Ws(t){return!Number.isNaN(Number(t))}function W4(t){return t.endsWith("%")&&Ws(t.slice(0,-1))}function ec(t){return OT(t)||Ao(t,"number",OT)}function Ie(t){return BP.test(t)}function tc(){return!0}function gi(t){return L4.test(t)}function G4(t){return Ao(t,"",K4)}function Ao(t,e,n){var r=BP.exec(t);return r?r[1]?r[1]===e:n(r[2]):!1}function q4(t){return F4.test(t)}function $P(){return!1}function H4(t){return t.startsWith("url(")}function OT(t){return Number.isInteger(Number(t))}function K4(t){return B4.test(t)}function Q4(){var t=qe("colors"),e=qe("spacing"),n=qe("blur"),r=qe("brightness"),i=qe("borderColor"),s=qe("borderRadius"),o=qe("borderSpacing"),a=qe("borderWidth"),l=qe("contrast"),c=qe("grayscale"),d=qe("hueRotate"),h=qe("invert"),p=qe("gap"),m=qe("gradientColorStops"),x=qe("gradientColorStopPositions"),v=qe("inset"),E=qe("margin"),y=qe("opacity"),w=qe("padding"),T=qe("saturate"),C=qe("scale"),D=qe("sepia"),j=qe("skew"),A=qe("space"),S=qe("translate"),I=function(){return["auto","contain","none"]},P=function(){return["auto","hidden","clip","visible","scroll"]},k=function(){return["auto",Ie,e]},V=function(){return[Ie,e]},N=function(){return["",Xn]},G=function(){return["auto",Ws,Ie]},K=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},q=function(){return["solid","dashed","dotted","double","none"]},J=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},M=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",Ie]},z=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[Ws,Gd]},B=function(){return[Ws,Ie]};return{cacheSize:500,theme:{colors:[tc],spacing:[Xn],blur:["none","",gi,Ie],brightness:W(),borderColor:[t],borderRadius:["none","","full",gi,Ie],borderSpacing:V(),borderWidth:N(),contrast:W(),grayscale:$(),hueRotate:B(),invert:$(),gap:V(),gradientColorStops:[t],gradientColorStopPositions:[W4,nv],inset:k(),margin:k(),opacity:W(),padding:V(),saturate:W(),scale:W(),sepia:$(),skew:B(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Ie]}],container:["container"],columns:[{columns:[gi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(K(),[Ie])}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ec]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ie]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",ec]}],"grid-cols":[{"grid-cols":[tc]}],"col-start-end":[{col:["auto",{span:["full",ec]},Ie]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[tc]}],"row-start-end":[{row:["auto",{span:[ec]},Ie]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ie]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(M())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(M(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(M(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ie,e]}],"min-w":[{"min-w":["min","max","fit",Ie,Xn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[gi]},gi,Ie]}],h:[{h:[Ie,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ie,Xn]}],"max-h":[{"max-h":[Ie,e,"min","max","fit"]}],"font-size":[{text:["base",gi,nv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Gd]}],"font-family":[{font:[tc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ie]}],"line-clamp":[{"line-clamp":["none",Ws,Gd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ie,Xn]}],"list-image":[{"list-image":["none",Ie]}],"list-style-type":[{list:["none","disc","decimal",Ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(q(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Xn]}],"underline-offset":[{"underline-offset":["auto",Ie,Xn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(K(),[U4])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(q(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(q())}],"outline-offset":[{"outline-offset":[Ie,Xn]}],"outline-w":[{outline:[Xn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Xn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",gi,G4]}],"shadow-color":[{shadow:[tc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":J()}],"bg-blend":[{"bg-blend":J()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",gi,Ie]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[T]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ie]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Ie]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ec,Ie]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ie]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Xn,Gd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Y4=j4(Q4);function De(...t){return Y4(MP(t))}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function LT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function UP(...t){return e=>{let n=!1;const r=t.map(i=>{const s=LT(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():LT(t[i],null)}}}}function rt(...t){return _.useCallback(UP(...t),t)}function X4(t,e){const n=_.createContext(e),r=s=>{const{children:o,...a}=s,l=_.useMemo(()=>a,Object.values(a));return f.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=_.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Po(t,e=[]){let n=[];function r(s,o){const a=_.createContext(o),l=n.length;n=[...n,o];const c=h=>{var y;const{scope:p,children:m,...x}=h,v=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,E=_.useMemo(()=>x,Object.values(x));return f.jsx(v.Provider,{value:E,children:m})};c.displayName=s+"Provider";function d(h,p){var v;const m=((v=p==null?void 0:p[t])==null?void 0:v[l])||a,x=_.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=n.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,J4(i,...e)]}function J4(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Fa(t){const e=eF(t),n=_.forwardRef((r,i)=>{const{children:s,...o}=r,a=_.Children.toArray(s),l=a.find(nF);if(l){const c=l.props.children,d=a.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return f.jsx(e,{...o,ref:i,children:_.isValidElement(c)?_.cloneElement(c,void 0,d):null})}return f.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var Z4=Fa("Slot");function eF(t){const e=_.forwardRef((n,r)=>{const{children:i,...s}=n;if(_.isValidElement(i)){const o=iF(i),a=rF(s,i.props);return i.type!==_.Fragment&&(a.ref=r?UP(r,o):o),_.cloneElement(i,a)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tF=Symbol("radix.slottable");function nF(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tF}function rF(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function iF(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function fw(t){const e=t+"CollectionProvider",[n,r]=Po(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:E,children:y}=v,w=ce.useRef(null),T=ce.useRef(new Map).current;return f.jsx(i,{scope:E,itemMap:T,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Fa(a),c=ce.forwardRef((v,E)=>{const{scope:y,children:w}=v,T=s(a,y),C=rt(E,T.collectionRef);return f.jsx(l,{ref:C,children:w})});c.displayName=a;const d=t+"CollectionItemSlot",h="data-radix-collection-item",p=Fa(d),m=ce.forwardRef((v,E)=>{const{scope:y,children:w,...T}=v,C=ce.useRef(null),D=rt(E,C),j=s(d,y);return ce.useEffect(()=>(j.itemMap.set(C,{ref:C,...T}),()=>void j.itemMap.delete(C))),f.jsx(p,{[h]:"",ref:D,children:w})});m.displayName=d;function x(v){const E=s(t+"CollectionConsumer",v);return ce.useCallback(()=>{const w=E.collectionRef.current;if(!w)return[];const T=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort((j,A)=>T.indexOf(j.ref.current)-T.indexOf(A.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},x,r]}var sF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=sF.reduce((t,e)=>{const n=Fa(`Primitive.${e}`),r=_.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function zP(t,e){t&&bo.flushSync(()=>t.dispatchEvent(e))}function Kn(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function oF(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var aF="DismissableLayer",rv="dismissableLayer.update",lF="dismissableLayer.pointerDownOutside",cF="dismissableLayer.focusOutside",FT,WP=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ep=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=_.useContext(WP),[d,h]=_.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),x=rt(e,A=>h(A)),v=Array.from(c.layers),[E]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(E),w=d?v.indexOf(d):-1,T=c.layersWithOutsidePointerEventsDisabled.size>0,C=w>=y,D=dF(A=>{const S=A.target,I=[...c.branches].some(P=>P.contains(S));!C||I||(i==null||i(A),o==null||o(A),A.defaultPrevented||a==null||a())},p),j=hF(A=>{const S=A.target;[...c.branches].some(P=>P.contains(S))||(s==null||s(A),o==null||o(A),A.defaultPrevented||a==null||a())},p);return oF(A=>{w===c.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&a&&(A.preventDefault(),a()))},p),_.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(FT=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),BT(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=FT)}},[d,p,n,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),BT())},[d,c]),_.useEffect(()=>{const A=()=>m({});return document.addEventListener(rv,A),()=>document.removeEventListener(rv,A)},[]),f.jsx(xe.div,{...l,ref:x,style:{pointerEvents:T?C?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,j.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,D.onPointerDownCapture)})});Ep.displayName=aF;var uF="DismissableLayerBranch",GP=_.forwardRef((t,e)=>{const n=_.useContext(WP),r=_.useRef(null),i=rt(e,r);return _.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),f.jsx(xe.div,{...t,ref:i})});GP.displayName=uF;function dF(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){qP(lF,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function hF(t,e=globalThis==null?void 0:globalThis.document){const n=Kn(t),r=_.useRef(!1);return _.useEffect(()=>{const i=s=>{s.target&&!r.current&&qP(cF,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BT(){const t=new CustomEvent(rv);document.dispatchEvent(t)}function qP(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?zP(i,s):i.dispatchEvent(s)}var fF=Ep,pF=GP,Ft=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},mF="Portal",bp=_.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=_.useState(!1);Ft(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?PL.createPortal(f.jsx(xe.div,{...r,ref:e}),o):null});bp.displayName=mF;function gF(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var ml=t=>{const{present:e,children:n}=t,r=yF(e),i=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),s=rt(r.ref,vF(i));return typeof n=="function"||r.isPresent?_.cloneElement(i,{ref:s}):null};ml.displayName="Presence";function yF(t){const[e,n]=_.useState(),r=_.useRef(null),i=_.useRef(t),s=_.useRef("none"),o=t?"mounted":"unmounted",[a,l]=gF(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=qd(r.current);s.current=a==="mounted"?c:"none"},[a]),Ft(()=>{const c=r.current,d=i.current;if(d!==t){const p=s.current,m=qd(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ft(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const v=qd(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=m=>{m.target===e&&(s.current=qd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function qd(t){return(t==null?void 0:t.animationName)||"none"}function vF(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var wF=w0[" useInsertionEffect ".trim().toString()]||Ft;function Ba({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=xF({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const d=_.useRef(t!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=_.useCallback(d=>{var h;if(a){const p=_F(d)?d(t):d;p!==t&&((h=o.current)==null||h.call(o,p))}else s(d)},[a,t,s,o]);return[l,c]}function xF({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),i=_.useRef(n),s=_.useRef(e);return wF(()=>{s.current=e},[e]),_.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function _F(t){return typeof t=="function"}var HP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),TF="VisuallyHidden",pw=_.forwardRef((t,e)=>f.jsx(xe.span,{...t,ref:e,style:{...HP,...t.style}}));pw.displayName=TF;var mw="ToastProvider",[gw,EF,bF]=fw("Toast"),[KP,GQ]=Po("Toast",[bF]),[SF,Sp]=KP(mw),QP=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=_.useState(null),[c,d]=_.useState(0),h=_.useRef(!1),p=_.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${mw}\`. Expected non-empty \`string\`.`),f.jsx(gw.Provider,{scope:e,children:f.jsx(SF,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>d(m=>m+1),[]),onToastRemove:_.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};QP.displayName=mw;var YP="ToastViewport",IF=["F8"],iv="toast.viewportPause",sv="toast.viewportResume",XP=_.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=IF,label:i="Notifications ({hotkey})",...s}=t,o=Sp(YP,n),a=EF(n),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),p=rt(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;_.useEffect(()=>{const E=y=>{var T;r.length!==0&&r.every(C=>y[C]||y.code===C)&&((T=h.current)==null||T.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),_.useEffect(()=>{const E=l.current,y=h.current;if(x&&E&&y){const w=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(iv);y.dispatchEvent(j),o.isClosePausedRef.current=!0}},T=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(sv);y.dispatchEvent(j),o.isClosePausedRef.current=!1}},C=j=>{!E.contains(j.relatedTarget)&&T()},D=()=>{E.contains(document.activeElement)||T()};return E.addEventListener("focusin",w),E.addEventListener("focusout",C),E.addEventListener("pointermove",w),E.addEventListener("pointerleave",D),window.addEventListener("blur",w),window.addEventListener("focus",T),()=>{E.removeEventListener("focusin",w),E.removeEventListener("focusout",C),E.removeEventListener("pointermove",w),E.removeEventListener("pointerleave",D),window.removeEventListener("blur",w),window.removeEventListener("focus",T)}}},[x,o.isClosePausedRef]);const v=_.useCallback(({tabbingDirection:E})=>{const w=a().map(T=>{const C=T.ref.current,D=[C,...FF(C)];return E==="forwards"?D:D.reverse()});return(E==="forwards"?w.reverse():w).flat()},[a]);return _.useEffect(()=>{const E=h.current;if(E){const y=w=>{var D,j,A;const T=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!T){const S=document.activeElement,I=w.shiftKey;if(w.target===E&&I){(D=c.current)==null||D.focus();return}const V=v({tabbingDirection:I?"backwards":"forwards"}),N=V.findIndex(G=>G===S);yg(V.slice(N+1))?w.preventDefault():I?(j=c.current)==null||j.focus():(A=d.current)==null||A.focus()}};return E.addEventListener("keydown",y),()=>E.removeEventListener("keydown",y)}},[a,v]),f.jsxs(pF,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&f.jsx(ov,{ref:c,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"forwards"});yg(E)}}),f.jsx(gw.Slot,{scope:n,children:f.jsx(xe.ol,{tabIndex:-1,...s,ref:p})}),x&&f.jsx(ov,{ref:d,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"backwards"});yg(E)}})]})});XP.displayName=YP;var JP="ToastFocusProxy",ov=_.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Sp(JP,n);return f.jsx(pw,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});ov.displayName=JP;var $u="Toast",AF="toast.swipeStart",PF="toast.swipeMove",CF="toast.swipeCancel",RF="toast.swipeEnd",ZP=_.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=Ba({prop:r,defaultProp:i??!0,onChange:s,caller:$u});return f.jsx(ml,{present:n||a,children:f.jsx(DF,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Kn(t.onPause),onResume:Kn(t.onResume),onSwipeStart:pe(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:pe(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});ZP.displayName=$u;var[kF,NF]=KP($u,{onClose(){}}),DF=_.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...x}=t,v=Sp($u,n),[E,y]=_.useState(null),w=rt(e,G=>y(G)),T=_.useRef(null),C=_.useRef(null),D=i||v.duration,j=_.useRef(0),A=_.useRef(D),S=_.useRef(0),{onToastAdd:I,onToastRemove:P}=v,k=Kn(()=>{var K;(E==null?void 0:E.contains(document.activeElement))&&((K=v.viewport)==null||K.focus()),o()}),V=_.useCallback(G=>{!G||G===1/0||(window.clearTimeout(S.current),j.current=new Date().getTime(),S.current=window.setTimeout(k,G))},[k]);_.useEffect(()=>{const G=v.viewport;if(G){const K=()=>{V(A.current),c==null||c()},q=()=>{const J=new Date().getTime()-j.current;A.current=A.current-J,window.clearTimeout(S.current),l==null||l()};return G.addEventListener(iv,q),G.addEventListener(sv,K),()=>{G.removeEventListener(iv,q),G.removeEventListener(sv,K)}}},[v.viewport,D,l,c,V]),_.useEffect(()=>{s&&!v.isClosePausedRef.current&&V(D)},[s,D,v.isClosePausedRef,V]),_.useEffect(()=>(I(),()=>P()),[I,P]);const N=_.useMemo(()=>E?oC(E):null,[E]);return v.viewport?f.jsxs(f.Fragment,{children:[N&&f.jsx(VF,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:N}),f.jsx(kF,{scope:n,onClose:k,children:bo.createPortal(f.jsx(gw.ItemSlot,{scope:n,children:f.jsx(fF,{asChild:!0,onEscapeKeyDown:pe(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||k(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,G=>{G.key==="Escape"&&(a==null||a(G.nativeEvent),G.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:pe(t.onPointerDown,G=>{G.button===0&&(T.current={x:G.clientX,y:G.clientY})}),onPointerMove:pe(t.onPointerMove,G=>{if(!T.current)return;const K=G.clientX-T.current.x,q=G.clientY-T.current.y,J=!!C.current,M=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=M?$(0,K):0,W=M?0:$(0,q),B=G.pointerType==="touch"?10:2,Y={x:z,y:W},se={originalEvent:G,delta:Y};J?(C.current=Y,Hd(PF,h,se,{discrete:!1})):$T(Y,v.swipeDirection,B)?(C.current=Y,Hd(AF,d,se,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(K)>B||Math.abs(q)>B)&&(T.current=null)}),onPointerUp:pe(t.onPointerUp,G=>{const K=C.current,q=G.target;if(q.hasPointerCapture(G.pointerId)&&q.releasePointerCapture(G.pointerId),C.current=null,T.current=null,K){const J=G.currentTarget,M={originalEvent:G,delta:K};$T(K,v.swipeDirection,v.swipeThreshold)?Hd(RF,m,M,{discrete:!0}):Hd(CF,p,M,{discrete:!0}),J.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),VF=t=>{const{__scopeToast:e,children:n,...r}=t,i=Sp($u,e),[s,o]=_.useState(!1),[a,l]=_.useState(!1);return OF(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(bp,{asChild:!0,children:f.jsx(pw,{...r,children:s&&f.jsxs(f.Fragment,{children:[i.label," ",n]})})})},jF="ToastTitle",eC=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(xe.div,{...r,ref:e})});eC.displayName=jF;var MF="ToastDescription",tC=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return f.jsx(xe.div,{...r,ref:e})});tC.displayName=MF;var nC="ToastAction",rC=_.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?f.jsx(sC,{altText:n,asChild:!0,children:f.jsx(yw,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${nC}\`. Expected non-empty \`string\`.`),null)});rC.displayName=nC;var iC="ToastClose",yw=_.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=NF(iC,n);return f.jsx(sC,{asChild:!0,children:f.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,i.onClose)})})});yw.displayName=iC;var sC=_.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return f.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function oC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),LF(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...oC(r))}}),e}function Hd(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?zP(i,s):i.dispatchEvent(s)}var $T=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function OF(t=()=>{}){const e=Kn(t);Ft(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function LF(t){return t.nodeType===t.ELEMENT_NODE}function FF(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var BF=QP,aC=XP,lC=ZP,cC=eC,uC=tC,dC=rC,hC=yw;const UT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,zT=MP,vw=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return zT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=n==null?void 0:n[c],h=s==null?void 0:s[c];if(d===null)return null;const p=UT(d)||UT(h);return i[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[h,p]=d;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(x=>{let[v,E]=x;return Array.isArray(E)?E.includes({...s,...a}[v]):{...s,...a}[v]===E})?[...c,h,p]:c},[]);return zT(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};var $F={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),je=(t,e)=>{const n=_.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>_.createElement("svg",{ref:c,...$F,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${UF(t)}`,...l},[...e.map(([d,h])=>_.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n},zF=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),fC=je("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),pC=je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),WF=je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),GF=je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),qF=je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),HF=je("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]),vg=je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),mC=je("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),av=je("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),KF=je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),gC=je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),QF=je("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),YF=je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),XF=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),JF=je("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),yC=je("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),ZF=je("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),e6=je("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),t6=je("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),n6=je("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),r6=je("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),gf=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),i6=je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),vC=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),s6=je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),o6=je("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),hu=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),a6=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),l6=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),wC=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),c6=BF,xC=ce.forwardRef(({className:t,...e},n)=>f.jsx(aC,{ref:n,className:De("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));xC.displayName=aC.displayName;const u6=vw("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_C=ce.forwardRef(({className:t,variant:e,...n},r)=>f.jsx(lC,{ref:r,className:De(u6({variant:e}),t),...n}));_C.displayName=lC.displayName;const d6=ce.forwardRef(({className:t,...e},n)=>f.jsx(dC,{ref:n,className:De("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));d6.displayName=dC.displayName;const TC=ce.forwardRef(({className:t,...e},n)=>f.jsx(hC,{ref:n,className:De("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:f.jsx(wC,{className:"h-4 w-4"})}));TC.displayName=hC.displayName;const EC=ce.forwardRef(({className:t,...e},n)=>f.jsx(cC,{ref:n,className:De("text-sm font-semibold",t),...e}));EC.displayName=cC.displayName;const bC=ce.forwardRef(({className:t,...e},n)=>f.jsx(uC,{ref:n,className:De("text-sm opacity-90",t),...e}));bC.displayName=uC.displayName;const h6=1;let wg=0;function f6(){return wg=(wg+1)%Number.MAX_VALUE,wg.toString()}const nn={state:{toasts:[]},listeners:[],getState:()=>nn.state,setState:t=>{typeof t=="function"?nn.state=t(nn.state):nn.state={...nn.state,...t},nn.listeners.forEach(e=>e(nn.state))},subscribe:t=>(nn.listeners.push(t),()=>{nn.listeners=nn.listeners.filter(e=>e!==t)})},p6=({...t})=>{const e=f6(),n=i=>nn.setState(s=>({...s,toasts:s.toasts.map(o=>o.id===e?{...o,...i}:o)})),r=()=>nn.setState(i=>({...i,toasts:i.toasts.filter(s=>s.id!==e)}));return nn.setState(i=>({...i,toasts:[{...t,id:e,dismiss:r},...i.toasts].slice(0,h6)})),{id:e,dismiss:r,update:n}};function ur(){const[t,e]=_.useState(nn.getState());return _.useEffect(()=>nn.subscribe(r=>{e(r)}),[]),_.useEffect(()=>{const n=[];return t.toasts.forEach(r=>{if(r.duration===1/0)return;const i=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(i)}),()=>{n.forEach(r=>clearTimeout(r))}},[t.toasts]),{toast:p6,toasts:t.toasts}}function m6(){const{toasts:t}=ur();return f.jsxs(c6,{children:[t.map(({id:e,title:n,description:r,action:i,...s})=>f.jsxs(_C,{...s,children:[f.jsxs("div",{className:"grid gap-1",children:[n&&f.jsx(EC,{children:n}),r&&f.jsx(bC,{children:r})]}),i,f.jsx(TC,{})]},e)),f.jsx(xC,{})]})}const g6="modulepreload",y6=function(t){return"/"+t},WT={},kr=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=y6(s),s in WT)return;WT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":g6,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},v6=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},IC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new x6;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const x=c<<6&192|h;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _6=function(t){const e=SC(t);return IC.encodeByteArray(e,!0)},yf=function(t){return _6(t).replace(/\./g,"")},T6=function(t){try{return IC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=()=>AC().__FIREBASE_DEFAULTS__,b6=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},S6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T6(t[1]);return e&&JSON.parse(e)},ww=()=>{try{return v6()||E6()||b6()||S6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I6=t=>{var e,n;return(n=(e=ww())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},A6=t=>{const e=I6(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PC=()=>{var t;return(t=ww())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[yf(JSON.stringify(n)),yf(JSON.stringify(o)),a].join(".")}const kc={};function R6(){const t={prod:[],emulator:[]};for(const e of Object.keys(kc))kc[e]?t.emulator.push(e):t.prod.push(e);return t}function k6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let GT=!1;function N6(t,e){if(typeof window>"u"||typeof document>"u"||!Ip(window.location.host)||kc[t]===e||kc[t]||GT)return;kc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=R6().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{GT=!0,o()},p}function d(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=k6(r),m=n("text"),x=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),E=document.getElementById(v)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;a(T),d(E,v);const C=c();l(w,y),T.append(w,x,E,C),document.body.appendChild(T)}s?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RC(){var t;const e=(t=ww())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kC(){return!RC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NC(){return!RC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function DC(){try{return typeof indexedDB=="object"}catch{return!1}}function D6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="FirebaseError";class gl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V6,Object.setPrototypeOf(this,gl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,VC.prototype.create)}}class VC{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?j6(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gl(i,a,r)}}function j6(t,e){return t.replace(M6,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const M6=/\{\$([^}]+)}/g;function Zi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(qT(s)&&qT(o)){if(!Zi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class fu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new P6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F6(e))try{this.getOrInitializeService({instanceIdentifier:Ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ns){return this.instances.has(e)}getOptions(e=Ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:L6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ns){return this.component?this.component.multipleInstances?e:Ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function L6(t){return t===Ns?void 0:t}function F6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new O6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const $6={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},U6=Re.INFO,z6={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},W6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=z6[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jC{constructor(e){this.name=e,this._logLevel=U6,this._logHandler=W6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const G6=(t,e)=>e.some(n=>t instanceof n);let HT,KT;function q6(){return HT||(HT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H6(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MC=new WeakMap,lv=new WeakMap,OC=new WeakMap,xg=new WeakMap,xw=new WeakMap;function K6(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(zi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MC.set(n,t)}).catch(()=>{}),xw.set(e,t),e}function Q6(t){if(lv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});lv.set(t,e)}let cv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Y6(t){cv=t(cv)}function X6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_g(this),e,...n);return OC.set(r,e.sort?e.sort():[e]),zi(r)}:H6().includes(t)?function(...e){return t.apply(_g(this),e),zi(MC.get(this))}:function(...e){return zi(t.apply(_g(this),e))}}function J6(t){return typeof t=="function"?X6(t):(t instanceof IDBTransaction&&Q6(t),G6(t,q6())?new Proxy(t,cv):t)}function zi(t){if(t instanceof IDBRequest)return K6(t);if(xg.has(t))return xg.get(t);const e=J6(t);return e!==t&&(xg.set(t,e),xw.set(e,t)),e}const _g=t=>xw.get(t);function Z6(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=zi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(zi(o.result),l.oldVersion,l.newVersion,zi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const e5=["get","getKey","getAll","getAllKeys","count"],t5=["put","add","delete","clear"],Tg=new Map;function QT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tg.get(e))return Tg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=t5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e5.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Tg.set(e,s),s}Y6(t=>({...t,get:(e,n,r)=>QT(e,n)||t.get(e,n,r),has:(e,n)=>!!QT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function r5(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uv="@firebase/app",YT="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new jC("@firebase/app"),i5="@firebase/app-compat",s5="@firebase/analytics-compat",o5="@firebase/analytics",a5="@firebase/app-check-compat",l5="@firebase/app-check",c5="@firebase/auth",u5="@firebase/auth-compat",d5="@firebase/database",h5="@firebase/data-connect",f5="@firebase/database-compat",p5="@firebase/functions",m5="@firebase/functions-compat",g5="@firebase/installations",y5="@firebase/installations-compat",v5="@firebase/messaging",w5="@firebase/messaging-compat",x5="@firebase/performance",_5="@firebase/performance-compat",T5="@firebase/remote-config",E5="@firebase/remote-config-compat",b5="@firebase/storage",S5="@firebase/storage-compat",I5="@firebase/firestore",A5="@firebase/ai",P5="@firebase/firestore-compat",C5="firebase",R5="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf="[DEFAULT]",k5={[uv]:"fire-core",[i5]:"fire-core-compat",[o5]:"fire-analytics",[s5]:"fire-analytics-compat",[l5]:"fire-app-check",[a5]:"fire-app-check-compat",[c5]:"fire-auth",[u5]:"fire-auth-compat",[d5]:"fire-rtdb",[h5]:"fire-data-connect",[f5]:"fire-rtdb-compat",[p5]:"fire-fn",[m5]:"fire-fn-compat",[g5]:"fire-iid",[y5]:"fire-iid-compat",[v5]:"fire-fcm",[w5]:"fire-fcm-compat",[x5]:"fire-perf",[_5]:"fire-perf-compat",[T5]:"fire-rc",[E5]:"fire-rc-compat",[b5]:"fire-gcs",[S5]:"fire-gcs-compat",[I5]:"fire-fst",[P5]:"fire-fst-compat",[A5]:"fire-vertex","fire-js":"fire-js",[C5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf=new Map,N5=new Map,dv=new Map;function XT(t,e){try{t.container.addComponent(e)}catch(n){Jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _f(t){const e=t.name;if(dv.has(e))return Jr.debug(`There were multiple attempts to register component ${e}.`),!1;dv.set(e,t);for(const n of xf.values())XT(n,t);for(const n of N5.values())XT(n,t);return!0}function _w(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function D5(t,e,n=wf){_w(t,e).clearInstance(n)}function V5(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wi=new VC("app","Firebase",j5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=R5;function Tw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:wf,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Wi.create("bad-app-name",{appName:String(i)});if(n||(n=PC()),!n)throw Wi.create("no-options");const s=xf.get(i);if(s){if(Zi(n,s.options)&&Zi(r,s.config))return s;throw Wi.create("duplicate-app",{appName:i})}const o=new B6(i);for(const l of dv.values())o.addComponent(l);const a=new M5(n,r,o);return xf.set(i,a),a}function L5(t=wf){const e=xf.get(t);if(!e&&t===wf&&PC())return Tw();if(!e)throw Wi.create("no-app",{appName:t});return e}function Sa(t,e,n){var r;let i=(r=k5[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jr.warn(a.join(" "));return}_f(new fu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="firebase-heartbeat-database",B5=1,pu="firebase-heartbeat-store";let Eg=null;function LC(){return Eg||(Eg=Z6(F5,B5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wi.create("idb-open",{originalErrorMessage:t.message})})),Eg}async function $5(t){try{const n=(await LC()).transaction(pu),r=await n.objectStore(pu).get(FC(t));return await n.done,r}catch(e){if(e instanceof gl)Jr.warn(e.message);else{const n=Wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jr.warn(n.message)}}}async function JT(t,e){try{const r=(await LC()).transaction(pu,"readwrite");await r.objectStore(pu).put(e,FC(t)),await r.done}catch(n){if(n instanceof gl)Jr.warn(n.message);else{const r=Wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jr.warn(r.message)}}}function FC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=1024,z5=30;class W5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new q5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ZT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>z5){const o=H5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Jr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ZT(),{heartbeatsToSend:r,unsentEntries:i}=G5(this._heartbeatsCache.heartbeats),s=yf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jr.warn(n),""}}}function ZT(){return new Date().toISOString().substring(0,10)}function G5(t,e=U5){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class q5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DC()?D6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return JT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return JT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eE(t){return yf(JSON.stringify({version:2,heartbeats:t})).length}function H5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(t){_f(new fu("platform-logger",e=>new n5(e),"PRIVATE")),_f(new fu("heartbeat",e=>new W5(e),"PRIVATE")),Sa(uv,YT,t),Sa(uv,YT,"esm2017"),Sa("fire-js","")}K5("");var Q5="firebase",Y5="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sa(Q5,Y5,"app");var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gi,BC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function I(){}I.prototype=S.prototype,A.D=S.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(P,k,V){for(var N=Array(arguments.length-2),G=2;G<arguments.length;G++)N[G-2]=arguments[G];return S.prototype[k].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,S,I){I||(I=0);var P=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)P[k]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(k=0;16>k;++k)P[k]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=A.g[0],I=A.g[1],k=A.g[2];var V=A.g[3],N=S+(V^I&(k^V))+P[0]+3614090360&4294967295;S=I+(N<<7&4294967295|N>>>25),N=V+(k^S&(I^k))+P[1]+3905402710&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(I^V&(S^I))+P[2]+606105819&4294967295,k=V+(N<<17&4294967295|N>>>15),N=I+(S^k&(V^S))+P[3]+3250441966&4294967295,I=k+(N<<22&4294967295|N>>>10),N=S+(V^I&(k^V))+P[4]+4118548399&4294967295,S=I+(N<<7&4294967295|N>>>25),N=V+(k^S&(I^k))+P[5]+1200080426&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(I^V&(S^I))+P[6]+2821735955&4294967295,k=V+(N<<17&4294967295|N>>>15),N=I+(S^k&(V^S))+P[7]+4249261313&4294967295,I=k+(N<<22&4294967295|N>>>10),N=S+(V^I&(k^V))+P[8]+1770035416&4294967295,S=I+(N<<7&4294967295|N>>>25),N=V+(k^S&(I^k))+P[9]+2336552879&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(I^V&(S^I))+P[10]+4294925233&4294967295,k=V+(N<<17&4294967295|N>>>15),N=I+(S^k&(V^S))+P[11]+2304563134&4294967295,I=k+(N<<22&4294967295|N>>>10),N=S+(V^I&(k^V))+P[12]+1804603682&4294967295,S=I+(N<<7&4294967295|N>>>25),N=V+(k^S&(I^k))+P[13]+4254626195&4294967295,V=S+(N<<12&4294967295|N>>>20),N=k+(I^V&(S^I))+P[14]+2792965006&4294967295,k=V+(N<<17&4294967295|N>>>15),N=I+(S^k&(V^S))+P[15]+1236535329&4294967295,I=k+(N<<22&4294967295|N>>>10),N=S+(k^V&(I^k))+P[1]+4129170786&4294967295,S=I+(N<<5&4294967295|N>>>27),N=V+(I^k&(S^I))+P[6]+3225465664&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^I&(V^S))+P[11]+643717713&4294967295,k=V+(N<<14&4294967295|N>>>18),N=I+(V^S&(k^V))+P[0]+3921069994&4294967295,I=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(I^k))+P[5]+3593408605&4294967295,S=I+(N<<5&4294967295|N>>>27),N=V+(I^k&(S^I))+P[10]+38016083&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^I&(V^S))+P[15]+3634488961&4294967295,k=V+(N<<14&4294967295|N>>>18),N=I+(V^S&(k^V))+P[4]+3889429448&4294967295,I=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(I^k))+P[9]+568446438&4294967295,S=I+(N<<5&4294967295|N>>>27),N=V+(I^k&(S^I))+P[14]+3275163606&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^I&(V^S))+P[3]+4107603335&4294967295,k=V+(N<<14&4294967295|N>>>18),N=I+(V^S&(k^V))+P[8]+1163531501&4294967295,I=k+(N<<20&4294967295|N>>>12),N=S+(k^V&(I^k))+P[13]+2850285829&4294967295,S=I+(N<<5&4294967295|N>>>27),N=V+(I^k&(S^I))+P[2]+4243563512&4294967295,V=S+(N<<9&4294967295|N>>>23),N=k+(S^I&(V^S))+P[7]+1735328473&4294967295,k=V+(N<<14&4294967295|N>>>18),N=I+(V^S&(k^V))+P[12]+2368359562&4294967295,I=k+(N<<20&4294967295|N>>>12),N=S+(I^k^V)+P[5]+4294588738&4294967295,S=I+(N<<4&4294967295|N>>>28),N=V+(S^I^k)+P[8]+2272392833&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^I)+P[11]+1839030562&4294967295,k=V+(N<<16&4294967295|N>>>16),N=I+(k^V^S)+P[14]+4259657740&4294967295,I=k+(N<<23&4294967295|N>>>9),N=S+(I^k^V)+P[1]+2763975236&4294967295,S=I+(N<<4&4294967295|N>>>28),N=V+(S^I^k)+P[4]+1272893353&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^I)+P[7]+4139469664&4294967295,k=V+(N<<16&4294967295|N>>>16),N=I+(k^V^S)+P[10]+3200236656&4294967295,I=k+(N<<23&4294967295|N>>>9),N=S+(I^k^V)+P[13]+681279174&4294967295,S=I+(N<<4&4294967295|N>>>28),N=V+(S^I^k)+P[0]+3936430074&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^I)+P[3]+3572445317&4294967295,k=V+(N<<16&4294967295|N>>>16),N=I+(k^V^S)+P[6]+76029189&4294967295,I=k+(N<<23&4294967295|N>>>9),N=S+(I^k^V)+P[9]+3654602809&4294967295,S=I+(N<<4&4294967295|N>>>28),N=V+(S^I^k)+P[12]+3873151461&4294967295,V=S+(N<<11&4294967295|N>>>21),N=k+(V^S^I)+P[15]+530742520&4294967295,k=V+(N<<16&4294967295|N>>>16),N=I+(k^V^S)+P[2]+3299628645&4294967295,I=k+(N<<23&4294967295|N>>>9),N=S+(k^(I|~V))+P[0]+4096336452&4294967295,S=I+(N<<6&4294967295|N>>>26),N=V+(I^(S|~k))+P[7]+1126891415&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~I))+P[14]+2878612391&4294967295,k=V+(N<<15&4294967295|N>>>17),N=I+(V^(k|~S))+P[5]+4237533241&4294967295,I=k+(N<<21&4294967295|N>>>11),N=S+(k^(I|~V))+P[12]+1700485571&4294967295,S=I+(N<<6&4294967295|N>>>26),N=V+(I^(S|~k))+P[3]+2399980690&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~I))+P[10]+4293915773&4294967295,k=V+(N<<15&4294967295|N>>>17),N=I+(V^(k|~S))+P[1]+2240044497&4294967295,I=k+(N<<21&4294967295|N>>>11),N=S+(k^(I|~V))+P[8]+1873313359&4294967295,S=I+(N<<6&4294967295|N>>>26),N=V+(I^(S|~k))+P[15]+4264355552&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~I))+P[6]+2734768916&4294967295,k=V+(N<<15&4294967295|N>>>17),N=I+(V^(k|~S))+P[13]+1309151649&4294967295,I=k+(N<<21&4294967295|N>>>11),N=S+(k^(I|~V))+P[4]+4149444226&4294967295,S=I+(N<<6&4294967295|N>>>26),N=V+(I^(S|~k))+P[11]+3174756917&4294967295,V=S+(N<<10&4294967295|N>>>22),N=k+(S^(V|~I))+P[2]+718787259&4294967295,k=V+(N<<15&4294967295|N>>>17),N=I+(V^(k|~S))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+V&4294967295}r.prototype.u=function(A,S){S===void 0&&(S=A.length);for(var I=S-this.blockSize,P=this.B,k=this.h,V=0;V<S;){if(k==0)for(;V<=I;)i(this,A,V),V+=this.blockSize;if(typeof A=="string"){for(;V<S;)if(P[k++]=A.charCodeAt(V++),k==this.blockSize){i(this,P),k=0;break}}else for(;V<S;)if(P[k++]=A[V++],k==this.blockSize){i(this,P),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;var I=8*this.o;for(S=A.length-8;S<A.length;++S)A[S]=I&255,I/=256;for(this.u(A),A=Array(16),S=I=0;4>S;++S)for(var P=0;32>P;P+=8)A[I++]=this.g[S]>>>P&255;return A};function s(A,S){var I=a;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=S(A)}function o(A,S){this.h=S;for(var I=[],P=!0,k=A.length-1;0<=k;k--){var V=A[k]|0;P&&V==S||(I[k]=V,P=!1)}this.g=I}var a={};function l(A){return-128<=A&&128>A?s(A,function(S){return new o([S|0],0>S?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return E(c(-A));for(var S=[],I=1,P=0;A>=I;P++)S[P]=A/I|0,I*=4294967296;return new o(S,0)}function d(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return E(d(A.substring(1),S));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(S,8)),P=h,k=0;k<A.length;k+=8){var V=Math.min(8,A.length-k),N=parseInt(A.substring(k,k+V),S);8>V?(V=c(Math.pow(S,V)),P=P.j(V).add(c(N))):(P=P.j(I),P=P.add(c(N)))}return P}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();for(var A=0,S=1,I=0;I<this.g.length;I++){var P=this.i(I);A+=(0<=P?P:4294967296+P)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(x(this))return"0";if(v(this))return"-"+E(this).toString(A);for(var S=c(Math.pow(A,6)),I=this,P="";;){var k=C(I,S).g;I=y(I,k.j(S));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=k,x(I))return V+P;for(;6>V.length;)V="0"+V;P=V+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function x(A){if(A.h!=0)return!1;for(var S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function v(A){return A.h==-1}t.l=function(A){return A=y(this,A),v(A)?-1:x(A)?0:1};function E(A){for(var S=A.g.length,I=[],P=0;P<S;P++)I[P]=~A.g[P];return new o(I,~A.h).add(p)}t.abs=function(){return v(this)?E(this):this},t.add=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],P=0,k=0;k<=S;k++){var V=P+(this.i(k)&65535)+(A.i(k)&65535),N=(V>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);P=N>>>16,V&=65535,N&=65535,I[k]=N<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(A,S){return A.add(E(S))}t.j=function(A){if(x(this)||x(A))return h;if(v(this))return v(A)?E(this).j(E(A)):E(E(this).j(A));if(v(A))return E(this.j(E(A)));if(0>this.l(m)&&0>A.l(m))return c(this.m()*A.m());for(var S=this.g.length+A.g.length,I=[],P=0;P<2*S;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<A.g.length;k++){var V=this.i(P)>>>16,N=this.i(P)&65535,G=A.i(k)>>>16,K=A.i(k)&65535;I[2*P+2*k]+=N*K,w(I,2*P+2*k),I[2*P+2*k+1]+=V*K,w(I,2*P+2*k+1),I[2*P+2*k+1]+=N*G,w(I,2*P+2*k+1),I[2*P+2*k+2]+=V*G,w(I,2*P+2*k+2)}for(P=0;P<S;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=S;P<2*S;P++)I[P]=0;return new o(I,0)};function w(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function T(A,S){this.g=A,this.h=S}function C(A,S){if(x(S))throw Error("division by zero");if(x(A))return new T(h,h);if(v(A))return S=C(E(A),S),new T(E(S.g),E(S.h));if(v(S))return S=C(A,E(S)),new T(E(S.g),S.h);if(30<A.g.length){if(v(A)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var I=p,P=S;0>=P.l(A);)I=D(I),P=D(P);var k=j(I,1),V=j(P,1);for(P=j(P,2),I=j(I,2);!x(P);){var N=V.add(P);0>=N.l(A)&&(k=k.add(I),V=N),P=j(P,1),I=j(I,1)}return S=y(A,k.j(S)),new T(k,S)}for(k=h;0<=A.l(S);){for(I=Math.max(1,Math.floor(A.m()/S.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),V=c(I),N=V.j(S);v(N)||0<N.l(A);)I-=P,V=c(I),N=V.j(S);x(V)&&(V=p),k=k.add(V),A=y(A,N)}return new T(k,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)&A.i(P);return new o(I,this.h&A.h)},t.or=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)|A.i(P);return new o(I,this.h|A.h)},t.xor=function(A){for(var S=Math.max(this.g.length,A.g.length),I=[],P=0;P<S;P++)I[P]=this.i(P)^A.i(P);return new o(I,this.h^A.h)};function D(A){for(var S=A.g.length+1,I=[],P=0;P<S;P++)I[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(I,A.h)}function j(A,S){var I=S>>5;S%=32;for(var P=A.g.length-I,k=[],V=0;V<P;V++)k[V]=0<S?A.i(V+I)>>>S|A.i(V+I+1)<<32-S:A.i(V+I);return new o(k,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Gi=o}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $C,mc,UC,Sh,hv,zC,WC,GC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,b){return u==Array.prototype||u==Object.prototype||(u[g]=b.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var b=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var O=u[R];if(!(O in b))break e;b=b[O]}u=u[u.length-1],R=b[u],g=g(R),g!=R&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}function s(u,g){u instanceof String&&(u+="");var b=0,R=!1,O={next:function(){if(!R&&b<u.length){var U=b++;return{value:g(U,u[U]),done:!1}}return R=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,b){return u.call.apply(u.bind,arguments)}function h(u,g,b){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,R),u.apply(g,O)}}return function(){return u.apply(g,arguments)}}function p(u,g,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function x(u,g){function b(){}b.prototype=g.prototype,u.aa=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Qb=function(R,O,U){for(var ne=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)ne[$e-2]=arguments[$e];return g.prototype[O].apply(R,ne)}}function v(u){const g=u.length;if(0<g){const b=Array(g);for(let R=0;R<g;R++)b[R]=u[R];return b}return[]}function E(u,g){for(let b=1;b<arguments.length;b++){const R=arguments[b];if(l(R)){const O=u.length||0,U=R.length||0;u.length=O+U;for(let ne=0;ne<U;ne++)u[O+ne]=R[ne]}else u.push(R)}}class y{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function C(u){return C[" "](u),u}C[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function j(u,g,b){for(const R in u)g.call(b,u[R],R,u)}function A(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function S(u){const g={};for(const b in u)g[b]=u[b];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,g){let b,R;for(let O=1;O<arguments.length;O++){R=arguments[O];for(b in R)u[b]=R[b];for(let U=0;U<I.length;U++)b=I[U],Object.prototype.hasOwnProperty.call(R,b)&&(u[b]=R[b])}}function k(u){var g=1;u=u.split(":");const b=[];for(;0<g&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function V(u){a.setTimeout(()=>{throw u},0)}function N(){var u=$;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class G{constructor(){this.h=this.g=null}add(g,b){const R=K.get();R.set(g,b),this.h?this.h.next=R:this.g=R,this.h=R}}var K=new y(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let J,M=!1,$=new G,z=()=>{const u=a.Promise.resolve(void 0);J=()=>{u.then(W)}};var W=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(b){V(b)}var g=K;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}M=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return u}();function Pe(u,g){if(Y.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var b=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(D){e:{try{C(g.nodeName);var O=!0;break e}catch{}O=!1}O||(g=null)}}else b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:le[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,Y);var le={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),me=0;function we(u,g,b,R,O){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!R,this.ha=O,this.key=++me,this.da=this.fa=!1}function ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fe(u){this.src=u,this.g={},this.h=0}fe.prototype.add=function(u,g,b,R,O){var U=u.toString();u=this.g[U],u||(u=this.g[U]=[],this.h++);var ne=_t(u,g,R,O);return-1<ne?(g=u[ne],b||(g.fa=!1)):(g=new we(g,this.src,U,!!R,O),g.fa=b,u.push(g)),g};function _e(u,g){var b=g.type;if(b in u.g){var R=u.g[b],O=Array.prototype.indexOf.call(R,g,void 0),U;(U=0<=O)&&Array.prototype.splice.call(R,O,1),U&&(ve(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function _t(u,g,b,R){for(var O=0;O<u.length;++O){var U=u[O];if(!U.da&&U.listener==g&&U.capture==!!b&&U.ha==R)return O}return-1}var Bt="closure_lm_"+(1e6*Math.random()|0),Vr={};function ui(u,g,b,R,O){if(R&&R.once)return Es(u,g,b,R,O);if(Array.isArray(g)){for(var U=0;U<g.length;U++)ui(u,g[U],b,R,O);return null}return b=Am(b),u&&u[Z]?u.K(g,b,c(R)?!!R.capture:!!R,O):di(u,g,b,!1,R,O)}function di(u,g,b,R,O,U){if(!g)throw Error("Invalid event type");var ne=c(O)?!!O.capture:!!O,$e=Sm(u);if($e||(u[Bt]=$e=new fe(u)),b=$e.add(g,b,R,ne,U),b.proxy)return b;if(R=Em(),b.proxy=R,R.src=u,R.listener=b,u.addEventListener)se||(O=ne),O===void 0&&(O=!1),u.addEventListener(g.toString(),R,O);else if(u.attachEvent)u.attachEvent(__(g.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Em(){function u(b){return g.call(u.src,u.listener,b)}const g=Cj;return u}function Es(u,g,b,R,O){if(Array.isArray(g)){for(var U=0;U<g.length;U++)Es(u,g[U],b,R,O);return null}return b=Am(b),u&&u[Z]?u.L(g,b,c(R)?!!R.capture:!!R,O):di(u,g,b,!0,R,O)}function x_(u,g,b,R,O){if(Array.isArray(g))for(var U=0;U<g.length;U++)x_(u,g[U],b,R,O);else R=c(R)?!!R.capture:!!R,b=Am(b),u&&u[Z]?(u=u.i,g=String(g).toString(),g in u.g&&(U=u.g[g],b=_t(U,b,R,O),-1<b&&(ve(U[b]),Array.prototype.splice.call(U,b,1),U.length==0&&(delete u.g[g],u.h--)))):u&&(u=Sm(u))&&(g=u.g[g.toString()],u=-1,g&&(u=_t(g,b,R,O)),(b=-1<u?g[u]:null)&&bm(b))}function bm(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Z])_e(g.i,u);else{var b=u.type,R=u.proxy;g.removeEventListener?g.removeEventListener(b,R,u.capture):g.detachEvent?g.detachEvent(__(b),R):g.addListener&&g.removeListener&&g.removeListener(R),(b=Sm(g))?(_e(b,u),b.h==0&&(b.src=null,g[Bt]=null)):ve(u)}}}function __(u){return u in Vr?Vr[u]:Vr[u]="on"+u}function Cj(u,g){if(u.da)u=!0;else{g=new Pe(g,this);var b=u.listener,R=u.ha||u.src;u.fa&&bm(u),u=b.call(R,g)}return u}function Sm(u){return u=u[Bt],u instanceof fe?u:null}var Im="__closure_events_fn_"+(1e9*Math.random()>>>0);function Am(u){return typeof u=="function"?u:(u[Im]||(u[Im]=function(g){return u.handleEvent(g)}),u[Im])}function $t(){B.call(this),this.i=new fe(this),this.M=this,this.F=null}x($t,B),$t.prototype[Z]=!0,$t.prototype.removeEventListener=function(u,g,b,R){x_(this,u,g,b,R)};function en(u,g){var b,R=u.F;if(R)for(b=[];R;R=R.F)b.push(R);if(u=u.M,R=g.type||g,typeof g=="string")g=new Y(g,u);else if(g instanceof Y)g.target=g.target||u;else{var O=g;g=new Y(R,u),P(g,O)}if(O=!0,b)for(var U=b.length-1;0<=U;U--){var ne=g.g=b[U];O=hd(ne,R,!0,g)&&O}if(ne=g.g=u,O=hd(ne,R,!0,g)&&O,O=hd(ne,R,!1,g)&&O,b)for(U=0;U<b.length;U++)ne=g.g=b[U],O=hd(ne,R,!1,g)&&O}$t.prototype.N=function(){if($t.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var b=u.g[g],R=0;R<b.length;R++)ve(b[R]);delete u.g[g],u.h--}}this.F=null},$t.prototype.K=function(u,g,b,R){return this.i.add(String(u),g,!1,b,R)},$t.prototype.L=function(u,g,b,R){return this.i.add(String(u),g,!0,b,R)};function hd(u,g,b,R){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var O=!0,U=0;U<g.length;++U){var ne=g[U];if(ne&&!ne.da&&ne.capture==b){var $e=ne.listener,Dt=ne.ha||ne.src;ne.fa&&_e(u.i,ne),O=$e.call(Dt,R)!==!1&&O}}return O&&!R.defaultPrevented}function T_(u,g,b){if(typeof u=="function")b&&(u=p(u,b));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function E_(u){u.g=T_(()=>{u.g=null,u.i&&(u.i=!1,E_(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Rj extends B{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:E_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dl(u){B.call(this),this.h=u,this.g={}}x(Dl,B);var b_=[];function S_(u){j(u.g,function(g,b){this.g.hasOwnProperty(b)&&bm(g)},u),u.g={}}Dl.prototype.N=function(){Dl.aa.N.call(this),S_(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pm=a.JSON.stringify,kj=a.JSON.parse,Nj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Cm(){}Cm.prototype.h=null;function I_(u){return u.h||(u.h=u.i())}function A_(){}var Vl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rm(){Y.call(this,"d")}x(Rm,Y);function km(){Y.call(this,"c")}x(km,Y);var bs={},P_=null;function fd(){return P_=P_||new $t}bs.La="serverreachability";function C_(u){Y.call(this,bs.La,u)}x(C_,Y);function jl(u){const g=fd();en(g,new C_(g))}bs.STAT_EVENT="statevent";function R_(u,g){Y.call(this,bs.STAT_EVENT,u),this.stat=g}x(R_,Y);function tn(u){const g=fd();en(g,new R_(g,u))}bs.Ma="timingevent";function k_(u,g){Y.call(this,bs.Ma,u),this.size=g}x(k_,Y);function Ml(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function Ol(){this.g=!0}Ol.prototype.xa=function(){this.g=!1};function Dj(u,g,b,R,O,U){u.info(function(){if(u.g)if(U)for(var ne="",$e=U.split("&"),Dt=0;Dt<$e.length;Dt++){var Ve=$e[Dt].split("=");if(1<Ve.length){var Ut=Ve[0];Ve=Ve[1];var zt=Ut.split("_");ne=2<=zt.length&&zt[1]=="type"?ne+(Ut+"="+Ve+"&"):ne+(Ut+"=redacted&")}}else ne=null;else ne=U;return"XMLHTTP REQ ("+R+") [attempt "+O+"]: "+g+`
`+b+`
`+ne})}function Vj(u,g,b,R,O,U,ne){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+O+"]: "+g+`
`+b+`
`+U+" "+ne})}function Oo(u,g,b,R){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Mj(u,b)+(R?" "+R:"")})}function jj(u,g){u.info(function(){return"TIMEOUT: "+g})}Ol.prototype.info=function(){};function Mj(u,g){if(!u.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(u=0;u<b.length;u++)if(Array.isArray(b[u])){var R=b[u];if(!(2>R.length)){var O=R[1];if(Array.isArray(O)&&!(1>O.length)){var U=O[0];if(U!="noop"&&U!="stop"&&U!="close")for(var ne=1;ne<O.length;ne++)O[ne]=""}}}}return Pm(b)}catch{return g}}var pd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},N_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nm;function md(){}x(md,Cm),md.prototype.g=function(){return new XMLHttpRequest},md.prototype.i=function(){return{}},Nm=new md;function hi(u,g,b,R){this.j=u,this.i=g,this.l=b,this.R=R||1,this.U=new Dl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new D_}function D_(){this.i=null,this.g="",this.h=!1}var V_={},Dm={};function Vm(u,g,b){u.L=1,u.v=wd(jr(g)),u.m=b,u.P=!0,j_(u,null)}function j_(u,g){u.F=Date.now(),gd(u),u.A=jr(u.v);var b=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Q_(b.i,"t",R),u.C=0,b=u.j.J,u.h=new D_,u.g=f1(u.j,b?g:null,!u.m),0<u.O&&(u.M=new Rj(p(u.Y,u,u.g),u.O)),g=u.U,b=u.g,R=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(b_[0]=O.toString()),O=b_);for(var U=0;U<O.length;U++){var ne=ui(b,O[U],R||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),jl(),Dj(u.i,u.u,u.A,u.l,u.R,u.m)}hi.prototype.ca=function(u){u=u.target;const g=this.M;g&&Mr(u)==3?g.j():this.Y(u)},hi.prototype.Y=function(u){try{if(u==this.g)e:{const zt=Mr(this.g);var g=this.g.Ba();const Bo=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||n1(this.g)))){this.J||zt!=4||g==7||(g==8||0>=Bo?jl(3):jl(2)),jm(this);var b=this.g.Z();this.X=b;t:if(M_(this)){var R=n1(this.g);u="";var O=R.length,U=Mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ss(this),Ll(this);var ne="";break t}this.h.i=new a.TextDecoder}for(g=0;g<O;g++)this.h.h=!0,u+=this.h.i.decode(R[g],{stream:!(U&&g==O-1)});R.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=b==200,Vj(this.i,this.u,this.A,this.l,this.R,zt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Dt=this.g;if(($e=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w($e)){var Ve=$e;break t}}Ve=null}if(b=Ve)Oo(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mm(this,b);else{this.o=!1,this.s=3,tn(12),Ss(this),Ll(this);break e}}if(this.P){b=!0;let Qn;for(;!this.J&&this.C<ne.length;)if(Qn=Oj(this,ne),Qn==Dm){zt==4&&(this.s=4,tn(14),b=!1),Oo(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==V_){this.s=4,tn(15),Oo(this.i,this.l,ne,"[Invalid Chunk]"),b=!1;break}else Oo(this.i,this.l,Qn,null),Mm(this,Qn);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||ne.length!=0||this.h.h||(this.s=1,tn(16),b=!1),this.o=this.o&&b,!b)Oo(this.i,this.l,ne,"[Invalid Chunked Response]"),Ss(this),Ll(this);else if(0<ne.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Um(Ut),Ut.M=!0,tn(11))}}else Oo(this.i,this.l,ne,null),Mm(this,ne);zt==4&&Ss(this),this.o&&!this.J&&(zt==4?c1(this.j,this):(this.o=!1,gd(this)))}else eM(this.g),b==400&&0<ne.indexOf("Unknown SID")?(this.s=3,tn(12)):(this.s=0,tn(13)),Ss(this),Ll(this)}}}catch{}finally{}};function M_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Oj(u,g){var b=u.C,R=g.indexOf(`
`,b);return R==-1?Dm:(b=Number(g.substring(b,R)),isNaN(b)?V_:(R+=1,R+b>g.length?Dm:(g=g.slice(R,R+b),u.C=R+b,g)))}hi.prototype.cancel=function(){this.J=!0,Ss(this)};function gd(u){u.S=Date.now()+u.I,O_(u,u.I)}function O_(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ml(p(u.ba,u),g)}function jm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}hi.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(jj(this.i,this.A),this.L!=2&&(jl(),tn(17)),Ss(this),this.s=2,Ll(this)):O_(this,this.S-u)};function Ll(u){u.j.G==0||u.J||c1(u.j,u)}function Ss(u){jm(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,S_(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function Mm(u,g){try{var b=u.j;if(b.G!=0&&(b.g==u||Om(b.h,u))){if(!u.K&&Om(b.h,u)&&b.G==3){try{var R=b.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var O=R;if(O[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<u.F)Sd(b),Ed(b);else break e;$m(b),tn(18)}}else b.za=O[1],0<b.za-b.T&&37500>O[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ml(p(b.Za,b),6e3));if(1>=B_(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else As(b,11)}else if((u.K||b.g==u)&&Sd(b),!w(g))for(O=b.Da.g.parse(g),g=0;g<O.length;g++){let Ve=O[g];if(b.T=Ve[0],Ve=Ve[1],b.G==2)if(Ve[0]=="c"){b.K=Ve[1],b.ia=Ve[2];const Ut=Ve[3];Ut!=null&&(b.la=Ut,b.j.info("VER="+b.la));const zt=Ve[4];zt!=null&&(b.Aa=zt,b.j.info("SVER="+b.Aa));const Bo=Ve[5];Bo!=null&&typeof Bo=="number"&&0<Bo&&(R=1.5*Bo,b.L=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const Qn=u.g;if(Qn){const Ad=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ad){var U=R.h;U.g||Ad.indexOf("spdy")==-1&&Ad.indexOf("quic")==-1&&Ad.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Lm(U,U.h),U.h=null))}if(R.D){const zm=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;zm&&(R.ya=zm,Ge(R.I,R.D,zm))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-u.F,b.j.info("Handshake RTT: "+b.R+"ms")),R=b;var ne=u;if(R.qa=h1(R,R.J?R.ia:null,R.W),ne.K){$_(R.h,ne);var $e=ne,Dt=R.L;Dt&&($e.I=Dt),$e.B&&(jm($e),gd($e)),R.g=ne}else a1(R);0<b.i.length&&bd(b)}else Ve[0]!="stop"&&Ve[0]!="close"||As(b,7);else b.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?As(b,7):Bm(b):Ve[0]!="noop"&&b.l&&b.l.ta(Ve),b.v=0)}}jl(4)}catch{}}var Lj=class{constructor(u,g){this.g=u,this.map=g}};function L_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function F_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function B_(u){return u.h?1:u.g?u.g.size:0}function Om(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Lm(u,g){u.g?u.g.add(g):u.h=g}function $_(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}L_.prototype.cancel=function(){if(this.i=U_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function U_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.D);return g}return v(u.i)}function Fj(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],b=u.length,R=0;R<b;R++)g.push(u[R]);return g}g=[],b=0;for(R in u)g[b++]=u[R];return g}function Bj(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var b=0;b<u;b++)g.push(b);return g}g=[],b=0;for(const R in u)g[b++]=R;return g}}}function z_(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var b=Bj(u),R=Fj(u),O=R.length,U=0;U<O;U++)g.call(void 0,R[U],b&&b[U],u)}var W_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $j(u,g){if(u){u=u.split("&");for(var b=0;b<u.length;b++){var R=u[b].indexOf("="),O=null;if(0<=R){var U=u[b].substring(0,R);O=u[b].substring(R+1)}else U=u[b];g(U,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Is(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Is){this.h=u.h,yd(this,u.j),this.o=u.o,this.g=u.g,vd(this,u.s),this.l=u.l;var g=u.i,b=new $l;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),G_(this,b),this.m=u.m}else u&&(g=String(u).match(W_))?(this.h=!1,yd(this,g[1]||"",!0),this.o=Fl(g[2]||""),this.g=Fl(g[3]||"",!0),vd(this,g[4]),this.l=Fl(g[5]||"",!0),G_(this,g[6]||"",!0),this.m=Fl(g[7]||"")):(this.h=!1,this.i=new $l(null,this.h))}Is.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Bl(g,q_,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Bl(g,q_,!0),"@"),u.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&u.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Bl(b,b.charAt(0)=="/"?Wj:zj,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Bl(b,qj)),u.join("")};function jr(u){return new Is(u)}function yd(u,g,b){u.j=b?Fl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function vd(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function G_(u,g,b){g instanceof $l?(u.i=g,Hj(u.i,u.h)):(b||(g=Bl(g,Gj)),u.i=new $l(g,u.h))}function Ge(u,g,b){u.i.set(g,b)}function wd(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bl(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,Uj),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Uj(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var q_=/[#\/\?@]/g,zj=/[#\?:]/g,Wj=/[#\?]/g,Gj=/[#\?@]/g,qj=/#/g;function $l(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function fi(u){u.g||(u.g=new Map,u.h=0,u.i&&$j(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=$l.prototype,t.add=function(u,g){fi(this),this.i=null,u=Lo(this,u);var b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function H_(u,g){fi(u),g=Lo(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function K_(u,g){return fi(u),g=Lo(u,g),u.g.has(g)}t.forEach=function(u,g){fi(this),this.g.forEach(function(b,R){b.forEach(function(O){u.call(g,O,R,this)},this)},this)},t.na=function(){fi(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let R=0;R<g.length;R++){const O=u[R];for(let U=0;U<O.length;U++)b.push(g[R])}return b},t.V=function(u){fi(this);let g=[];if(typeof u=="string")K_(this,u)&&(g=g.concat(this.g.get(Lo(this,u))));else{u=Array.from(this.g.values());for(let b=0;b<u.length;b++)g=g.concat(u[b])}return g},t.set=function(u,g){return fi(this),this.i=null,u=Lo(this,u),K_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Q_(u,g,b){H_(u,g),0<b.length&&(u.i=null,u.g.set(Lo(u,g),v(b)),u.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var R=g[b];const U=encodeURIComponent(String(R)),ne=this.V(R);for(R=0;R<ne.length;R++){var O=U;ne[R]!==""&&(O+="="+encodeURIComponent(String(ne[R]))),u.push(O)}}return this.i=u.join("&")};function Lo(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Hj(u,g){g&&!u.j&&(fi(u),u.i=null,u.g.forEach(function(b,R){var O=R.toLowerCase();R!=O&&(H_(this,R),Q_(this,O,b))},u)),u.j=g}function Kj(u,g){const b=new Ol;if(a.Image){const R=new Image;R.onload=m(pi,b,"TestLoadImage: loaded",!0,g,R),R.onerror=m(pi,b,"TestLoadImage: error",!1,g,R),R.onabort=m(pi,b,"TestLoadImage: abort",!1,g,R),R.ontimeout=m(pi,b,"TestLoadImage: timeout",!1,g,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else g(!1)}function Qj(u,g){const b=new Ol,R=new AbortController,O=setTimeout(()=>{R.abort(),pi(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:R.signal}).then(U=>{clearTimeout(O),U.ok?pi(b,"TestPingServer: ok",!0,g):pi(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),pi(b,"TestPingServer: error",!1,g)})}function pi(u,g,b,R,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),R(b)}catch{}}function Yj(){this.g=new Nj}function Xj(u,g,b){const R=b||"";try{z_(u,function(O,U){let ne=O;c(O)&&(ne=Pm(O)),g.push(R+U+"="+encodeURIComponent(ne))})}catch(O){throw g.push(R+"type="+encodeURIComponent("_badmap")),O}}function xd(u){this.l=u.Ub||null,this.j=u.eb||!1}x(xd,Cm),xd.prototype.g=function(){return new _d(this.l,this.j)},xd.prototype.i=function(u){return function(){return u}}({});function _d(u,g){$t.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(_d,$t),t=_d.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,zl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ul(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Y_(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Y_(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ul(this):zl(this),this.readyState==3&&Y_(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ul(this))},t.Qa=function(u){this.g&&(this.response=u,Ul(this))},t.ga=function(){this.g&&Ul(this)};function Ul(u){u.readyState=4,u.l=null,u.j=null,u.v=null,zl(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function zl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_d.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function X_(u){let g="";return j(u,function(b,R){g+=R,g+=":",g+=b,g+=`\r
`}),g}function Fm(u,g,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=X_(b),typeof u=="string"?b!=null&&encodeURIComponent(String(b)):Ge(u,g,b))}function ut(u){$t.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ut,$t);var Jj=/^https?$/i,Zj=["POST","PUT"];t=ut.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nm.g(),this.v=this.o?I_(this.o):I_(Nm),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(U){J_(this,U);return}if(u=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var O in R)b.set(O,R[O]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const U of R.keys())b.set(U,R.get(U));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(U=>U.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Zj,g,void 0))||R||O||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ne]of b)this.g.setRequestHeader(U,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t1(this),this.u=!0,this.g.send(u),this.u=!1}catch(U){J_(this,U)}};function J_(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,Z_(u),Td(u)}function Z_(u){u.A||(u.A=!0,en(u,"complete"),en(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,en(this,"complete"),en(this,"abort"),Td(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Td(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?e1(this):this.bb())},t.bb=function(){e1(this)};function e1(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Mr(u)!=4||u.Z()!=2)){if(u.u&&Mr(u)==4)T_(u.Ea,0,u);else if(en(u,"readystatechange"),Mr(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var R;if(R=ne===0){var O=String(u.D).match(W_)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),R=!Jj.test(O?O.toLowerCase():"")}b=R}if(b)en(u,"complete"),en(u,"success");else{u.m=6;try{var U=2<Mr(u)?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.Z()+"]",Z_(u)}}finally{Td(u)}}}}function Td(u,g){if(u.g){t1(u);const b=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||en(u,"ready");try{b.onreadystatechange=R}catch{}}}function t1(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Mr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Mr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),kj(g)}};function n1(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function eM(u){const g={};u=(u.g&&2<=Mr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(w(u[R]))continue;var b=k(u[R]);const O=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const U=g[O]||[];g[O]=U,U.push(b)}A(g,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wl(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function r1(u){this.Aa=0,this.i=[],this.j=new Ol,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wl("baseRetryDelayMs",5e3,u),this.cb=Wl("retryDelaySeedMs",1e4,u),this.Wa=Wl("forwardChannelMaxRetries",2,u),this.wa=Wl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new L_(u&&u.concurrentRequestLimit),this.Da=new Yj,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=r1.prototype,t.la=8,t.G=1,t.connect=function(u,g,b,R){tn(0),this.W=u,this.H=g||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.I=h1(this,null,this.W),bd(this)};function Bm(u){if(i1(u),u.G==3){var g=u.U++,b=jr(u.I);if(Ge(b,"SID",u.K),Ge(b,"RID",g),Ge(b,"TYPE","terminate"),Gl(u,b),g=new hi(u,u.j,g),g.L=2,g.v=wd(jr(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=f1(g.j,null),g.g.ea(g.v)),g.F=Date.now(),gd(g)}d1(u)}function Ed(u){u.g&&(Um(u),u.g.cancel(),u.g=null)}function i1(u){Ed(u),u.u&&(a.clearTimeout(u.u),u.u=null),Sd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bd(u){if(!F_(u.h)&&!u.s){u.s=!0;var g=u.Ga;J||z(),M||(J(),M=!0),$.add(g,u),u.B=0}}function tM(u,g){return B_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ml(p(u.Ga,u,g),u1(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new hi(this,this.j,u);let U=this.o;if(this.S&&(U?(U=S(U),P(U,this.S)):U=this.S),this.m!==null||this.O||(O.H=U,U=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=o1(this,O,g),b=jr(this.I),Ge(b,"RID",u),Ge(b,"CVER",22),this.D&&Ge(b,"X-HTTP-Session-Id",this.D),Gl(this,b),U&&(this.O?g="headers="+encodeURIComponent(String(X_(U)))+"&"+g:this.m&&Fm(b,this.m,U)),Lm(this.h,O),this.Ua&&Ge(b,"TYPE","init"),this.P?(Ge(b,"$req",g),Ge(b,"SID","null"),O.T=!0,Vm(O,b,null)):Vm(O,b,g),this.G=2}}else this.G==3&&(u?s1(this,u):this.i.length==0||F_(this.h)||s1(this))};function s1(u,g){var b;g?b=g.l:b=u.U++;const R=jr(u.I);Ge(R,"SID",u.K),Ge(R,"RID",b),Ge(R,"AID",u.T),Gl(u,R),u.m&&u.o&&Fm(R,u.m,u.o),b=new hi(u,u.j,b,u.B+1),u.m===null&&(b.H=u.o),g&&(u.i=g.D.concat(u.i)),g=o1(u,b,1e3),b.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Lm(u.h,b),Vm(b,R,g)}function Gl(u,g){u.H&&j(u.H,function(b,R){Ge(g,R,b)}),u.l&&z_({},function(b,R){Ge(g,R,b)})}function o1(u,g,b){b=Math.min(u.i.length,b);var R=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let U=-1;for(;;){const ne=["count="+b];U==-1?0<b?(U=O[0].g,ne.push("ofs="+U)):U=0:ne.push("ofs="+U);let $e=!0;for(let Dt=0;Dt<b;Dt++){let Ve=O[Dt].g;const Ut=O[Dt].map;if(Ve-=U,0>Ve)U=Math.max(0,O[Dt].g-100),$e=!1;else try{Xj(Ut,ne,"req"+Ve+"_")}catch{R&&R(Ut)}}if($e){R=ne.join("&");break e}}}return u=u.i.splice(0,b),g.D=u,R}function a1(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;J||z(),M||(J(),M=!0),$.add(g,u),u.v=0}}function $m(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ml(p(u.Fa,u),u1(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,l1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ml(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tn(10),Ed(this),l1(this))};function Um(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function l1(u){u.g=new hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=jr(u.qa);Ge(g,"RID","rpc"),Ge(g,"SID",u.K),Ge(g,"AID",u.T),Ge(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(g,"TO",u.ja),Ge(g,"TYPE","xmlhttp"),Gl(u,g),u.m&&u.o&&Fm(g,u.m,u.o),u.L&&(u.g.I=u.L);var b=u.g;u=u.ia,b.L=1,b.v=wd(jr(g)),b.m=null,b.P=!0,j_(b,u)}t.Za=function(){this.C!=null&&(this.C=null,Ed(this),$m(this),tn(19))};function Sd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function c1(u,g){var b=null;if(u.g==g){Sd(u),Um(u),u.g=null;var R=2}else if(Om(u.h,g))b=g.D,$_(u.h,g),R=1;else return;if(u.G!=0){if(g.o)if(R==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var O=u.B;R=fd(),en(R,new k_(R,b)),bd(u)}else a1(u);else if(O=g.s,O==3||O==0&&0<g.X||!(R==1&&tM(u,g)||R==2&&$m(u)))switch(b&&0<b.length&&(g=u.h,g.i=g.i.concat(b)),O){case 1:As(u,5);break;case 4:As(u,10);break;case 3:As(u,6);break;default:As(u,2)}}}function u1(u,g){let b=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(b*=2),b*g}function As(u,g){if(u.j.info("Error code "+g),g==2){var b=p(u.fb,u),R=u.Xa;const O=!R;R=new Is(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yd(R,"https"),wd(R),O?Kj(R.toString(),b):Qj(R.toString(),b)}else tn(2);u.G=0,u.l&&u.l.sa(g),d1(u),i1(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),tn(2)):(this.j.info("Failed to ping google.com"),tn(1))};function d1(u){if(u.G=0,u.ka=[],u.l){const g=U_(u.h);(g.length!=0||u.i.length!=0)&&(E(u.ka,g),E(u.ka,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.ra()}}function h1(u,g,b){var R=b instanceof Is?jr(b):new Is(b);if(R.g!="")g&&(R.g=g+"."+R.g),vd(R,R.s);else{var O=a.location;R=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;var U=new Is(null);R&&yd(U,R),g&&(U.g=g),O&&vd(U,O),b&&(U.l=b),R=U}return b=u.D,g=u.ya,b&&g&&Ge(R,b,g),Ge(R,"VER",u.la),Gl(u,R),R}function f1(u,g,b){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new ut(new xd({eb:b})):new ut(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function p1(){}t=p1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Id(){}Id.prototype.g=function(u,g){return new En(u,g)};function En(u,g){$t.call(this),this.g=new r1(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!w(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Fo(this)}x(En,$t),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Bm(this.g)},En.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.u&&(b={},b.__data__=Pm(u),u=b);g.i.push(new Lj(g.Ya++,u)),g.G==3&&bd(g)},En.prototype.N=function(){this.g.l=null,delete this.j,Bm(this.g),delete this.g,En.aa.N.call(this)};function m1(u){Rm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}x(m1,Rm);function g1(){km.call(this),this.status=1}x(g1,km);function Fo(u){this.g=u}x(Fo,p1),Fo.prototype.ua=function(){en(this.g,"a")},Fo.prototype.ta=function(u){en(this.g,new m1(u))},Fo.prototype.sa=function(u){en(this.g,new g1)},Fo.prototype.ra=function(){en(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,GC=function(){return new Id},WC=function(){return fd()},zC=bs,hv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pd.NO_ERROR=0,pd.TIMEOUT=8,pd.HTTP_ERROR=6,Sh=pd,N_.COMPLETE="complete",UC=N_,A_.EventType=Vl,Vl.OPEN="a",Vl.CLOSE="b",Vl.ERROR="c",Vl.MESSAGE="d",$t.prototype.listen=$t.prototype.K,mc=A_,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,$C=ut}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});const nE="@firebase/firestore",rE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new jC("@firebase/firestore");function Jo(){return es.logLevel}function qQ(t){es.setLogLevel(t)}function Q(t,...e){if(es.logLevel<=Re.DEBUG){const n=e.map(Ew);es.debug(`Firestore (${yl}): ${t}`,...n)}}function mt(t,...e){if(es.logLevel<=Re.ERROR){const n=e.map(Ew);es.error(`Firestore (${yl}): ${t}`,...n)}}function an(t,...e){if(es.logLevel<=Re.WARN){const n=e.map(Ew);es.warn(`Firestore (${yl}): ${t}`,...n)}}function Ew(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qC(t,r,n)}function qC(t,e,n){let r=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mt(r),new Error(r)}function oe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||qC(e,i,r)}function HQ(t,e){t||re(57014,e)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends gl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class J5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z5{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new HC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}}class e3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new e3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,V5(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class KQ{getToken(){return Promise.resolve(new fv(""))}invalidateToken(){}start(e,n){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=r3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function pv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return de(r,i);{const s=bw(),o=i3(s.encode(iE(t,n)),s.encode(iE(e,n)));return o!==0?o:de(r,i)}}n+=r>65535?2:1}return de(t.length,e.length)}function iE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function i3(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return de(t[n],e[n]);return de(t.length,e.length)}function $a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function KC(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__name__";class pr{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=pr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return de(e.length,n.length)}static compareSegments(e,n){const r=pr.isNumericId(e),i=pr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?pr.extractNumericId(e).compare(pr.extractNumericId(n)):pv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}}class Ee extends pr{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const s3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends pr{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return s3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mv}static keyField(){return new tt([mv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ee.fromString(e))}static fromName(e){return new ee(Ee.fromString(e).popFirst(5))}static empty(){return new ee(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o3(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sE(t){if(!ee.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oE(t){if(ee.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function QC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ap(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function be(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ap(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YC(t,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Co(t,e){if(!QC(t))throw new H(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new H(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=-62135596800,lE=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*lE);return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<aE)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lE}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Co(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:xt("string",Me._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new Me(0,0))}static max(){return new ae(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=-1;class za{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function gv(t){return t.fields.find(e=>e.kind===2)}function Ds(t){return t.fields.filter(e=>e.kind!==2)}function a3(t,e){let n=de(t.collectionGroup,e.collectionGroup);if(n!==0)return n;for(let r=0;r<Math.min(t.fields.length,e.fields.length);++r)if(n=l3(t.fields[r],e.fields[r]),n!==0)return n;return de(t.fields.length,e.fields.length)}za.UNKNOWN_ID=-1;class Ys{constructor(e,n){this.fieldPath=e,this.kind=n}}function l3(t,e){const n=tt.comparator(t.fieldPath,e.fieldPath);return n!==0?n:de(t.kind,e.kind)}class Wa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wa(0,jn.min())}}function XC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new jn(i,ee.empty(),e)}function JC(t){return new jn(t.readTime,t.key,Ua)}class jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jn(ae.min(),ee.empty(),Ua)}static max(){return new jn(ae.max(),ee.empty(),Ua)}}function Aw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==ZC)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(i=>i?L.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new L((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new L((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="SimpleDb";class Pp{static open(e,n,r,i){try{return new Pp(n,e.transaction(i,r))}catch(s){throw new Nc(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new kt,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Nc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Pw(r.target.error);this.S.reject(new Nc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Q(Sn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new u3(n)}}class Er{static delete(e){return Q(Sn,"Removing database:",e),Os(AC().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!DC())return!1;if(Er.F())return!0;const e=vf(),n=Er.M(e),r=0<n&&n<10,i=tR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.B=r,this.L=null,Er.M(vf())===12.2&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Q(Sn,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Nc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new H(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new H(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Nc(e,o))},i.onupgradeneeded=s=>{Q(Sn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;if(this.L!==null&&this.L!==s.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${s.oldVersion}, event.newVersion=${s.newVersion}, db.version=${o.version}`);this.B.q(o,i.transaction,s.oldVersion,this.version).next(()=>{Q(Sn,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",n=>{const r=n.target;this.L=r.version},{passive:!0})),this.db.addEventListener("versionchange",n=>{var r;n.newVersion===null&&(an('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.k(e);const a=Pp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.v(),c)).catch(c=>(a.abort(c),L.reject(c))).toPromise();return l.catch(()=>{}),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Q(Sn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function tR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class c3{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Os(this.$.delete())}}class Nc extends H{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ms(t){return t.name==="IndexedDbTransactionError"}class u3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q(Sn,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q(Sn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Os(r)}add(e){return Q(Sn,"ADD",this.store.name,e,e),Os(this.store.add(e))}get(e){return Os(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q(Sn,"GET",this.store.name,e,n),n))}delete(e){return Q(Sn,"DELETE",this.store.name,e),Os(this.store.delete(e))}count(){return Q(Sn,"COUNT",this.store.name),Os(this.store.count())}j(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new L((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.J(s,(a,l)=>{o.push(l)}).next(()=>o)}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}Y(e,n){Q(Sn,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.J(i,(s,o,a)=>a.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.J(i,n)}ee(e){const n=this.cursor({});return new L((r,i)=>{n.onerror=s=>{const o=Pw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}J(e,n){const r=[];return new L((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new c3(a),c=n(a.primaryKey,a.value,l);if(c instanceof L){const d=c.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?i():l.W===null?a.continue():a.continue(l.W)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Os(t){return new L((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Pw(r.target.error);n(i)}})}let cE=!1;function Pw(t){const e=Er.M(vf());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cE||(cE=!0,setTimeout(()=>{throw r},0)),r}}return t}const Dc="IndexBackfiller";class d3{constructor(e,n){this.asyncQueue=e,this.te=n,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){Q(Dc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.te.re();Q(Dc,`Documents written: ${n}`)}catch(n){ms(n)?Q(Dc,"Ignoring IndexedDB error during index backfill: ",n):await ps(n)}await this.ne(6e4)})}}class h3{constructor(e,n){this.localStore=e,this.persistence=n}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ie(n,e))}ie(e,n){const r=new Set;let i=n,s=!0;return L.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q(Dc,`Processing collection: ${o}`),this.se(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}se(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.oe(i,s)).next(a=>(Q(Dc,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}oe(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=JC(s);Aw(o,r)>0&&(r=o)}),new jn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}pn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=-1;function Uu(t){return t==null}function mu(t){return t===0&&1/t==-1/0}function nR(t){return typeof t=="number"&&Number.isInteger(t)&&!mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="";function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uE(e)),e=f3(t.get(n),e);return uE(e)}function f3(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Tf:n+="";break;default:n+=s}}return n}function uE(t){return t+Tf+""}function vr(t){const e=t.length;if(oe(e>=2,64408,{path:t}),e===2)return oe(t.charAt(0)===Tf&&t.charAt(1)==="",56145,{path:t}),Ee.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(Tf,s);switch((o<0||o>n)&&re(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:re(61167,{path:t})}s=o+2}return new Ee(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="remoteDocuments",zu="owner",Uo="owner",gu="mutationQueues",p3="userId",tr="mutations",dE="batchId",Gs="userMutationsIndex",hE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t,e){return[t,Xt(e)]}function rR(t,e,n){return[t,Xt(e),n]}const m3={},Ga="documentMutations",Ef="remoteDocumentsV14",g3=["prefixPath","collectionGroup","readTime","documentId"],Ah="documentKeyIndex",y3=["prefixPath","collectionGroup","documentId"],iR="collectionGroupIndex",v3=["collectionGroup","readTime","prefixPath","documentId"],yu="remoteDocumentGlobal",yv="remoteDocumentGlobalKey",qa="targets",sR="queryTargetsIndex",w3=["canonicalId","targetId"],Ha="targetDocuments",x3=["targetId","path"],Cw="documentTargetsIndex",_3=["path","targetId"],bf="targetGlobalKey",Xs="targetGlobal",vu="collectionParents",T3=["collectionId","parent"],Ka="clientMetadata",E3="clientId",Cp="bundles",b3="bundleId",Rp="namedQueries",S3="name",Rw="indexConfiguration",I3="indexId",vv="collectionGroupIndex",A3="collectionGroup",Vc="indexState",P3=["indexId","uid"],oR="sequenceNumberIndex",C3=["uid","sequenceNumber"],jc="indexEntries",R3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aR="documentKeyIndex",k3=["indexId","uid","orderedDocumentKey"],kp="documentOverlays",N3=["userId","collectionPath","documentId"],wv="collectionPathOverlayIndex",D3=["userId","collectionPath","largestBatchId"],lR="collectionGroupOverlayIndex",V3=["userId","collectionGroup","largestBatchId"],kw="globals",j3="name",cR=[gu,tr,Ga,Vs,qa,zu,Xs,Ha,Ka,yu,vu,Cp,Rp],M3=[...cR,kp],uR=[gu,tr,Ga,Ef,qa,zu,Xs,Ha,Ka,yu,vu,Cp,Rp,kp],dR=uR,Nw=[...dR,Rw,Vc,jc],O3=Nw,hR=[...Nw,kw],L3=hR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends eR{constructor(e,n){super(),this.ce=e,this.currentSequenceNumber=n}}function It(t,e){const n=te(t);return Er.N(n.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qd(this.root,e,this.comparator,!0)}}class Qd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??jt.RED,this.left=i??jt.EMPTY,this.right=s??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new jt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pE(this.data.getIterator())}getIteratorFrom(e){return new pE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fe(this.comparator);return n.data=e,n}}class pE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new mn([])}unionWith(e){let n=new Fe(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mR("Invalid base64 string: "+s):s}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const F3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=F3.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="server_timestamp",yR="__type__",vR="__previous_value__",wR="__local_write_time__";function Np(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yR])===null||n===void 0?void 0:n.stringValue)===gR}function Dp(t){const e=t.mapValue.fields[vR];return Np(e)?Dp(e):e}function wu(t){const e=Zr(t.mapValue.fields[wR].timestampValue);return new Me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r,i,s,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const xu="(default)";class so{constructor(e,n){this.projectId=e,this.database=n||xu}static empty(){return new so("","")}get isDefaultDatabase(){return this.database===xu}isEqual(e){return e instanceof so&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="__type__",xR="__max__",Ni={mapValue:{fields:{__type__:{stringValue:xR}}}},Vw="__vector__",Qa="value",Ph={nullValue:"NULL_VALUE"};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Np(t)?4:_R(t)?9007199254740991:Vp(t)?10:11:re(28295,{value:t})}function Cr(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wu(t).isEqual(wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zr(i.timestampValue),a=Zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ei(i.bytesValue).isEqual(ei(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),a=Ze(s.doubleValue);return o===a?mu(o)===mu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fE(o)!==fE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Cr(o[l],a[l])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function _u(t,e){return(t.values||[]).find(n=>Cr(n,e))!==void 0}function ns(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ze(s.integerValue||s.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return mE(t.timestampValue,e.timestampValue);case 4:return mE(wu(t),wu(e));case 5:return pv(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ei(s),l=ei(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=de(a[c],l[c]);if(d!==0)return d}return de(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=de(Ze(s.latitude),Ze(o.latitude));return a!==0?a:de(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const h=s.fields||{},p=o.fields||{},m=(a=h[Qa])===null||a===void 0?void 0:a.arrayValue,x=(l=p[Qa])===null||l===void 0?void 0:l.arrayValue,v=de(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:gE(m,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ni.mapValue&&o===Ni.mapValue)return 0;if(s===Ni.mapValue)return 1;if(o===Ni.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=pv(l[h],d[h]);if(p!==0)return p;const m=ns(a[l[h]],c[d[h]]);if(m!==0)return m}return de(l.length,d.length)}(t.mapValue,e.mapValue);default:throw re(23264,{le:n})}}function mE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=Zr(t),r=Zr(e),i=de(n.seconds,r.seconds);return i!==0?i:de(n.nanos,r.nanos)}function gE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ns(n[i],r[i]);if(s)return s}return de(n.length,r.length)}function Ya(t){return _v(t)}function _v(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_v(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_v(n.fields[o])}`;return i+"}"}(t.mapValue):re(61005,{value:t})}function Ch(t){switch(ts(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dp(t);return e?16+Ch(e):16;case 5:return 2*t.stringValue.length;case 6:return ei(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ch(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return gs(r.fields,(s,o)=>{i+=s.length+Ch(o)}),i}(t.mapValue);default:throw re(13486,{value:t})}}function oo(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tv(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function yE(t){return!!t&&"nullValue"in t}function vE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Rh(t){return!!t&&"mapValue"in t}function Vp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Dw])===null||n===void 0?void 0:n.stringValue)===Vw}function Mc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _R(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xR}const TR={mapValue:{fields:{[Dw]:{stringValue:Vw},[Qa]:{arrayValue:{}}}}};function $3(t){return"nullValue"in t?Ph:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?oo(so.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Vp(t)?TR:{mapValue:{}}:re(35942,{value:t})}function U3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?oo(so.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?TR:"mapValue"in t?Vp(t)?{mapValue:{}}:Ni:re(61959,{value:t})}function wE(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function xE(t,e){const n=ns(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mc(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Mc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Rh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(Mc(this.value))}}function ER(t){const e=[];return gs(t.fields,(n,r)=>{const i=new tt([n]);if(Rh(r)){const s=ER(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ke(e,0,ae.min(),ae.min(),ae.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ke(e,1,n,ae.min(),r,i,0)}static newNoDocument(e,n){return new Ke(e,2,n,ae.min(),ae.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new Ke(e,3,n,ae.min(),ae.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ke&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ke(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.position=e,this.inclusive=n}}function _E(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ns(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function z3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{}class Ae extends bR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new W3(e,n,r):n==="array-contains"?new H3(e,r):n==="in"?new RR(e,r):n==="not-in"?new K3(e,r):n==="array-contains-any"?new Q3(e,r):new Ae(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new G3(e,r):new q3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ns(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ns(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends bR{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Oe(e,n)}matches(e){return Xa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Xa(t){return t.op==="and"}function Ev(t){return t.op==="or"}function jw(t){return SR(t)&&Xa(t)}function SR(t){for(const e of t.filters)if(e instanceof Oe)return!1;return!0}function bv(t){if(t instanceof Ae)return t.field.canonicalString()+t.op.toString()+Ya(t.value);if(jw(t))return t.filters.map(e=>bv(e)).join(",");{const e=t.filters.map(n=>bv(n)).join(",");return`${t.op}(${e})`}}function IR(t,e){return t instanceof Ae?function(r,i){return i instanceof Ae&&r.op===i.op&&r.field.isEqual(i.field)&&Cr(r.value,i.value)}(t,e):t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IR(o,i.filters[a]),!0):!1}(t,e):void re(19439)}function AR(t,e){const n=t.filters.concat(e);return Oe.create(n,t.op)}function PR(t){return t instanceof Ae?function(n){return`${n.field.canonicalString()} ${n.op} ${Ya(n.value)}`}(t):t instanceof Oe?function(n){return n.op.toString()+" {"+n.getFilters().map(PR).join(" ,")+"}"}(t):"Filter"}class W3 extends Ae{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class G3 extends Ae{constructor(e,n){super(e,"in",n),this.keys=CR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class q3 extends Ae{constructor(e,n){super(e,"not-in",n),this.keys=CR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class H3 extends Ae{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tu(n)&&_u(n.arrayValue,this.value)}}class RR extends Ae{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_u(this.value.arrayValue,n)}}class K3 extends Ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_u(this.value.arrayValue,n)}}class Q3 extends Ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function Sv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Y3(t,e,n,r,i,s,o)}function ao(t){const e=te(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ya(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ya(r)).join(",")),e.Pe=n}return e.Pe}function Wu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TE(t.startAt,e.startAt)&&TE(t.endAt,e.endAt)}function Sf(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function If(t,e){return t.filters.filter(n=>n instanceof Ae&&n.field.isEqual(e))}function EE(t,e,n){let r=Ph,i=!0;for(const s of If(t,e)){let o=Ph,a=!0;switch(s.op){case"<":case"<=":o=$3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Ph}wE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];wE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function bE(t,e,n){let r=Ni,i=!0;for(const s of If(t,e)){let o=Ni,a=!0;switch(s.op){case">=":case">":o=U3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ni}xE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];xE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function kR(t,e,n,r,i,s,o,a){return new oi(t,e,n,r,i,s,o,a)}function vl(t){return new oi(t)}function SE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mw(t){return t.collectionGroup!==null}function Ia(t){const e=te(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Eu(s,r))}),n.has(tt.keyField().canonicalString())||e.Te.push(new Eu(tt.keyField(),r))}return e.Te}function Jt(t){const e=te(t);return e.Ie||(e.Ie=DR(e,Ia(t))),e.Ie}function NR(t){const e=te(t);return e.de||(e.de=DR(e,t.explicitOrderBy)),e.de}function DR(t,e){if(t.limitType==="F")return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Eu(i.field,s)});const n=t.endAt?new rs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rs(t.startAt.position,t.startAt.inclusive):null;return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Iv(t,e){const n=t.filters.concat([e]);return new oi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,n){return new oi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gu(t,e){return Wu(Jt(t),Jt(e))&&t.limitType===e.limitType}function VR(t){return`${ao(Jt(t))}|lt:${t.limitType}`}function Zo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>PR(i)).join(", ")}]`),Uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ya(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ya(i)).join(",")),`Target(${r})`}(Jt(t))}; limitType=${t.limitType})`}function qu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ia(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=_E(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ia(r),i)||r.endAt&&!function(o,a,l){const c=_E(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ia(r),i))}(t,e)}function jR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MR(t){return(e,n)=>{let r=!1;for(const i of Ia(t)){const s=X3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function X3(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ns(l,c):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=new We(ee.comparator);function gn(){return J3}const OR=new We(ee.comparator);function gc(...t){let e=OR;for(const n of t)e=e.insert(n.key,n);return e}function LR(t){let e=OR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wr(){return Oc()}function FR(){return Oc()}function Oc(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const Z3=new We(ee.comparator),eB=new Fe(ee.comparator);function ye(...t){let e=eB;for(const n of t)e=e.add(n);return e}const tB=new Fe(de);function Ow(){return tB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function BR(t){return{integerValue:""+t}}function $R(t,e){return nR(e)?BR(e):Lw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this._=void 0}}function nB(t,e,n){return t instanceof Ja?function(i,s){const o={fields:{[yR]:{stringValue:gR},[wR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Np(s)&&(s=Dp(s)),s&&(o.fields[vR]=s),{mapValue:o}}(n,e):t instanceof lo?zR(t,e):t instanceof co?WR(t,e):function(i,s){const o=UR(i,s),a=IE(o)+IE(i.Ee);return Tv(o)&&Tv(i.Ee)?BR(a):Lw(i.serializer,a)}(t,e)}function rB(t,e,n){return t instanceof lo?zR(t,e):t instanceof co?WR(t,e):n}function UR(t,e){return t instanceof Za?function(r){return Tv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ja extends jp{}class lo extends jp{constructor(e){super(),this.elements=e}}function zR(t,e){const n=GR(e);for(const r of t.elements)n.some(i=>Cr(i,r))||n.push(r);return{arrayValue:{values:n}}}class co extends jp{constructor(e){super(),this.elements=e}}function WR(t,e){let n=GR(e);for(const r of t.elements)n=n.filter(i=>!Cr(i,r));return{arrayValue:{values:n}}}class Za extends jp{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function IE(t){return Ze(t.integerValue||t.doubleValue)}function GR(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n){this.field=e,this.transform=n}}function iB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lo&&i instanceof lo||r instanceof co&&i instanceof co?$a(r.elements,i.elements,Cr):r instanceof Za&&i instanceof Za?Cr(r.Ee,i.Ee):r instanceof Ja&&i instanceof Ja}(t.transform,e.transform)}class sB{constructor(e,n){this.version=e,this.transformResults=n}}class nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nt}static exists(e){return new nt(void 0,e)}static updateTime(e){return new nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mp{}function qR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xl(t.key,nt.none()):new wl(t.key,t.data,nt.none());{const n=t.data,r=Mt.empty();let i=new Fe(tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new li(t.key,r,new mn(i.toArray()),nt.none())}}function oB(t,e,n){t instanceof wl?function(i,s,o){const a=i.value.clone(),l=PE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,o){if(!kh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=PE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(HR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Lc(t,e,n,r){return t instanceof wl?function(s,o,a,l){if(!kh(s.precondition,o))return a;const c=s.value.clone(),d=CE(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,o,a,l){if(!kh(s.precondition,o))return a;const c=CE(s.fieldTransforms,l,o),d=o.data;return d.setAll(HR(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return kh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function aB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=UR(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function AE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$a(r,i,(s,o)=>iB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wl extends Mp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class li extends Mp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function PE(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,rB(o,a,n[i]))}return r}function CE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,nB(s,o,e))}return r}class xl extends Mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fw extends Mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&oB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=qR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,r)=>AE(n,r))&&$a(this.baseMutations,e.baseMutations,(n,r)=>AE(n,r))}}class $w{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Z3}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new $w(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,Ce;function QR(t){switch(t){case F.OK:return re(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function YR(t){if(t===void 0)return mt("GRPC error has no .code"),F.UNKNOWN;switch(t){case yt.OK:return F.OK;case yt.CANCELLED:return F.CANCELLED;case yt.UNKNOWN:return F.UNKNOWN;case yt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case yt.INTERNAL:return F.INTERNAL;case yt.UNAVAILABLE:return F.UNAVAILABLE;case yt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case yt.NOT_FOUND:return F.NOT_FOUND;case yt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case yt.ABORTED:return F.ABORTED;case yt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case yt.DATA_LOSS:return F.DATA_LOSS;default:return re(39323,{code:t})}}(Ce=yt||(yt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pf=null;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=new Gi([4294967295,4294967295],0);function RE(t){const e=bw().encode(t),n=new BC;return n.update(e),new Uint8Array(n.digest())}function kE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([i,s],0)]}class zw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(r<0)throw new yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Gi.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Gi.fromNumber(r)));return i.compare(cB)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=RE(e),[r,i]=kE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=RE(e),[r,i]=kE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Qu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ku(ae.min(),i,new We(de),gn(),ye())}}class Qu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qu(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class XR{constructor(e,n){this.targetId=e,this.De=n}}class JR{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class NE{constructor(){this.ve=0,this.Ce=DE(),this.Fe=ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ye(),n=ye(),r=ye();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re(38017,{changeType:s})}}),new Qu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=DE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class uB{constructor(e){this.We=e,this.Ge=new Map,this.ze=gn(),this.je=Yd(),this.Je=Yd(),this.He=new We(de)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(Sf(s))if(r===0){const o=new ee(s.path);this.Xe(n,o,Ke.newNoDocument(o,ae.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}Pf==null||Pf.ct(function(d,h,p,m,x){var v,E,y,w,T,C;const D={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},j=h.unchangedNames;return j&&(D.bloomFilter={applied:x===0,hashCount:(v=j==null?void 0:j.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(w=(y=(E=j==null?void 0:j.bits)===null||E===void 0?void 0:E.bitmap)===null||y===void 0?void 0:y.length)!==null&&w!==void 0?w:0,padding:(C=(T=j==null?void 0:j.bits)===null||T===void 0?void 0:T.padding)!==null&&C!==void 0?C:0,mightContain:A=>{var S;return(S=m==null?void 0:m.mightContain(A))!==null&&S!==void 0&&S}}),D}(o,e.De,this.We.lt(),a,l))}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ei(r).toUint8Array()}catch(l){if(l instanceof mR)return an("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zw(o,i,s)}catch(l){return an(l instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&Sf(a.target)){const l=new ee(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Ke.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=ye();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Ku(e,n,this.He,this.ze,r);return this.ze=gn(),this.je=Yd(),this.Je=Yd(),this.He=new We(de),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new NE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Fe(de),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Fe(de),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new NE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Yd(){return new We(ee.comparator)}function DE(){return new We(ee.comparator)}const dB=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),hB=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),fB=(()=>({and:"AND",or:"OR"}))();class pB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Av(t,e){return t.useProto3Json||Uu(e)?e:{value:e}}function el(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mB(t,e){return el(t,e.toTimestamp())}function gt(t){return oe(!!t,49232),ae.fromTimestamp(function(n){const r=Zr(n);return new Me(r.seconds,r.nanos)}(t))}function Ww(t,e){return Pv(t,e).canonicalString()}function Pv(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ek(t){const e=Ee.fromString(t);return oe(ck(e),10190,{key:e.toString()}),e}function bu(t,e){return Ww(t.databaseId,e.path)}function br(t,e){const n=ek(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(rk(n))}function tk(t,e){return Ww(t.databaseId,e)}function nk(t){const e=ek(t);return e.length===4?Ee.emptyPath():rk(e)}function Cv(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rk(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VE(t,e,n){return{name:bu(t,e),fields:n.value.mapValue.fields}}function Op(t,e,n){const r=br(t,e.name),i=gt(e.updateTime),s=e.createTime?gt(e.createTime):ae.min(),o=new Mt({mapValue:{fields:e.fields}}),a=Ke.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gB(t,e){return"found"in e?function(r,i){oe(!!i.found,43571),i.found.name,i.found.updateTime;const s=br(r,i.found.name),o=gt(i.found.updateTime),a=i.found.createTime?gt(i.found.createTime):ae.min(),l=new Mt({mapValue:{fields:i.found.fields}});return Ke.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){oe(!!i.missing,3894),oe(!!i.readTime,22933);const s=br(r,i.missing),o=gt(i.readTime);return Ke.newNoDocument(s,o)}(t,e):re(7234,{result:e})}function yB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:re(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(oe(d===void 0||typeof d=="string",58123),ft.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:YR(c.code);return new H(d,c.message||"")}(o);n=new JR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=br(t,r.document.name),s=gt(r.document.updateTime),o=r.document.createTime?gt(r.document.createTime):ae.min(),a=new Mt({mapValue:{fields:r.document.fields}}),l=Ke.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Nh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=br(t,r.document),s=r.readTime?gt(r.readTime):ae.min(),o=Ke.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=br(t,r.document),s=r.removedTargetIds||[];n=new Nh([],s,i,null)}else{if(!("filter"in e))return re(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new lB(i,s),a=r.targetId;n=new XR(a,o)}}return n}function Su(t,e){let n;if(e instanceof wl)n={update:VE(t,e.key,e.value)};else if(e instanceof xl)n={delete:bu(t,e.key)};else if(e instanceof li)n={update:VE(t,e.key,e.data),updateMask:EB(e.fieldMask)};else{if(!(e instanceof Fw))return re(16599,{Rt:e.type});n={verify:bu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Za)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re(27497)}(t,e.precondition)),n}function Rv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?nt.updateTime(gt(s.updateTime)):s.exists!==void 0?nt.exists(s.exists):nt.none()}(e.currentDocument):nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Ja;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new lo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new co(d)}else"increment"in a?l=new Za(o,a.increment):re(16584,{proto:a});const c=tt.fromServerFormat(a.fieldPath);return new Hu(c,l)}(t,i)):[];if(e.update){e.update.name;const i=br(t,e.update.name),s=new Mt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new mn(c.map(d=>tt.fromServerFormat(d)))}(e.updateMask);return new li(i,s,o,n,r)}return new wl(i,s,n,r)}if(e.delete){const i=br(t,e.delete);return new xl(i,n)}if(e.verify){const i=br(t,e.verify);return new Fw(i,n)}return re(1463,{proto:e})}function vB(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?gt(i.updateTime):gt(s);return o.isEqual(ae.min())&&(o=gt(s)),new sB(o,i.transformResults||[])}(n,e))):[]}function ik(t,e){return{documents:[tk(t,e.path)]}}function Lp(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tk(t,i);const s=function(c){if(c.length!==0)return lk(Oe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:Ai(p.field),direction:xB(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Av(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function sk(t,e,n,r){const{Vt:i,parent:s}=Lp(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d=r?c.alias:"aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Ai(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ai(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ft:o,parent:s}}function ok(t){let e=nk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const p=ak(h);return p instanceof Oe&&jw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(x){return new Eu(ea(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Uu(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new rs(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new rs(m,p)}(n.endAt)),kR(e,i,o,s,a,"F",l,c)}function wB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ak(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ea(n.unaryFilter.field);return Ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ea(n.unaryFilter.field);return Ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ea(n.unaryFilter.field);return Ae.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ea(n.unaryFilter.field);return Ae.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ae.create(ea(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Oe.create(n.compositeFilter.filters.map(r=>ak(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function xB(t){return dB[t]}function _B(t){return hB[t]}function TB(t){return fB[t]}function Ai(t){return{fieldPath:t.canonicalString()}}function ea(t){return tt.fromServerFormat(t.fieldPath)}function lk(t){return t instanceof Ae?function(n){if(n.op==="=="){if(vE(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NAN"}};if(yE(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vE(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NAN"}};if(yE(n.value))return{unaryFilter:{field:Ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ai(n.field),op:_B(n.op),value:n.value}}}(t):t instanceof Oe?function(n){const r=n.getFilters().map(i=>lk(i));return r.length===1?r[0]:{compositeFilter:{op:TB(n.op),filters:r}}}(t):re(54877,{filter:t})}function EB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ck(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,i,s=ae.min(),o=ae.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.gt=e}}function bB(t,e){let n;if(e.document)n=Op(t.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),i=ho(e.noDocument.readTime);n=Ke.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return re(56709);{const r=ee.fromSegments(e.unknownDocument.path),i=ho(e.unknownDocument.version);n=Ke.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new Me(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),n}function jE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Cf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:bu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:el(s,o.version.toTimestamp()),createTime:el(s,o.createTime.toTimestamp())}}(t.gt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:uo(e.version)};else{if(!e.isUnknownDocument())return re(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:uo(e.version)}}return r}function Cf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function uo(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ho(t){const e=new Me(t.seconds,t.nanoseconds);return ae.fromTimestamp(e)}function Ls(t,e){const n=(e.baseMutations||[]).map(s=>Rv(t.gt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Rv(t.gt,s)),i=Me.fromMillis(e.localWriteTimeMs);return new Bw(e.batchId,i,n,r)}function vc(t){const e=ho(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ho(t.lastLimboFreeSnapshotVersion):ae.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return oe(o===1,1966,{count:o}),Jt(vl(nk(s.documents[0])))}(t.query):function(s){return Jt(ok(s))}(t.query),new zr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ft.fromBase64String(t.resumeToken))}function dk(t,e){const n=uo(e.snapshotVersion),r=uo(e.lastLimboFreeSnapshotVersion);let i;i=Sf(e.target)?ik(t.gt,e.target):Lp(t.gt,e.target).Vt;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ao(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fp(t){const e=ok({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}function bg(t,e){return new Uw(e.largestBatchId,Rv(t.gt,e.overlayMutation))}function ME(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function OE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:uo(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{getBundleMetadata(e,n){return LE(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ho(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return LE(e).put(function(i){return{bundleId:i.id,createTime:uo(gt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return FE(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Fp(s.bundledQuery),readTime:ho(s.readTime)}}(r)})}saveNamedQuery(e,n){return FE(e).put(function(i){return{name:i.name,readTime:uo(gt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function LE(t){return It(t,Cp)}function FE(t){return It(t,Rp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.serializer=e,this.userId=n}static yt(e,n){const r=n.uid||"";return new Bp(e,r)}getOverlay(e,n){return nc(e).get(ME(this.userId,n)).next(r=>r?bg(this.serializer,r):null)}getOverlays(e,n){const r=wr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Uw(n,o);i.push(this.wt(e,a))}),L.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(nc(e).Y(wv,a))}),L.waitFor(s)}getOverlaysForCollection(e,n,r){const i=wr(),s=Xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return nc(e).j(wv,o).next(a=>{for(const l of a){const c=bg(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=wr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return nc(e).X({index:lR,range:a},(l,c,d)=>{const h=bg(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}wt(e,n){return nc(e).put(function(i,s,o){const[a,l,c]=ME(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Su(i.gt,o.mutation)}}(this.serializer,this.userId,n))}}function nc(t){return It(t,kp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{St(e){return It(e,kw)}getSessionToken(e){return this.St(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?ft.fromUint8Array(r):ft.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.St(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ze(e.integerValue));else if("doubleValue"in e){const r=Ze(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),mu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Zr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ei(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?_R(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):Vp(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):re(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){const r=e.fields||{};this.Ct(n,55);for(const i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;const s=e.fields||{};this.Ct(n,53);const o=Qa,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ze(a)),this.xt(o,n),this.Dt(s[o],n)}qt(e,n){const r=e.values||[];this.Ct(n,50);for(const i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),ee.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}}Fs.Ut=new Fs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=255;function AB(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function BE(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=AB(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class PB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Wt(r.value),r=n.next();this.Gt()}zt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.jt(r.value),r=n.next();this.Jt()}Ht(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const i=n.codePointAt(0);this.Wt(240|i>>>18),this.Wt(128|63&i>>>12),this.Wt(128|63&i>>>6),this.Wt(128|63&i)}}this.Gt()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const i=n.codePointAt(0);this.jt(240|i>>>18),this.jt(128|63&i>>>12),this.jt(128|63&i>>>6),this.jt(128|63&i)}}this.Jt()}Zt(e){const n=this.Xt(e),r=BE(n);this.en(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}tn(e){const n=this.Xt(e),r=BE(n);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}nn(){this.rn(Wo),this.rn(255)}sn(){this._n(Wo),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Wt(e){const n=255&e;n===0?(this.rn(0),this.rn(255)):n===Wo?(this.rn(Wo),this.rn(0)):this.rn(n)}jt(e){const n=255&e;n===0?(this._n(0),this._n(255)):n===Wo?(this._n(Wo),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class CB{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class RB{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class rc{constructor(){this.un=new PB,this.cn=new CB(this.un),this.ln=new RB(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i){this.Pn=e,this.Tn=n,this.In=r,this.dn=i}En(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Bs(this.Pn,this.Tn,this.In,r)}An(e,n,r){return{indexId:this.Pn,uid:e,arrayValue:Dh(this.In),directionalValue:Dh(this.dn),orderedDocumentKey:Dh(n),documentKey:r.path.toArray()}}Rn(e,n,r){const i=this.An(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function yi(t,e){let n=t.Pn-e.Pn;return n!==0?n:(n=$E(t.In,e.In),n!==0?n:(n=$E(t.dn,e.dn),n!==0?n:ee.comparator(t.Tn,e.Tn)))}function $E(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Dh(t){return NC()?function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}(t):t}function UE(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(t)}class zE{constructor(e){this.Vn=new Fe((n,r)=>tt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(oe(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const n=gv(e);if(n!==void 0&&!this.yn(n))return!1;const r=Ds(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.yn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Vn.size>0){const a=this.Vn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.wn(a,l)||!this.Sn(this.mn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.mn.length||!this.Sn(this.mn[o++],a))return!1}return!0}bn(){if(this.gn)return null;let e=new Fe(tt.comparator);const n=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Ys(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Ys(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Ys(r.field,r.dir==="asc"?0:1)));return new za(za.UNKNOWN_ID,this.collectionId,n,Wa.empty())}yn(e){for(const n of this.fn)if(this.wn(n,e))return!0;return!1}wn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){var e,n;if(oe(t instanceof Ae||t instanceof Oe,20012),t instanceof Ae){if(t instanceof RR){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Ae.create(t.field,"==",s)))||[];return Oe.create(i,"or")}return t}const r=t.filters.map(i=>hk(i));return Oe.create(r,t.op)}function kB(t){if(t.getFilters().length===0)return[];const e=Dv(hk(t));return oe(fk(e),7391),kv(e)||Nv(e)?[e]:e.getFilters()}function kv(t){return t instanceof Ae}function Nv(t){return t instanceof Oe&&jw(t)}function fk(t){return kv(t)||Nv(t)||function(n){if(n instanceof Oe&&Ev(n)){for(const r of n.getFilters())if(!kv(r)&&!Nv(r))return!1;return!0}return!1}(t)}function Dv(t){if(oe(t instanceof Ae||t instanceof Oe,34018),t instanceof Ae)return t;if(t.filters.length===1)return Dv(t.filters[0]);const e=t.filters.map(r=>Dv(r));let n=Oe.create(e,t.op);return n=Rf(n),fk(n)?n:(oe(n instanceof Oe,64498),oe(Xa(n),40251),oe(n.filters.length>1,57927),n.filters.reduce((r,i)=>Gw(r,i)))}function Gw(t,e){let n;return oe(t instanceof Ae||t instanceof Oe,38388),oe(e instanceof Ae||e instanceof Oe,25473),n=t instanceof Ae?e instanceof Ae?function(i,s){return Oe.create([i,s],"and")}(t,e):WE(t,e):e instanceof Ae?WE(e,t):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0,48005),Xa(i)&&Xa(s))return AR(i,s.getFilters());const o=Ev(i)?i:s,a=Ev(i)?s:i,l=o.filters.map(c=>Gw(c,a));return Oe.create(l,"or")}(t,e),Rf(n)}function WE(t,e){if(Xa(e))return AR(e,t.getFilters());{const n=e.filters.map(r=>Gw(t,r));return Oe.create(n,"or")}}function Rf(t){if(oe(t instanceof Ae||t instanceof Oe,11850),t instanceof Ae)return t;const e=t.getFilters();if(e.length===1)return Rf(e[0]);if(SR(t))return t;const n=e.map(i=>Rf(i)),r=[];return n.forEach(i=>{i instanceof Ae?r.push(i):i instanceof Oe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.Dn=new qw}addToCollectionParentIndex(e,n){return this.Dn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(jn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class qw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fe(Ee.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="IndexedDbIndexManager",Xd=new Uint8Array(0);class DB{constructor(e,n){this.databaseId=n,this.vn=new qw,this.Cn=new ai(r=>ao(r),(r,i)=>Wu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const s={collectionId:r,parent:Xt(i)};return qE(e).put(s)}return L.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[KC(n),""],!1,!0);return qE(e).j(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(vr(o.parent))}return r})}addFieldIndex(e,n){const r=ic(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=qo(e);return s.next(a=>{o.put(OE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=ic(e),i=qo(e),s=Go(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ic(e),r=Go(e),i=qo(e);return n.Y().next(()=>r.Y()).next(()=>i.Y())}createTargetIndexes(e,n){return L.forEach(this.Fn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new zE(r).bn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Go(e);let i=!0;const s=new Map;return L.forEach(this.Fn(n),o=>this.Mn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ye();const a=[];return L.forEach(s,(l,c)=>{Q(GE,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${ao(n)}`);const d=function(T,C){const D=gv(C);if(D===void 0)return null;for(const j of If(T,D.fieldPath))switch(j.op){case"array-contains-any":return j.value.arrayValue.values||[];case"array-contains":return[j.value]}return null}(c,l),h=function(T,C){const D=new Map;for(const j of Ds(C))for(const A of If(T,j.fieldPath))switch(A.op){case"==":case"in":D.set(j.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return D.set(j.fieldPath.canonicalString(),A.value),Array.from(D.values())}return null}(c,l),p=function(T,C){const D=[];let j=!0;for(const A of Ds(C)){const S=A.kind===0?EE(T,A.fieldPath,T.startAt):bE(T,A.fieldPath,T.startAt);D.push(S.value),j&&(j=S.inclusive)}return new rs(D,j)}(c,l),m=function(T,C){const D=[];let j=!0;for(const A of Ds(C)){const S=A.kind===0?bE(T,A.fieldPath,T.endAt):EE(T,A.fieldPath,T.endAt);D.push(S.value),j&&(j=S.inclusive)}return new rs(D,j)}(c,l),x=this.xn(l,c,p),v=this.xn(l,c,m),E=this.On(l,c,h),y=this.Nn(l.indexId,d,x,p.inclusive,v,m.inclusive,E);return L.forEach(y,w=>r.H(w,n.limit).next(T=>{T.forEach(C=>{const D=ee.fromSegments(C.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return L.resolve(null)})}Fn(e){let n=this.Cn.get(e);return n||(e.filters.length===0?n=[e]:n=kB(Oe.create(e.filters,"and")).map(r=>Sv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,n),n)}Nn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.Bn(n[h/c]):Xd,m=this.Ln(e,p,r[h%c],i),x=this.kn(e,p,s[h%c],o),v=a.map(E=>this.Ln(e,p,E,!0));d.push(...this.createRange(m,x,v))}return d}Ln(e,n,r,i){const s=new Bs(e,ee.empty(),n,r);return i?s:s.En()}kn(e,n,r,i){const s=new Bs(e,ee.empty(),n,r);return i?s.En():s}Mn(e,n){const r=new zE(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.pn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Fn(n);return L.forEach(i,s=>this.Mn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Fe(tt.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}qn(e,n){const r=new rc;for(const i of Ds(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.hn(i.kind);Fs.Ut.bt(s,o)}return r.an()}Bn(e){const n=new rc;return Fs.Ut.bt(e,n.hn(0)),n.an()}Qn(e,n){const r=new rc;return Fs.Ut.bt(oo(this.databaseId,n),r.hn(function(s){const o=Ds(s);return o.length===0?0:o[o.length-1].kind}(e))),r.an()}On(e,n,r){if(r===null)return[];let i=[];i.push(new rc);let s=0;for(const o of Ds(e)){const a=r[s++];for(const l of i)if(this.$n(n,o.fieldPath)&&Tu(a))i=this.Un(i,o,a);else{const c=l.hn(o.kind);Fs.Ut.bt(a,c)}}return this.Kn(i)}xn(e,n,r){return this.On(e,n,r.position)}Kn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].an();return n}Un(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new rc;l.seed(a.an()),Fs.Ut.bt(o,l.hn(n.kind)),s.push(l)}return s}$n(e,n){return!!e.filters.find(r=>r instanceof Ae&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ic(e),i=qo(e);return(n?r.j(vv,IDBKeyRange.bound(n,n)):r.j()).next(s=>{const o=[];return L.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new Wa(h.sequenceNumber,new jn(ho(h.readTime),new ee(vr(h.documentKey)),h.largestBatchId)):Wa.empty(),m=d.fields.map(([x,v])=>new Ys(tt.fromServerFormat(x),v));return new za(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:de(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=ic(e),s=qo(e);return this.Wn(e).next(o=>i.j(vv,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>s.put(OE(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),L.forEach(a,l=>this.Gn(e,i,l).next(c=>{const d=this.zn(s,l);return c.isEqual(d)?L.resolve():this.jn(e,s,l,c,d)}))))})}Jn(e,n,r,i){return Go(e).put(i.An(this.uid,this.Qn(r,n.key),n.key))}Hn(e,n,r,i){return Go(e).delete(i.Rn(this.uid,this.Qn(r,n.key),n.key))}Gn(e,n,r){const i=Go(e);let s=new Fe(yi);return i.X({index:aR,range:IDBKeyRange.only([r.indexId,this.uid,Dh(this.Qn(r,n))])},(o,a)=>{s=s.add(new Bs(r.indexId,n,UE(a.arrayValue),UE(a.directionalValue)))}).next(()=>s)}zn(e,n){let r=new Fe(yi);const i=this.qn(n,e);if(i==null)return r;const s=gv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Tu(o))for(const a of o.arrayValue.values||[])r=r.add(new Bs(n.indexId,e.key,this.Bn(a),i))}else r=r.add(new Bs(n.indexId,e.key,Xd,i));return r}jn(e,n,r,i,s){Q(GE,"Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,h,p){const m=l.getIterator(),x=c.getIterator();let v=zo(m),E=zo(x);for(;v||E;){let y=!1,w=!1;if(v&&E){const T=d(v,E);T<0?w=!0:T>0&&(y=!0)}else v!=null?w=!0:y=!0;y?(h(E),E=zo(x)):w?(p(v),v=zo(m)):(v=zo(m),E=zo(x))}}(i,s,yi,a=>{o.push(this.Jn(e,n,r,a))},a=>{o.push(this.Hn(e,n,r,a))}),L.waitFor(o)}Wn(e){let n=1;return qo(e).X({index:oR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>yi(o,a)).filter((o,a,l)=>!a||yi(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=yi(o,e),l=yi(o,n);if(a===0)i[0]=e.En();else if(a>0&&l<0)i.push(o),i.push(o.En());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Yn(i[o],i[o+1]))return[];const a=i[o].Rn(this.uid,Xd,ee.empty()),l=i[o+1].Rn(this.uid,Xd,ee.empty());s.push(IDBKeyRange.bound(a,l))}return s}Yn(e,n){return yi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(HE)}getMinOffset(e,n){return L.mapArray(this.Fn(n),r=>this.Mn(e,r).next(i=>i||re(44426))).next(HE)}}function qE(t){return It(t,vu)}function Go(t){return It(t,jc)}function ic(t){return It(t,Rw)}function qo(t){return It(t,Vc)}function HE(t){oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Aw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pk=41943040;class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e,n){const r=t.store(tr),i=t.store(Ga),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},(d,h,p)=>(a++,p.delete()));s.push(l.next(()=>{oe(a===1,47070,{batchId:n.batchId})}));const c=[];for(const d of n.mutations){const h=rR(e,d.key.path,n.batchId);s.push(i.delete(h)),c.push(d.key)}return L.waitFor(s).next(()=>c)}function kf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw re(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(pk,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);class $p{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static yt(e,n,r,i){oe(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new $p(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vi(e).X({index:Gs,range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ta(e),o=vi(e);return o.add({}).next(a=>{oe(typeof a=="number",49019);const l=new Bw(a,n,r,i),c=function(m,x,v){const E=v.baseMutations.map(w=>Su(m.gt,w)),y=v.mutations.map(w=>Su(m.gt,w));return{userId:x,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:E,mutations:y}}(this.serializer,this.userId,l),d=[];let h=new Fe((p,m)=>de(p.canonicalString(),m.canonicalString()));for(const p of i){const m=rR(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(c)),d.push(s.put(m,m3))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Zn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return vi(e).get(n).next(r=>r?(oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ls(this.serializer,r)):null)}Xn(e,n){return this.Zn[n]?L.resolve(this.Zn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Zn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return vi(e).X({index:Gs,range:i},(o,a,l)=>{a.userId===this.userId&&(oe(a.batchId>=r,47524,{er:r}),s=Ls(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=qi;return vi(e).X({index:Gs,range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,qi],[this.userId,Number.POSITIVE_INFINITY]);return vi(e).j(Gs,n).next(r=>r.map(i=>Ls(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Ih(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ta(e).X({range:i},(o,a,l)=>{const[c,d,h]=o,p=vr(d);if(c===this.userId&&n.path.isEqual(p))return vi(e).get(h).next(m=>{if(!m)throw re(61480,{tr:o,batchId:h});oe(m.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:m.userId,batchId:h}),s.push(Ls(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(de);const i=[];return n.forEach(s=>{const o=Ih(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ta(e).X({range:a},(c,d,h)=>{const[p,m,x]=c,v=vr(m);p===this.userId&&s.path.isEqual(v)?r=r.add(x):h.done()});i.push(l)}),L.waitFor(i).next(()=>this.nr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Ih(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Fe(de);return ta(e).X({range:o},(l,c,d)=>{const[h,p,m]=l,x=vr(p);h===this.userId&&r.isPrefixOf(x)?x.length===i&&(a=a.add(m)):d.done()}).next(()=>this.nr(e,a))}nr(e,n){const r=[],i=[];return n.forEach(s=>{i.push(vi(e).get(s).next(o=>{if(o===null)throw re(35274,{batchId:s});oe(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Ls(this.serializer,o))}))}),L.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return mk(e.ce,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.rr(n.batchId)}),L.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ta(e).X({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=vr(s[1]);i.push(l)}else a.done()}).next(()=>{oe(i.length===0,56720,{ir:i.map(s=>s.canonicalString())})})})}containsKey(e,n){return gk(e,this.userId,n)}sr(e){return yk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:qi,lastStreamToken:""})}}function gk(t,e,n){const r=Ih(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ta(t).X({range:s,Z:!0},(a,l,c)=>{const[d,h,p]=a;d===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function vi(t){return It(t,tr)}function ta(t){return It(t,Ga)}function yk(t){return It(t,gu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fo(0)}static ur(){return new fo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.cr(e).next(n=>{const r=new fo(n.highestTargetId);return n.highestTargetId=r.next(),this.lr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.cr(e).next(n=>ae.fromTimestamp(new Me(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.cr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.cr(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.lr(e,i)))}addTargetData(e,n){return this.hr(e,n).next(()=>this.cr(e).next(r=>(r.targetCount+=1,this.Pr(n,r),this.lr(e,r))))}updateTargetData(e,n){return this.hr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ho(e).delete(n.targetId)).next(()=>this.cr(e)).next(r=>(oe(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ho(e).X((o,a)=>{const l=vc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ho(e).X((r,i)=>{const s=vc(i);n(s)})}cr(e){return QE(e).get(bf).next(n=>(oe(n!==null,2888),n))}lr(e,n){return QE(e).put(bf,n)}hr(e,n){return Ho(e).put(dk(this.serializer,n))}Pr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ao(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ho(e).X({range:i,index:sR},(o,a,l)=>{const c=vc(a);Wu(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Pi(e);return n.forEach(o=>{const a=Xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(i)}removeMatchingKeys(e,n,r){const i=Pi(e);return L.forEach(n,s=>{const o=Xt(s.path);return L.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Pi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Pi(e);let s=ye();return i.X({range:r,Z:!0},(o,a,l)=>{const c=vr(o[1]),d=new ee(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Xt(n.path),i=IDBKeyRange.bound([r],[KC(r)],!1,!0);let s=0;return Pi(e).X({index:Cw,Z:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}Et(e,n){return Ho(e).get(n).next(r=>r?vc(r):null)}}function Ho(t){return It(t,qa)}function QE(t){return It(t,Xs)}function Pi(t){return It(t,Ha)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="LruGarbageCollector",vk=1048576;function XE([t,e],[n,r]){const i=de(t,n);return i===0?de(e,r):i}class jB{constructor(e){this.Tr=e,this.buffer=new Fe(XE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class wk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Q(YE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ms(n)?Q(YE,"Ignoring IndexedDB error during garbage collection: ",n):await ps(n)}await this.Rr(3e5)})}}class MB{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(pn.ue);const r=new jB(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(KE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),Jo()<=Re.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function xk(t,e){return new MB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.db=e,this.garbageCollector=xk(this,n)}mr(e){const n=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}gr(e,n){return this.wr(e,(r,i)=>n(i))}addReference(e,n,r){return Jd(e,r)}removeReference(e,n,r){return Jd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Jd(e,n)}Sr(e,n){return function(i,s){let o=!1;return yk(i).ee(a=>gk(i,a,s).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.wr(e,(o,a)=>{if(a<=n){const l=this.Sr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Pi(e).delete(function(h){return[0,Xt(h.path)]}(o))))});i.push(l)}}).next(()=>L.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Jd(e,n)}wr(e,n){const r=Pi(e);let i,s=pn.ue;return r.X({index:Cw},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==pn.ue&&n(new ee(vr(i)),s),s=c,i=l):s=pn.ue}).next(()=>{s!==pn.ue&&n(new ee(vr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jd(t,e){return Pi(t).put(function(r,i){return{targetId:0,path:Xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ke.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ps(e).put(r)}removeEntry(e,n,r){return Ps(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Cf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.br(e,r)))}getEntry(e,n){let r=Ke.newInvalidDocument(n);return Ps(e).X({index:Ah,range:IDBKeyRange.only(sc(n))},(i,s)=>{r=this.Dr(n,s)}).next(()=>r)}vr(e,n){let r={size:0,document:Ke.newInvalidDocument(n)};return Ps(e).X({index:Ah,range:IDBKeyRange.only(sc(n))},(i,s)=>{r={document:this.Dr(n,s),size:kf(s)}}).next(()=>r)}getEntries(e,n){let r=gn();return this.Cr(e,n,(i,s)=>{const o=this.Dr(i,s);r=r.insert(i,o)}).next(()=>r)}Fr(e,n){let r=gn(),i=new We(ee.comparator);return this.Cr(e,n,(s,o)=>{const a=this.Dr(s,o);r=r.insert(s,a),i=i.insert(s,kf(o))}).next(()=>({documents:r,Mr:i}))}Cr(e,n,r){if(n.isEmpty())return L.resolve();let i=new Fe(eb);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(sc(i.first()),sc(i.last())),o=i.getIterator();let a=o.getNext();return Ps(e).X({index:Ah,range:s},(l,c,d)=>{const h=ee.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&eb(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.G(sc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Cf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ps(e).j(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=gn();for(const h of c){const p=this.Dr(ee.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(qu(n,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=gn();const o=ZE(n,r),a=ZE(n,jn.max());return Ps(e).X({index:iR,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const h=this.Dr(ee.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new FB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return JE(e).get(yv).next(n=>(oe(!!n,20021),n))}br(e,n){return JE(e).put(yv,n)}Dr(e,n){if(n){const r=bB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return Ke.newInvalidDocument(e)}}function Tk(t){return new LB(t)}class FB extends _k{constructor(e,n){super(),this.Or=e,this.trackRemovals=n,this.Nr=new ai(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Fe((s,o)=>de(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Nr.get(s);if(n.push(this.Or.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=jE(this.Or.serializer,o);i=i.add(s.path.popLast());const c=kf(l);r+=c-a.size,n.push(this.Or.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=jE(this.Or.serializer,o.convertToNoDocument(ae.min()));n.push(this.Or.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.Or.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.Or.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Or.vr(e,n).next(r=>(this.Nr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Or.Fr(e,n).next(({documents:r,Mr:i})=>(i.forEach((s,o)=>{this.Nr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function JE(t){return It(t,yu)}function Ps(t){return It(t,Ef)}function sc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ZE(t,e){const n=e.documentKey.path.toArray();return[t,Cf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=de(n[s],r[s]),i)return i;return i=de(n.length,r.length),i||(i=de(n[n.length-2],r[r.length-2]),i||de(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Lc(r.mutation,i,mn.empty(),Me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const i=wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=gc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gn();const o=Oc(),a=function(){return Oc()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof li)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Lc(d.mutation,c,d.mutation.getFieldMask(),Me.now())):o.set(c.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new BB(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Oc();let i=new We((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||mn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const h=(i.get(a.batchId)||ye()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,h=FR();d.forEach(p=>{if(!s.has(p)){const m=qR(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):L.resolve(wr());let a=Ua,l=s;return o.next(c=>L.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(d=>({batchId:a,changes:LR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=gc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=gc();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,l=>{const c=function(h,p){return new oi(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Ke.newInvalidDocument(d)))});let a=gc();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Lc(d.mutation,c,mn.empty(),Me.now()),qu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return L.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gt(i.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Fp(i.bundledQuery),readTime:gt(i.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(){this.overlays=new We(ee.comparator),this.kr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=wr();return L.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const i=wr(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return L.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=wr(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=wr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return L.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Uw(n,r));let s=this.kr.get(n);s===void 0&&(s=ye(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.qr=new Fe(At.Qr),this.$r=new Fe(At.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new At(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ee(new Ee([])),r=new At(n,e),i=new At(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ee(new Ee([])),r=new At(n,e),i=new At(n,e+1);let s=ye();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new At(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ee.comparator(e.key,n.key)||de(e.Hr,n.Hr)}static Ur(e,n){return de(e.Hr,n.Hr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Fe(At.Qr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Bw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new At(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?qi:this.er-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fe(de);return n.forEach(i=>{const s=new At(i,0),o=new At(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),L.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new At(new ee(s),0);let a=new Fe(de);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),L.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return L.forEach(n.mutations,i=>{const s=new At(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new At(n,0),i=this.Yr.firstAfterOrEqual(r);return L.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e){this.ni=e,this.docs=function(){return new We(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Ke.newInvalidDocument(n))}getEntries(e,n){let r=gn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ke.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gn();const o=n.path,a=new ee(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Aw(JC(d),r)<=0||(i.has(d.key)||qu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re(9500)}ri(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qB(this)}getSize(e){return L.resolve(this.size)}}class qB extends _k{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(e){this.persistence=e,this.ii=new ai(n=>ao(n),Wu),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Hw,this.targetCount=0,this._i=fo.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),L.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.hr(n),L.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n){this.ai={},this.overlays={},this.ui=new pn(0),this.ci=!1,this.ci=!0,this.li=new zB,this.referenceDelegate=e(this),this.hi=new HB(this),this.indexManager=new NB,this.remoteDocumentCache=function(i){return new GB(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new uk(n),this.Ti=new $B(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new WB(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new KB(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return L.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class KB extends eR{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ai=new Hw,this.Ri=null}static Vi(e){return new Up(e)}get mi(){if(this.Ri)return this.Ri;throw re(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.mi,r=>{const i=ee.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return L.or([()=>L.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nf{constructor(e,n){this.persistence=e,this.gi=new ai(r=>Xt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xk(this,n)}static Vi(e,n){return new Nf(e,n)}Ii(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return L.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?L.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),L.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ch(e.data.value)),n}Sr(e,n,r){return L.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e){this.serializer=e}q(e,n,r,i){const s=new Pp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(zu)}(e),function(l){l.createObjectStore(gu,{keyPath:p3}),l.createObjectStore(tr,{keyPath:dE,autoIncrement:!0}).createIndex(Gs,hE,{unique:!0}),l.createObjectStore(Ga)}(e),tb(e),function(l){l.createObjectStore(Vs)}(e));let o=L.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(Ha),l.deleteObjectStore(qa),l.deleteObjectStore(Xs)}(e),tb(e)),o=o.next(()=>function(l){const c=l.store(Xs),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return c.put(bf,d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store(tr).j().next(h=>{l.deleteObjectStore(tr),l.createObjectStore(tr,{keyPath:dE,autoIncrement:!0}).createIndex(Gs,hE,{unique:!0});const p=c.store(tr),m=h.map(x=>p.put(x));return L.waitFor(m)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore(Ka,{keyPath:E3})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.pi(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore(yu)}(e),this.yi(s)))),r<7&&i>=7&&(o=o.next(()=>this.wi(s))),r<8&&i>=8&&(o=o.next(()=>this.Si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.bi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(Cp,{keyPath:b3})})(e),function(l){l.createObjectStore(Rp,{keyPath:S3})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore(kp,{keyPath:N3});c.createIndex(wv,D3,{unique:!1}),c.createIndex(lR,V3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore(Ef,{keyPath:g3});c.createIndex(Ah,y3),c.createIndex(iR,v3)}(e)).next(()=>this.Di(e,s)).next(()=>e.deleteObjectStore(Vs))),r<14&&i>=14&&(o=o.next(()=>this.Ci(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore(Rw,{keyPath:I3,autoIncrement:!0}).createIndex(vv,A3,{unique:!1}),l.createObjectStore(Vc,{keyPath:P3}).createIndex(oR,C3,{unique:!1}),l.createObjectStore(jc,{keyPath:R3}).createIndex(aR,k3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore(Vc).clear()}).next(()=>{n.objectStore(jc).clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(kw,{keyPath:j3})})(e)})),r<18&&i>=18&&NC()&&(o=o.next(()=>{n.objectStore(Vc).clear()}).next(()=>{n.objectStore(jc).clear()})),o}yi(e){let n=0;return e.store(Vs).X((r,i)=>{n+=kf(i)}).next(()=>{const r={byteSize:n};return e.store(yu).put(yv,r)})}pi(e){const n=e.store(gu),r=e.store(tr);return n.j().next(i=>L.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,qi],[s.userId,s.lastAcknowledgedBatchId]);return r.j(Gs,o).next(a=>L.forEach(a,l=>{oe(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ls(this.serializer,l);return mk(e,s.userId,c).next(()=>{})}))}))}wi(e){const n=e.store(Ha),r=e.store(Vs);return e.store(Xs).get(bf).next(i=>{const s=[];return r.X((o,a)=>{const l=new Ee(o),c=function(h){return[0,Xt(h)]}(l);s.push(n.get(c).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(s))})}Si(e,n){e.createObjectStore(vu,{keyPath:T3});const r=n.store(vu),i=new qw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store(Vs).X({Z:!0},(o,a)=>{const l=new Ee(o);return s(l.popLast())}).next(()=>n.store(Ga).X({Z:!0},([o,a,l],c)=>{const d=vr(a);return s(d.popLast())}))}bi(e){const n=e.store(qa);return n.X((r,i)=>{const s=vc(i),o=dk(this.serializer,s);return n.put(o)})}Di(e,n){const r=n.store(Vs),i=[];return r.X((s,o)=>{const a=n.store(Ef),l=function(h){return h.document?new ee(Ee.fromString(h.document.name).popFirst(5)):h.noDocument?ee.fromSegments(h.noDocument.path):h.unknownDocument?ee.fromSegments(h.unknownDocument.path):re(36783)}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>L.waitFor(i))}Ci(e,n){const r=n.store(tr),i=Tk(this.serializer),s=new Kw(Up.Vi,this.serializer.gt);return r.j().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:ye();Ls(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),L.forEach(a,(l,c)=>{const d=new Ct(c),h=Bp.yt(this.serializer,d),p=s.getIndexManager(d),m=$p.yt(d,this.serializer,p,s.referenceDelegate);return new Ek(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new xv(n,pn.ue),l).next()})})}}function tb(t){t.createObjectStore(Ha,{keyPath:x3}).createIndex(Cw,_3,{unique:!0}),t.createObjectStore(qa,{keyPath:"targetId"}).createIndex(sR,w3,{unique:!0}),t.createObjectStore(Xs)}const wi="IndexedDbPersistence",Sg=18e5,Ig=5e3,Ag="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bk="main";class Qw{constructor(e,n,r,i,s,o,a,l,c,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fi=s,this.window=o,this.document=a,this.Mi=c,this.xi=d,this.Oi=h,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=p=>Promise.resolve(),!Qw.C())throw new H(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OB(this,i),this.Qi=n+bk,this.serializer=new uk(l),this.$i=new Er(this.Qi,this.Oi,new QB(this.serializer)),this.li=new IB,this.hi=new VB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Tk(this.serializer),this.Ti=new SB,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,d===!1&&mt(wi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H(F.FAILED_PRECONDITION,Ag);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.hi.getHighestSequenceNumber(e))}).then(e=>{this.ui=new pn(e,this.Mi)}).then(()=>{this.ci=!0}).catch(e=>(this.$i&&this.$i.close(),Promise.reject(e)))}ji(e){return this.qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget(async()=>{this.started&&await this.Ki()}))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ji(e).next(n=>{n||(this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)))})}).next(()=>this.Hi(e)).next(n=>this.isPrimary&&!n?this.Yi(e).next(()=>!1):!!n&&this.Zi(e).next(()=>!0))).catch(e=>{if(ms(e))return Q(wi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q(wi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable(()=>this.qi(e)),this.isPrimary=e})}Ji(e){return oc(e).get(Uo).next(n=>L.resolve(this.Xi(n)))}es(e){return Zd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,Sg)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=It(n,Ka);return r.j().next(i=>{const s=this.rs(i,Sg),o=i.filter(a=>s.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ui)for(const n of e)this.Ui.removeItem(this.ss(n.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ki().then(()=>this.ts()).then(()=>this.zi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?L.resolve(!0):oc(e).get(Uo).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,Ig)&&!this._s(n.ownerId)){if(this.Xi(n)&&this.networkEnabled)return!0;if(!this.Xi(n)){if(!n.allowTabSynchronization)throw new H(F.FAILED_PRECONDITION,Ag);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zd(e).j().next(r=>this.rs(r,Ig).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q(wi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[zu,Ka],e=>{const n=new xv(e,pn.ue);return this.Yi(n).next(()=>this.es(n))}),this.$i.close(),this.hs()}rs(e,n){return e.filter(r=>this.ns(r.updateTimeMs,n)&&!this._s(r.clientId))}Ps(){return this.runTransaction("getActiveClients","readonly",e=>Zd(e).j().next(n=>this.rs(n,Sg).map(r=>r.clientId)))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,n){return $p.yt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new DB(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return Bp.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,n,r){Q(wi,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===18?L3:l===17?hR:l===16?O3:l===15?Nw:l===14?dR:l===13?uR:l===12?M3:l===11?cR:void re(60245)}(this.Oi);let o;return this.$i.runTransaction(e,i,s,a=>(o=new xv(a,this.ui?this.ui.next():pn.ue),n==="readwrite-primary"?this.Ji(o).next(l=>!!l||this.Hi(o)).next(l=>{if(!l)throw mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable(()=>this.qi(!1)),new H(F.FAILED_PRECONDITION,ZC);return r(o)}).next(l=>this.Zi(o).next(()=>l)):this.Ts(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ts(e){return oc(e).get(Uo).next(n=>{if(n!==null&&this.ns(n.leaseTimestampMs,Ig)&&!this._s(n.ownerId)&&!this.Xi(n)&&!(this.xi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H(F.FAILED_PRECONDITION,Ag)})}Zi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put(Uo,n)}static C(){return Er.C()}Yi(e){const n=oc(e);return n.get(Uo).next(r=>this.Xi(r)?(Q(wi,"Releasing primary lease."),n.delete(Uo)):L.resolve())}ns(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki()))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const n=/(?:Version|Mobile)\/1[456]/;kC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var n;try{const r=((n=this.Ui)===null||n===void 0?void 0:n.getItem(this.ss(e)))!==null;return Q(wi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mt(wi,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){mt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oc(t){return It(t,zu)}function Zd(t){return It(t,Ka)}function Yw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ye(),i=ye();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Xw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return kC()?8:tR(vf())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new YB;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Jo()<=Re.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),L.resolve()):(Jo()<=Re.DEBUG&&Q("QueryEngine","Query:",Zo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Jo()<=Re.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(n))):L.resolve())}ps(e,n){if(SE(n))return L.resolve(null);let r=Jt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Af(n,null,"F"),r=Jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ye(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,Af(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,i){return SE(n)||i.isEqual(ae.min())?L.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?L.resolve(null):(Jo()<=Re.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zo(n)),this.vs(e,o,n,XC(i,Ua)).next(a=>a))})}bs(e,n){let r=new Fe(MR(e));return n.forEach((i,s)=>{qu(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Jo()<=Re.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Zo(n)),this.gs.getDocumentsMatchingQuery(e,n,jn.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="LocalStore",XB=3e8;class JB{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new We(de),this.Ms=new ai(s=>ao(s),Wu),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ek(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function Ik(t,e,n,r){return new JB(t,e,n,r)}async function Ak(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ye();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function ZB(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const h=c.batch,p=h.keys();let m=L.resolve();return p.forEach(x=>{m=m.next(()=>d.getEntry(l,x)).next(v=>{const E=c.docVersions.get(x);oe(E!==null,48541),v.version.compareTo(E)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Pk(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function e$(t,e){const n=te(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(ft.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(v,E,y){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=XB?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(p,m,d)&&a.push(n.hi.updateTargetData(s,m))});let l=gn(),c=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Ck(s,o,e.documentUpdates).next(d=>{l=d.Ls,c=d.ks})),!r.isEqual(ae.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(h=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function Ck(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ae.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q(Jw,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function t$(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qi),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tl(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function nl(t,e,n){const r=te(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ms(o))throw o;Q(Jw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Df(t,e,n){const r=te(t);let i=ae.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const h=te(l),p=h.Ms.get(d);return p!==void 0?L.resolve(h.Fs.get(p)):h.hi.getTargetData(c,d)}(r,o,Jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:ae.min(),n?s:ye())).next(a=>(Nk(r,jR(e),a),{documents:a,qs:s})))}function Rk(t,e){const n=te(t),r=te(n.hi),i=n.Fs.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.Et(s,e).next(o=>o?o.target:null))}function kk(t,e){const n=te(t),r=n.xs.get(e)||ae.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Os.getAllFromCollectionGroup(i,e,XC(r,Ua),Number.MAX_SAFE_INTEGER)).then(i=>(Nk(n,e,i),i))}function Nk(t,e,n){let r=t.xs.get(e)||ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}async function n$(t,e,n,r){const i=te(t);let s=ye(),o=gn();for(const c of n){const d=e.Qs(c.metadata.name);c.document&&(s=s.add(d));const h=e.$s(c);h.setReadTime(e.Us(c.metadata.readTime)),o=o.insert(d,h)}const a=i.Os.newChangeBuffer({trackRemovals:!0}),l=await tl(i,function(d){return Jt(vl(Ee.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Ck(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.hi.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.hi.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ls,d.ks)).next(()=>d.Ls)))}async function r$(t,e,n=ye()){const r=await tl(t,Jt(Fp(e.bundledQuery))),i=te(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=gt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ti.saveNamedQuery(s,e);const a=r.withResumeToken(ft.EMPTY_BYTE_STRING,o);return i.Fs=i.Fs.insert(a.targetId,a),i.hi.updateTargetData(s,a).next(()=>i.hi.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.hi.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ti.saveNamedQuery(s,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="firestore_clients";function nb(t,e){return`${Dk}_${t}_${e}`}const Vk="firestore_mutations";function rb(t,e,n){let r=`${Vk}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const jk="firestore_targets";function Pg(t,e){return`${jk}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="SharedClientState";class Vf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ks(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new H(i.error.code,i.error.message))),o?new Vf(e,n,i.state,s):(mt(mr,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fc{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ks(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new H(r.error.code,r.error.message))),s?new Fc(e,r.state,i):(mt(mr,`Failed to parse target state for ID '${e}': ${n}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ks(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Ow();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new jf(e,s):(mt(mr,`Failed to parse client data for instance '${e}': ${n}`),null)}}class Zw{constructor(e,n){this.clientId=e,this.onlineState=n}static Ks(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Zw(n.clientId,n.onlineState):(mt(mr,`Failed to parse online state: ${e}`),null)}}class Vv{constructor(){this.activeTargetIds=Ow()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cg{constructor(e,n,r,i,s){this.window=e,this.Fi=n,this.persistenceKey=r,this.js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new We(de),this.started=!1,this.Zs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Xs=nb(this.persistenceKey,this.js),this.eo=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Vv),this.no=new RegExp(`^${Dk}_${o}_([^_]*)$`),this.ro=new RegExp(`^${Vk}_${o}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${jk}_${o}_(\\d+)$`),this.so=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.oo=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const i=this.getItem(nb(this.persistenceKey,r));if(i){const s=jf.Ks(r,i);s&&(this.Ys=this.Ys.insert(s.clientId,s))}}this._o();const n=this.storage.getItem(this.so);if(n){const r=this.ao(n);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let n=!1;return this.Ys.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,n,r){this.lo(e,n,r),this.ho(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Pg(this.persistenceKey,e));if(i){const s=Fc.Ks(e,i);s&&(r=s.state)}}return n&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Pg(this.persistenceKey,e))}updateQueryState(e,n,r){this.To(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.ho(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Q(mr,"READ",e,n),n}setItem(e,n){Q(mr,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q(mr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const n=e;if(n.storageArea===this.storage){if(Q(mr,"EVENT",n.key,n.newValue),n.key===this.Xs)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.no.test(n.key)){if(n.newValue==null){const r=this.Ao(n.key);return this.Ro(r,null)}{const r=this.Vo(n.key,n.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(n.key)){if(n.newValue!==null){const r=this.mo(n.key,n.newValue);if(r)return this.fo(r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.po(n.key,n.newValue);if(r)return this.yo(r)}}else if(n.key===this.so){if(n.newValue!==null){const r=this.ao(n.newValue);if(r)return this.uo(r)}}else if(n.key===this.eo){const r=function(s){let o=pn.ue;if(s!=null)try{const a=JSON.parse(s);oe(typeof a=="number",30636,{wo:s}),o=a}catch(a){mt(mr,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==pn.ue&&this.sequenceNumberHandler(r)}else if(n.key===this.oo){const r=this.So(n.newValue);await Promise.all(r.map(i=>this.syncEngine.bo(i)))}}}else this.Zs.push(n)})}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,n,r){const i=new Vf(this.currentUser,e,n,r),s=rb(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Ws())}ho(e){const n=rb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Io(e){const n={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(n))}To(e,n,r){const i=Pg(this.persistenceKey,e),s=new Fc(e,n,r);this.setItem(i,s.Ws())}Eo(e){const n=JSON.stringify(Array.from(e));this.setItem(this.oo,n)}Ao(e){const n=this.no.exec(e);return n?n[1]:null}Vo(e,n){const r=this.Ao(e);return jf.Ks(r,n)}mo(e,n){const r=this.ro.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Vf.Ks(new Ct(s),i,n)}po(e,n){const r=this.io.exec(e),i=Number(r[1]);return Fc.Ks(i,n)}ao(e){return Zw.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);Q(mr,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,n){const r=n?this.Ys.insert(e,n):this.Ys.remove(e),i=this.co(this.Ys),s=this.co(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Co(o,a).then(()=>{this.Ys=r})}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let n=Ow();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class Mk{constructor(){this.Fo=new Vv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Vv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="ConnectivityMonitor";class sb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(ib,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Q(ib,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh=null;function jv(){return eh===null?eh=function(){return 268435456+Math.round(2147483648*Math.random())}():eh++,"0x"+eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="RestConnection",s$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o${get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===xu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=jv(),a=this.Go(e,n.toUriEncodedString());Q(Rg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(a),d=Ip(c);return this.jo(e,a,l,r,d).then(h=>(Q(Rg,`Received RPC '${e}' ${o}: `,h),h),h=>{throw an(Rg,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=s$[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class l$ extends o${constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=jv();return new Promise((a,l)=>{const c=new $C;c.setWithCredentials(!0),c.listenOnce(UC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sh.NO_ERROR:const h=c.getResponseJson();Q(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Sh.TIMEOUT:Q(qt,`RPC '${e}' ${o} timed out`),l(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const p=c.getStatus();if(Q(qt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const v=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(x.status);l(new H(v,x.message))}else l(new H(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new H(F.UNAVAILABLE,"Connection failed."));break;default:re(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{Q(qt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);Q(qt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}P_(e,n,r){const i=jv(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GC(),a=WC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Q(qt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.T_(h);let p=!1,m=!1;const x=new a$({Ho:E=>{m?Q(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(Q(qt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),Q(qt,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},Yo:()=>h.close()}),v=(E,y,w)=>{E.listen(y,T=>{try{w(T)}catch(C){setTimeout(()=>{throw C},0)}})};return v(h,mc.EventType.OPEN,()=>{m||(Q(qt,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),v(h,mc.EventType.CLOSE,()=>{m||(m=!0,Q(qt,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(h))}),v(h,mc.EventType.ERROR,E=>{m||(m=!0,an(qt,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),x.__(new H(F.UNAVAILABLE,"The operation could not be completed")))}),v(h,mc.EventType.MESSAGE,E=>{var y;if(!m){const w=E.data[0];oe(!!w,16349);const T=w,C=(T==null?void 0:T.error)||((y=T[0])===null||y===void 0?void 0:y.error);if(C){Q(qt,`RPC '${e}' stream ${i} received error:`,C);const D=C.status;let j=function(I){const P=yt[I];if(P!==void 0)return YR(P)}(D),A=C.message;j===void 0&&(j=F.INTERNAL,A="Unknown error status: "+D+" with message "+C.message),m=!0,x.__(new H(j,A)),h.close()}else Q(qt,`RPC '${e}' stream ${i} received:`,w),x.a_(w)}}),v(a,zC.STAT_EVENT,E=>{E.stat===hv.PROXY?Q(qt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===hv.NOPROXY&&Q(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(){return typeof window<"u"?window:null}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t){return new pB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class Lk{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ex(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(mt(n.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Q(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(Q(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c$ extends Lk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=yB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?gt(o.readTime):ae.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Cv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sf(l)?{documents:ik(s,l)}:{query:Lp(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZR(s,o.resumeToken);const c=Av(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=el(s,o.snapshotVersion.toTimestamp());const c=Av(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=wB(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Cv(this.serializer),n.removeTarget=e,this.k_(n)}}class u$ extends Lk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=vB(e.writeResults,e.commitTime),r=gt(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Cv(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Su(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${}class h$ extends d${constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Pv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(F.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,Pv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class f${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(mt(n),this._a=!1):Q("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class p${constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{ys(this)&&(Q(po,"Restarting streams for network reachability change."),await async function(l){const c=te(l);c.Ia.add(4),await _l(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Yu(c)}(this))})}),this.Aa=new f$(r,i)}}async function Yu(t){if(ys(t))for(const e of t.da)await e(!0)}async function _l(t){for(const e of t.da)await e(!1)}function zp(t,e){const n=te(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),rx(n)?nx(n):El(n).x_()&&tx(n,e))}function rl(t,e){const n=te(t),r=El(n);n.Ta.delete(e),r.x_()&&Fk(n,e),n.Ta.size===0&&(r.x_()?r.B_():ys(n)&&n.Aa.set("Unknown"))}function tx(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}El(t).H_(e)}function Fk(t,e){t.Ra.$e(e),El(t).Y_(e)}function nx(t){t.Ra=new uB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),El(t).start(),t.Aa.aa()}function rx(t){return ys(t)&&!El(t).M_()&&t.Ta.size>0}function ys(t){return te(t).Ia.size===0}function Bk(t){t.Ra=void 0}async function m$(t){t.Aa.set("Online")}async function g$(t){t.Ta.forEach((e,n)=>{tx(t,e)})}async function y$(t,e){Bk(t),rx(t)?(t.Aa.la(e),nx(t)):t.Aa.set("Unknown")}async function v$(t,e,n){if(t.Aa.set("Online"),e instanceof JR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){Q(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mf(t,r)}else if(e instanceof Nh?t.Ra.Ye(e):e instanceof XR?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ae.min()))try{const r=await Pk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ta.get(c);d&&s.Ta.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.Ta.get(l);if(!d)return;s.Ta.set(l,d.withResumeToken(ft.EMPTY_BYTE_STRING,d.snapshotVersion)),Fk(s,l);const h=new zr(d.target,l,c,d.sequenceNumber);tx(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q(po,"Failed to raise snapshot:",r),await Mf(t,r)}}async function Mf(t,e,n){if(!ms(e))throw e;t.Ia.add(1),await _l(t),t.Aa.set("Offline"),n||(n=()=>Pk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q(po,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Yu(t)})}function $k(t,e){return e().catch(n=>Mf(t,n,e))}async function Tl(t){const e=te(t),n=is(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:qi;for(;w$(e);)try{const i=await t$(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,x$(e,i)}catch(i){await Mf(e,i)}Uk(e)&&zk(e)}function w$(t){return ys(t)&&t.Pa.length<10}function x$(t,e){t.Pa.push(e);const n=is(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Uk(t){return ys(t)&&!is(t).M_()&&t.Pa.length>0}function zk(t){is(t).start()}async function _$(t){is(t).na()}async function T$(t){const e=is(t);for(const n of t.Pa)e.X_(n.mutations)}async function E$(t,e,n){const r=t.Pa.shift(),i=$w.from(r,e,n);await $k(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tl(t)}async function b$(t,e){e&&is(t).Z_&&await async function(r,i){if(function(o){return QR(o)&&o!==F.ABORTED}(i.code)){const s=r.Pa.shift();is(r).N_(),await $k(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tl(r)}}(t,e),Uk(t)&&zk(t)}async function ab(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),Q(po,"RemoteStore received new credentials");const r=ys(n);n.Ia.add(3),await _l(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Yu(n)}async function Mv(t,e){const n=te(t);e?(n.Ia.delete(2),await Yu(n)):e||(n.Ia.add(2),await _l(n),n.Aa.set("Unknown"))}function El(t){return t.Va||(t.Va=function(n,r,i){const s=te(n);return s.ia(),new c$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:m$.bind(null,t),e_:g$.bind(null,t),n_:y$.bind(null,t),J_:v$.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),rx(t)?nx(t):t.Aa.set("Unknown")):(await t.Va.stop(),Bk(t))})),t.Va}function is(t){return t.ma||(t.ma=function(n,r,i){const s=te(n);return s.ia(),new u$(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:_$.bind(null,t),n_:b$.bind(null,t),ea:T$.bind(null,t),ta:E$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Tl(t)):(await t.ma.stop(),t.Pa.length>0&&(Q(po,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new ix(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bl(t,e){if(mt("AsyncQueue",`${e}: ${t}`),ms(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{static emptySet(e){return new Js(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=gc(),this.sortedSet=new We(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.fa=new We(ee.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):re(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class mo{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new mo(e,n,Js.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class I${constructor(){this.queries=cb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=te(n),s=i.queries;i.queries=cb(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function cb(){return new ai(t=>VR(t),Gu)}async function sx(t,e){const n=te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new S$,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=bl(o,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&ax(n)}async function ox(t,e){const n=te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function A$(t,e){const n=te(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&ax(n)}function P$(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function ax(t){t.Da.forEach(e=>{e.next()})}var Ov,ub;(ub=Ov||(Ov={})).Fa="default",ub.Cache="cache";class lx{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ov.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.qa=e,this.byteLength=n}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.serializer=e}Qs(e){return br(this.serializer,e)}$s(e){return e.metadata.exists?Op(this.serializer,e.document,!1):Ke.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return gt(e)}}class cx{constructor(e,n){this.$a=e,this.serializer=n,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=Gk(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++n;const r=Ee.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ga(e){const n=new Map,r=new db(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Qs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ye()).add(s);n.set(o,a)}}return n}async za(e){const n=await n$(e,new db(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const i of this.Ua)await r$(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:n}}}function Gk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.key=e}}class Hk{constructor(e){this.key=e}}class Kk{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ye(),this.mutatedKeys=ye(),this.Xa=MR(e),this.eu=new Js(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new lb,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),m=qu(this.query,h)?h:null,x=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;p&&m?p.data.isEqual(m.data)?x!==v&&(r.track({type:3,doc:m}),E=!0):this.iu(p,m)||(r.track({type:2,doc:m}),E=!0,(l&&this.Xa(m,l)>0||c&&this.Xa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(l||c)&&(a=!0)),E&&(m?(o=o.add(m),s=v?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,h)=>function(m,x){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{At:E})}};return v(m)-v(x)}(d.type,h.type)||this.Xa(d.doc,h.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new mo(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ye(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Hk(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new qk(r))}),n}uu(e){this.Ha=e.qs,this.Za=ye();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return mo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const vs="SyncEngine";class C${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R${constructor(e){this.key=e,this.lu=!1}}class k${constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ai(a=>VR(a),Gu),this.Tu=new Map,this.Iu=new Set,this.du=new We(ee.comparator),this.Eu=new Map,this.Au=new Hw,this.Ru={},this.Vu=new Map,this.mu=fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function N$(t,e,n=!0){const r=Wp(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await Qk(r,e,n,!0),i}async function D$(t,e){const n=Wp(t);await Qk(n,e,!0,!1)}async function Qk(t,e,n,r){const i=await tl(t.localStore,Jt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ux(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zp(t.remoteStore,i),a}async function ux(t,e,n,r,i){t.gu=(h,p,m)=>async function(v,E,y,w){let T=E.view.nu(y);T.Ds&&(T=await Df(v.localStore,E.query,!1).then(({documents:A})=>E.view.nu(A,T)));const C=w&&w.targetChanges.get(E.targetId),D=w&&w.targetMismatches.get(E.targetId)!=null,j=E.view.applyChanges(T,v.isPrimaryClient,C,D);return Lv(v,E.targetId,j._u),j.snapshot}(t,h,p,m);const s=await Df(t.localStore,e,!0),o=new Kk(e,s.qs),a=o.nu(s.documents),l=Qu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Lv(t,n,c._u);const d=new C$(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function V$(t,e,n){const r=te(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Gu(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rl(r.remoteStore,i.targetId),il(r,i.targetId)}).catch(ps)):(il(r,i.targetId),await nl(r.localStore,i.targetId,!0))}async function j$(t,e){const n=te(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rl(n.remoteStore,r.targetId))}async function M$(t,e,n){const r=px(t);try{const i=await function(o,a){const l=te(o),c=Me.now(),d=a.reduce((m,x)=>m.add(x.key),ye());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let x=gn(),v=ye();return l.Os.getEntries(m,d).next(E=>{x=E,x.forEach((y,w)=>{w.isValidDocument()||(v=v.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,x)).next(E=>{h=E;const y=[];for(const w of a){const T=aB(w,h.get(w.key).overlayedDocument);T!=null&&y.push(new li(w.key,T,ER(T.value.mapValue),nt.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,y,a)}).next(E=>{p=E;const y=E.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(m,E.batchId,y)})}).then(()=>({batchId:p.batchId,changes:LR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new We(de)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await ci(r,i.changes),await Tl(r.remoteStore)}catch(i){const s=bl(i,"Failed to persist write");n.reject(s)}}async function Yk(t,e){const n=te(t);try{const r=await e$(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?oe(o.lu,14607):i.removedDocuments.size>0&&(oe(o.lu,42227),o.lu=!1))}),await ci(n,r,e)}catch(r){await ps(r)}}function hb(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((d,h)=>{for(const p of h.wa)p.va(a)&&(c=!0)}),c&&ax(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O$(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new We(ee.comparator);o=o.insert(s,Ke.newNoDocument(s,ae.min()));const a=ye().add(s),l=new Ku(ae.min(),new Map,new We(de),o,a);await Yk(r,l),r.du=r.du.remove(s),r.Eu.delete(e),fx(r)}else await nl(r.localStore,e,!1).then(()=>il(r,e,n)).catch(ps)}async function L$(t,e){const n=te(t),r=e.batch.batchId;try{const i=await ZB(n.localStore,e);hx(n,r,null),dx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ci(n,i)}catch(i){await ps(i)}}async function F$(t,e,n){const r=te(t);try{const i=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(oe(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);hx(r,e,n),dx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ci(r,i)}catch(i){await ps(i)}}async function B$(t,e){const n=te(t);ys(n.remoteStore)||Q(vs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=te(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===qi)return void e.resolve();const i=n.Vu.get(r)||[];i.push(e),n.Vu.set(r,i)}catch(r){const i=bl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function dx(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function hx(t,e,n){const r=te(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function il(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||Xk(t,r)})}function Xk(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(rl(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),fx(t))}function Lv(t,e,n){for(const r of n)r instanceof qk?(t.Au.addReference(r.key,e),$$(t,r)):r instanceof Hk?(Q(vs,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||Xk(t,r.key)):re(19791,{yu:r})}function $$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Q(vs,"New document in limbo: "+n),t.Iu.add(r),fx(t))}function fx(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ee(Ee.fromString(e)),r=t.mu.next();t.Eu.set(r,new R$(n)),t.du=t.du.insert(n,r),zp(t.remoteStore,new zr(Jt(vl(n.path)),r,"TargetPurposeLimboResolution",pn.ue))}}async function ci(t,e,n){const r=te(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Xw.Es(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,c){const d=te(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(c,p=>L.forEach(p.Is,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>L.forEach(p.ds,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!ms(h))throw h;Q(Jw,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=d.Fs.get(p),x=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(x);d.Fs=d.Fs.insert(p,v)}}}(r.localStore,s))}async function U$(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){Q(vs,"User change. New user:",e.toKey());const r=await Ak(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new H(F.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ci(n,r.Bs)}}function z$(t,e){const n=te(t),r=n.Eu.get(e);if(r&&r.lu)return ye().add(r.key);{let i=ye();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}async function W$(t,e){const n=te(t),r=await Df(n.localStore,e.query,!0),i=e.view.uu(r);return n.isPrimaryClient&&Lv(n,e.targetId,i._u),i}async function G$(t,e){const n=te(t);return kk(n.localStore,e).then(r=>ci(n,r))}async function q$(t,e,n,r){const i=te(t),s=await function(a,l){const c=te(a),d=te(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Xn(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):L.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Tl(i.remoteStore):n==="acknowledged"||n==="rejected"?(hx(i,e,r||null),dx(i,e),function(a,l){te(te(a).mutationQueue).rr(l)}(i.localStore,e)):re(6720,"Unknown batchState",{wu:n}),await ci(i,s)):Q(vs,"Cannot apply mutation batch with id: "+e)}async function H$(t,e){const n=te(t);if(Wp(n),px(n),e===!0&&n.fu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await fb(n,r.toArray());n.fu=!0,await Mv(n.remoteStore,!0);for(const s of i)zp(n.remoteStore,s)}else if(e===!1&&n.fu!==!1){const r=[];let i=Promise.resolve();n.Tu.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(il(n,o),nl(n.localStore,o,!0))),rl(n.remoteStore,o)}),await i,await fb(n,r),function(o){const a=te(o);a.Eu.forEach((l,c)=>{rl(a.remoteStore,c)}),a.Au.jr(),a.Eu=new Map,a.du=new We(ee.comparator)}(n),n.fu=!1,await Mv(n.remoteStore,!1)}}async function fb(t,e,n){const r=te(t),i=[],s=[];for(const o of e){let a;const l=r.Tu.get(o);if(l&&l.length!==0){a=await tl(r.localStore,Jt(l[0]));for(const c of l){const d=r.Pu.get(c),h=await W$(r,d);h.snapshot&&s.push(h.snapshot)}}else{const c=await Rk(r.localStore,o);a=await tl(r.localStore,c),await ux(r,Jk(c),o,!1,a.resumeToken)}i.push(a)}return r.hu.J_(s),i}function Jk(t){return kR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function K$(t){return function(n){return te(te(n).persistence).Ps()}(te(t).localStore)}async function Q$(t,e,n,r){const i=te(t);if(i.fu)return void Q(vs,"Ignoring unexpected query state notification.");const s=i.Tu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await kk(i.localStore,jR(s[0])),a=Ku.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ft.EMPTY_BYTE_STRING);await ci(i,o,a);break}case"rejected":await nl(i.localStore,e,!0),il(i,e,r);break;default:re(64155,n)}}async function Y$(t,e,n){const r=Wp(t);if(r.fu){for(const i of e){if(r.Tu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Q(vs,"Adding an already active target "+i);continue}const s=await Rk(r.localStore,i),o=await tl(r.localStore,s);await ux(r,Jk(s),o.targetId,!1,o.resumeToken),zp(r.remoteStore,o)}for(const i of n)r.Tu.has(i)&&await nl(r.localStore,i,!1).then(()=>{rl(r.remoteStore,i),il(r,i)}).catch(ps)}}function Wp(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O$.bind(null,e),e.hu.J_=A$.bind(null,e.eventManager),e.hu.pu=P$.bind(null,e.eventManager),e}function px(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F$.bind(null,e),e}function X$(t,e,n){const r=te(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,x){const v=te(m),E=gt(x.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",y=>v.Ti.getBundleMetadata(y,x.id)).then(y=>!!y&&y.createTime.compareTo(E)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Gk(l));const c=new cx(l,o.serializer);let d=await o.Su();for(;d;){const p=await c.Wa(d);p&&a._updateProgress(p),d=await o.Su()}const h=await c.za(s.localStore);return await ci(s,h.Ja,void 0),await function(m,x){const v=te(m);return v.persistence.runTransaction("Save bundle","readwrite",E=>v.Ti.saveBundleMetadata(E,x))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ja)}catch(l){return an(vs,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class sl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ro(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return Ik(this.persistence,new Sk,e.initialUser,this.serializer)}Du(e){return new Kw(Up.Vi,this.serializer)}bu(e){return new Mk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sl.provider={build:()=>new sl};class mx extends sl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){oe(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new wk(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Kw(r=>Nf.Vi(r,n),this.serializer)}}class gx extends sl{constructor(e,n,r){super(),this.Mu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await px(this.Mu.syncEngine),await Tl(this.Mu.remoteStore),await this.persistence.ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Ik(this.persistence,new Sk,e.initialUser,this.serializer)}Cu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new wk(r,e.asyncQueue,n)}Fu(e,n){const r=new h3(n,this.persistence);return new d3(e.asyncQueue,r)}Du(e){const n=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Qw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Ok(),Vh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Mk}}class Zk extends gx{constructor(e,n){super(e,n,!1),this.Mu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Mu.syncEngine;this.sharedClientState instanceof Cg&&(this.sharedClientState.syncEngine={Do:q$.bind(null,n),vo:Q$.bind(null,n),Co:Y$.bind(null,n),Ps:K$.bind(null,n),bo:G$.bind(null,n)},await this.sharedClientState.start()),await this.persistence.ji(async r=>{await H$(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}bu(e){const n=Ok();if(!Cg.C(n))throw new H(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Cg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ss{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U$.bind(null,this.syncEngine),await Mv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I$}()}createDatastore(e){const n=Ro(e.databaseInfo.databaseId),r=function(s){return new l$(s)}(e.databaseInfo);return function(s,o,a,l){return new h$(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new p$(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hb(this.syncEngine,n,0),function(){return sb.C()?new sb:new i$}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const h=new k$(i,s,o,a,l,c);return d&&(h.fu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=te(i);Q(po,"RemoteStore shutting down."),s.Ia.add(5),await _l(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ss.provider={build:()=>new ss};function pb(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):mt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n){this.Nu=e,this.serializer=n,this.metadata=new kt,this.buffer=new Uint8Array,this.Bu=function(){return new TextDecoder("utf-8")}(),this.Lu().then(r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))},r=>this.metadata.reject(r))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const n=this.Bu.decode(e),r=Number(n);isNaN(r)&&this.qu(`length string (${n}) is not valid number`);const i=await this.Qu(r);return new Wk(JSON.parse(i),e.length+r)}$u(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const n=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n){this.bundleData=e,this.serializer=n,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),n=this.Qu(e);return new Wk(JSON.parse(n),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new H(F.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let n=this.cursor;for(;n<this.bundleData.length;){if(this.bundleData[n]==="{"){if(n===e)throw new Error("First character is a bracket and not a number");return this.cursor=n,Number(this.bundleData.slice(e,n))}n++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=te(i),a={documents:s.map(h=>bu(o.serializer,h))},l=await o.Jo("BatchGetDocuments",o.serializer.databaseId,Ee.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=gB(o.serializer,h);c.set(p.key.toString(),p)});const d=[];return s.forEach(h=>{const p=c.get(h.toString());oe(!!p,55234,{key:h}),d.push(p)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=ee.fromPath(r);this.mutations.push(new Fw(i,this.precondition(i)))}),await async function(r,i){const s=te(r),o={writes:i.map(a=>Su(s.serializer,a))};await s.Wo("Commit",s.serializer.databaseId,Ee.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw re(50498,{Wu:e.constructor.name});n=ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new H(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ae.min())?nt.exists(!1):nt.updateTime(n):nt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ae.min()))throw new H(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(n)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Gu=r.maxAttempts,this.F_=new ex(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new e9(this.datastore),n=this.Ju(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Hu(i)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const n=this.updateFunction(e);return!Uu(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!QR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class n9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=Sw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q(os,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q(os,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kg(t,e){t.asyncQueue.verifyOperationInProgress(),Q(os,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ak(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{an("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{an("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function mb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yx(t);Q(os,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ab(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ab(e.remoteStore,i)),t._onlineComponents=e}async function yx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q(os,"Using user provided OfflineComponentProvider");try{await kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;an("Error using user provided cache. Falling back to memory cache: "+n),await kg(t,new sl)}}else Q(os,"Using default OfflineComponentProvider"),await kg(t,new mx(void 0));return t._offlineComponents}async function qp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q(os,"Using user provided OnlineComponentProvider"),await mb(t,t._uninitializedComponentsProvider._online)):(Q(os,"Using default OnlineComponentProvider"),await mb(t,new ss))),t._onlineComponents}function eN(t){return yx(t).then(e=>e.persistence)}function Sl(t){return yx(t).then(e=>e.localStore)}function tN(t){return qp(t).then(e=>e.remoteStore)}function vx(t){return qp(t).then(e=>e.syncEngine)}function nN(t){return qp(t).then(e=>e.datastore)}async function ol(t){const e=await qp(t),n=e.eventManager;return n.onListen=N$.bind(null,e.syncEngine),n.onUnlisten=V$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j$.bind(null,e.syncEngine),n}function r9(t){return t.asyncQueue.enqueue(async()=>{const e=await eN(t),n=await tN(t);return e.setNetworkEnabled(!0),function(i){const s=te(i);return s.Ia.delete(0),Yu(s)}(n)})}function i9(t){return t.asyncQueue.enqueue(async()=>{const e=await eN(t),n=await tN(t);return e.setNetworkEnabled(!1),async function(i){const s=te(i);s.Ia.add(0),await _l(s),s.Aa.set("Offline")}(n)})}function s9(t,e){const n=new kt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,d){const h=te(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new H(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=bl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Sl(t),e,n)),n.promise}function rN(t,e,n={}){const r=new kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Gp({next:p=>{d.Ou(),o.enqueueAndForget(()=>ox(s,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new lx(vl(a.path),d,{includeMetadataChanges:!0,ka:!0});return sx(s,h)}(await ol(t),t.asyncQueue,e,n,r)),r.promise}function o9(t,e){const n=new kt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Df(i,s,!0),l=new Kk(s,a.qs),c=l.nu(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=bl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Sl(t),e,n)),n.promise}function iN(t,e,n={}){const r=new kt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Gp({next:p=>{d.Ou(),o.enqueueAndForget(()=>ox(s,h)),p.fromCache&&l.source==="server"?c.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new lx(a,d,{includeMetadataChanges:!0,ka:!0});return sx(s,h)}(await ol(t),t.asyncQueue,e,n,r)),r.promise}function a9(t,e,n){const r=new kt;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await nN(t);r.resolve(async function(o,a,l){var c;const d=te(o),{request:h,ft:p,parent:m}=sk(d.serializer,NR(a),l);d.connection.Qo||delete h.parent;const x=(await d.Jo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(E=>!!E.result);oe(x.length===1,64727);const v=(c=x[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(v).reduce((E,y)=>(E[p[y]]=v[y],E),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}function l9(t,e){const n=new Gp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){te(i).Da.add(s),s.next()}(await ol(t),n)),()=>{n.Ou(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){te(i).Da.delete(s)}(await ol(t),n))}}function c9(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?bw().encode(o):o,function(d,h){return new J$(d,h)}(function(d,h){if(d instanceof Uint8Array)return pb(d,h);if(d instanceof ArrayBuffer)return pb(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Ro(e));t.asyncQueue.enqueueAndForget(async()=>{X$(await vx(t),i,r)})}function u9(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=te(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Ti.getNamedQuery(o,i))}(await Sl(t),e))}function sN(t,e){return function(r,i){return new Z$(r,i)}(t,e)}function d9(t,e){return t.asyncQueue.enqueue(async()=>async function(r,i){const s=te(r),o=s.indexManager,a=[];return s.persistence.runTransaction("Configure indexes","readwrite",l=>o.getFieldIndexes(l).next(c=>function(h,p,m,x,v){h=[...h],p=[...p],h.sort(m),p.sort(m);const E=h.length,y=p.length;let w=0,T=0;for(;w<y&&T<E;){const C=m(h[T],p[w]);C<0?v(h[T++]):C>0?x(p[w++]):(w++,T++)}for(;w<y;)x(p[w++]);for(;T<E;)v(h[T++])}(c,i,a3,d=>{a.push(o.addFieldIndex(l,d))},d=>{a.push(o.deleteFieldIndex(l,d))})).next(()=>L.waitFor(a)))}(await Sl(t),e))}function h9(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){te(r).Cs.Rs=i}(await Sl(t),e))}function f9(t){return t.asyncQueue.enqueue(async()=>function(n){const r=te(n),i=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",s=>i.deleteAllFieldIndexes(s))}(await Sl(t)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firestore.googleapis.com",yb=!0;class vb{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aN,this.ssl=yb}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vk)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new X5;switch(r.type){case"firstParty":return new t3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gb.get(n);r&&(Q("ComponentProvider","Removing Datastore"),gb.delete(n),r.terminate())}(this),Promise.resolve()}}function p9(t,e,n,r={}){var i;t=be(t,Xu);const s=Ip(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(CC(`https://${l}`),N6("Firestore",!0)),o.host!==aN&&o.host!==l&&an("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Zi(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Ct.MOCK_USER;else{d=C6(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ct(p)}t._authCredentials=new J5(new HC(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nt(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Co(n,Be._jsonSchema))return new Be(e,r||null,new ee(Ee.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:xt("string",Be._jsonSchemaVersion),referencePath:xt("string")};class Sr extends Nt{constructor(e,n,r){super(e,n,vl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new ee(e))}withConverter(e){return new Sr(this.firestore,e,this._path)}}function Nr(t,e,...n){if(t=St(t),Iw("collection","path",e),t instanceof Xu){const r=Ee.fromString(e,...n);return oE(r),new Sr(t,null,r)}{if(!(t instanceof Be||t instanceof Sr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return oE(r),new Sr(t.firestore,null,r)}}function JQ(t,e){if(t=be(t,Xu),Iw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Nt(t,null,function(r){return new oi(Ee.emptyPath(),r)}(e))}function ln(t,e,...n){if(t=St(t),arguments.length===1&&(e=Sw.newId()),Iw("doc","path",e),t instanceof Xu){const r=Ee.fromString(e,...n);return sE(r),new Be(t,null,new ee(r))}{if(!(t instanceof Be||t instanceof Sr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return sE(r),new Be(t.firestore,t instanceof Sr?t.converter:null,new ee(r))}}function ZQ(t,e){return t=St(t),e=St(e),(t instanceof Be||t instanceof Sr)&&(e instanceof Be||e instanceof Sr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function lN(t,e){return t=St(t),e=St(e),t instanceof Nt&&e instanceof Nt&&t.firestore===e.firestore&&Gu(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="AsyncQueue";class xb{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ex(this,"async_queue_retry"),this.oc=()=>{const r=Vh();r&&Q(wb,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Vh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new kt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ms(e))throw e;Q(wb,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,mt("INTERNAL UNHANDLED ERROR: ",_b(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=ix.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&re(47125,{hc:_b(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function _b(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class m9{constructor(){this._progressObserver={},this._taskCompletionResolver=new kt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=-1;class Ue extends Xu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xb,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xb(e),this._firestoreClient=void 0,await e}}}function tY(t,e,n){n||(n=xu);const r=_w(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Zi(s,e))return i;throw new H(F.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new H(F.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vk)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ip(e.host)&&CC(e.host),r.initialize({options:e,instanceIdentifier:n})}function cN(t,e){const n=typeof t=="object"?t:L5(),r=typeof t=="string"?t:e||xu,i=_w(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=A6("firestore");s&&p9(i,...s)}return i}function ct(t){if(t._terminated)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uN(t),t._firestoreClient}function uN(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new B3(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,oN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new n9(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function nY(t,e){an("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return dN(t,ss.provider,{build:r=>new gx(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function rY(t){an("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();dN(t,ss.provider,{build:n=>new Zk(n,e.cacheSizeBytes)})}function dN(t,e,n){if((t=be(t,Ue))._firestoreClient||t._terminated)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new H(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},uN(t)}function iY(t){if(t._initialized&&!t._terminated)throw new H(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Er.C())return Promise.resolve();const i=r+bk;await Er.delete(i)}(Yw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function sY(t){return function(n){const r=new kt;return n.asyncQueue.enqueueAndForget(async()=>B$(await vx(n),r)),r.promise}(ct(t=be(t,Ue)))}function oY(t){return r9(ct(t=be(t,Ue)))}function aY(t){return i9(ct(t=be(t,Ue)))}function lY(t){return D5(t.app,"firestore",t._databaseId.database),t._delete()}function Tb(t,e){const n=ct(t=be(t,Ue)),r=new m9;return c9(n,t._databaseId,e,r),r}function g9(t,e){return u9(ct(t=be(t,Ue)),e).then(n=>n?new Nt(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class y9{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pn(ft.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pn(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Co(e,Pn._jsonSchema))return Pn.fromBase64String(e.bytes)}}Pn._jsonSchemaVersion="firestore/bytes/1.0",Pn._jsonSchema={type:xt("string",Pn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function cY(){return new ko(mv)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ir._jsonSchemaVersion}}static fromJSON(e){if(Co(e,Ir._jsonSchema))return new Ir(e.latitude,e.longitude)}}Ir._jsonSchemaVersion="firestore/geoPoint/1.0",Ir._jsonSchema={type:xt("string",Ir._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Co(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new or(e.vectorValues);throw new H(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:xt("string",or._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=/^__.*__$/;class w9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new wl(e,this.data,n,this.fieldTransforms)}}class hN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new li(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ec:t})}}class Hp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Hp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Of(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(fN(this.Ec)&&v9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class x9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ro(e)}Dc(e,n,r,i=!1){return new Hp({Ec:e,methodName:n,bc:r,path:tt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Do(t){const e=t._freezeSettings(),n=Ro(t._databaseId);return new x9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Kp(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);Sx("Data must be an object, but it was:",o,r);const a=gN(r,o);let l,c;if(s.merge)l=new mn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const p=Au(e,h,n);if(!o.contains(p))throw new H(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vN(d,p)||d.push(p)}l=new mn(d),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new w9(new Mt(a),l,c)}class Ju extends No{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ju}}function pN(t,e,n){return new Hp({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wx extends No{_toFieldTransform(e){return new Hu(e.path,new Ja)}isEqual(e){return e instanceof wx}}class xx extends No{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pN(this,e,!0),r=this.vc.map(s=>Vo(s,n)),i=new lo(r);return new Hu(e.path,i)}isEqual(e){return e instanceof xx&&Zi(this.vc,e.vc)}}class _x extends No{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=pN(this,e,!0),r=this.vc.map(s=>Vo(s,n)),i=new co(r);return new Hu(e.path,i)}isEqual(e){return e instanceof _x&&Zi(this.vc,e.vc)}}class Tx extends No{constructor(e,n){super(e),this.Cc=n}_toFieldTransform(e){const n=new Za(e.serializer,$R(e.serializer,this.Cc));return new Hu(e.path,n)}isEqual(e){return e instanceof Tx&&this.Cc===e.Cc}}function Ex(t,e,n,r){const i=t.Dc(1,e,n);Sx("Data must be an object, but it was:",i,r);const s=[],o=Mt.empty();gs(r,(l,c)=>{const d=Qp(e,l,n);c=St(c);const h=i.gc(d);if(c instanceof Ju)s.push(d);else{const p=Vo(c,h);p!=null&&(s.push(d),o.set(d,p))}});const a=new mn(s);return new hN(o,a,i.fieldTransforms)}function bx(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[Au(e,r,n)],l=[i];if(s.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Au(e,s[p])),l.push(s[p+1]);const c=[],d=Mt.empty();for(let p=a.length-1;p>=0;--p)if(!vN(c,a[p])){const m=a[p];let x=l[p];x=St(x);const v=o.gc(m);if(x instanceof Ju)c.push(m);else{const E=Vo(x,v);E!=null&&(c.push(m),d.set(m,E))}}const h=new mn(c);return new hN(d,h,o.fieldTransforms)}function mN(t,e,n,r=!1){return Vo(n,t.Dc(r?4:3,e))}function Vo(t,e){if(yN(t=St(t)))return Sx("Unsupported field value:",e,t),gN(t,e);if(t instanceof No)return function(r,i){if(!fN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Vo(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $R(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Me.fromDate(r);return{timestampValue:el(i.serializer,s)}}if(r instanceof Me){const s=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:el(i.serializer,s)}}if(r instanceof Ir)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:ZR(i.serializer,r._byteString)};if(r instanceof Be){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ww(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof or)return function(o,a){return{mapValue:{fields:{[Dw]:{stringValue:Vw},[Qa]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return Lw(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Ap(r)}`)}(t,e)}function gN(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gs(t,(r,i)=>{const s=Vo(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function yN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof Ir||t instanceof Pn||t instanceof Be||t instanceof No||t instanceof or)}function Sx(t,e,n){if(!yN(n)||!QC(n)){const r=Ap(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Au(t,e,n){if((e=St(e))instanceof ko)return e._internalPath;if(typeof e=="string")return Qp(t,e);throw Of("Field path arguments must be of type string or ",t,!1,void 0,n)}const _9=new RegExp("[~\\*/\\[\\]]");function Qp(t,e,n){if(e.search(_9)>=0)throw Of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ko(...e.split("."))._internalPath}catch{throw Of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Of(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(F.INVALID_ARGUMENT,a+t+l)}function vN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T9 extends Pu{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?Qp(t,e):e instanceof ko?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ix{}class Zu extends Ix{}function uY(t,e,...n){let r=[];e instanceof Ix&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Il).length,a=s.filter(l=>l instanceof ed).length;if(o>1||o>0&&a>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class ed extends Zu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ed(e,n,r)}_apply(e){const n=this._parse(e);return _N(e._query,n),new Nt(e.firestore,e.converter,Iv(e._query,n))}_parse(e){const n=Do(e.firestore);return function(s,o,a,l,c,d,h){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){bb(h,d);const x=[];for(const v of h)x.push(Eb(l,s,v));p={arrayValue:{values:x}}}else p=Eb(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||bb(h,d),p=mN(a,o,h,d==="in"||d==="not-in");return Ae.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dY(t,e,n){const r=e,i=Yp("where",t);return ed._create(i,r,n)}class Il extends Ix{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Il(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)_N(o,l),o=Iv(o,l)}(e._query,n),new Nt(e.firestore,e.converter,Iv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hY(...t){return t.forEach(e=>TN("or",e)),Il._create("or",t)}function fY(...t){return t.forEach(e=>TN("and",e)),Il._create("and",t)}class Ax extends Zu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ax(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(s,o)}(e._query,this._field,this._direction);return new Nt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new oi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function pY(t,e="asc"){const n=e,r=Yp("orderBy",t);return Ax._create(r,n)}class Xp extends Zu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xp(e,n,r)}_apply(e){return new Nt(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function mY(t){return YC("limit",t),Xp._create("limit",t,"F")}function gY(t){return YC("limitToLast",t),Xp._create("limitToLast",t,"L")}class Jp extends Zu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Jp(e,n,r)}_apply(e){const n=xN(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function yY(...t){return Jp._create("startAt",t,!0)}function vY(...t){return Jp._create("startAfter",t,!1)}class Zp extends Zu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Zp(e,n,r)}_apply(e){const n=xN(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new oi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function wY(...t){return Zp._create("endBefore",t,!1)}function xY(...t){return Zp._create("endAt",t,!0)}function xN(t,e,n,r){if(n[0]=St(n[0]),n[0]instanceof Pu)return function(s,o,a,l,c){if(!l)throw new H(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of Ia(s))if(h.field.isKeyField())d.push(oo(o,l.key));else{const p=l.data.field(h.field);if(Np(p))throw new H(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=h.field.canonicalString();throw new H(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new rs(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Do(t.firestore);return function(o,a,l,c,d,h){const p=o.explicitOrderBy;if(d.length>p.length)throw new H(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let x=0;x<d.length;x++){const v=d[x];if(p[x].field.isKeyField()){if(typeof v!="string")throw new H(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!Mw(o)&&v.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);const E=o.path.child(Ee.fromString(v));if(!ee.isDocumentKey(E))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const y=new ee(E);m.push(oo(a,y))}else{const E=mN(l,c,v);m.push(E)}}return new rs(m,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Eb(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mw(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!ee.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oo(t,new ee(r))}if(n instanceof Be)return oo(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ap(n)}.`)}function bb(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _N(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function TN(t,e){if(!(e instanceof ed||e instanceof Il))throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class EN{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return gs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Qa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new or(s)}convertGeoPoint(e){return new Ir(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){const n=Zr(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);oe(ck(r),9688,{name:e});const i=new so(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||mt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Px extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Y(t){return new Iu("sum",Au("sum",t))}function TY(t){return new Iu("avg",Au("average",t))}function E9(){return new Iu("count")}function EY(t,e){var n,r;return t instanceof Iu&&e instanceof Iu&&t.aggregateType===e.aggregateType&&((n=t._internalFieldPath)===null||n===void 0?void 0:n.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function bY(t,e){return lN(t.query,e.query)&&Zi(t.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="NOT SUPPORTED";class Di{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kn extends Pu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}function SY(t,e,n){if(Co(e,kn._jsonSchema)){if(e.bundle===bN)throw new H(F.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ro(t._databaseId),i=sN(e.bundle,r),s=i.Ku(),o=new cx(i.getMetadata(),r);for(const d of s)o.Wa(d);const a=o.documents;if(a.length!==1)throw new H(F.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${a.length} documents.`);const l=Op(r,a[0].document),c=new ee(Ee.fromString(e.bundleName));return new kn(t,new Px(t),c,l,new Di(!1,!1),n||null)}}kn._jsonSchemaVersion="firestore/documentSnapshot/1.0",kn._jsonSchema={type:xt("string",kn._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class jh extends kn{data(e={}){return super.data(e)}}class Nn{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jh(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new jh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Di(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:b9(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IY(t,e,n){if(Co(e,Nn._jsonSchema)){if(e.bundle===bN)throw new H(F.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Ro(t._databaseId),i=sN(e.bundle,r),s=i.Ku(),o=new cx(i.getMetadata(),r);for(const p of s)o.Wa(p);if(o.queries.length!==1)throw new H(F.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const a=Fp(o.queries[0].bundledQuery),l=o.documents;let c=new Js;l.map(p=>{const m=Op(r,p.document);c=c.add(m)});const d=mo.fromInitialDocuments(a,c,ye(),!1,!1),h=new Nt(t,n||null,a);return new Nn(t,new Px(t),h,d)}}function b9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}function AY(t,e){return t instanceof kn&&e instanceof kn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Nn&&e instanceof Nn&&t._firestore===e._firestore&&lN(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){t=be(t,Be);const e=be(t.firestore,Ue);return rN(ct(e),t._key).then(n=>Cx(e,t,n))}Nn._jsonSchemaVersion="firestore/querySnapshot/1.0",Nn._jsonSchema={type:xt("string",Nn._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class ws extends EN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function PY(t){t=be(t,Be);const e=be(t.firestore,Ue),n=ct(e),r=new ws(e);return s9(n,t._key).then(i=>new kn(e,r,t._key,i,new Di(i!==null&&i.hasLocalMutations,!0),t.converter))}function CY(t){t=be(t,Be);const e=be(t.firestore,Ue);return rN(ct(e),t._key,{source:"server"}).then(n=>Cx(e,t,n))}function tm(t){t=be(t,Nt);const e=be(t.firestore,Ue),n=ct(e),r=new ws(e);return wN(t._query),iN(n,t._query).then(i=>new Nn(e,r,t,i))}function RY(t){t=be(t,Nt);const e=be(t.firestore,Ue),n=ct(e),r=new ws(e);return o9(n,t._query).then(i=>new Nn(e,r,t,i))}function kY(t){t=be(t,Nt);const e=be(t.firestore,Ue),n=ct(e),r=new ws(e);return iN(n,t._query,{source:"server"}).then(i=>new Nn(e,r,t,i))}function S9(t,e,n){t=be(t,Be);const r=be(t.firestore,Ue),i=em(t.converter,e,n);return nd(r,[Kp(Do(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nt.none())])}function nm(t,e,n,...r){t=be(t,Be);const i=be(t.firestore,Ue),s=Do(i);let o;return o=typeof(e=St(e))=="string"||e instanceof ko?bx(s,"updateDoc",t._key,e,n,r):Ex(s,"updateDoc",t._key,e),nd(i,[o.toMutation(t._key,nt.exists(!0))])}function rm(t){return nd(be(t.firestore,Ue),[new xl(t._key,nt.none())])}function im(t,e){const n=be(t.firestore,Ue),r=ln(t),i=em(t.converter,e);return nd(n,[Kp(Do(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nt.exists(!1))]).then(()=>r)}function Lf(t,...e){var n,r,i;t=St(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Aa(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Aa(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,d;if(t instanceof Be)c=be(t.firestore,Ue),d=vl(t._key.path),l={next:h=>{e[o]&&e[o](Cx(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=be(t,Nt);c=be(h.firestore,Ue),d=h._query;const p=new ws(c);l={next:m=>{e[o]&&e[o](new Nn(c,p,h,m))},error:e[o+1],complete:e[o+2]},wN(t._query)}return function(p,m,x,v){const E=new Gp(v),y=new lx(m,E,x);return p.asyncQueue.enqueueAndForget(async()=>sx(await ol(p),y)),()=>{E.Ou(),p.asyncQueue.enqueueAndForget(async()=>ox(await ol(p),y))}}(ct(c),d,a,l)}function NY(t,e,...n){const r=St(t),i=function(l){const c={bundle:"",bundleName:"",bundleSource:""},d=["bundle","bundleName","bundleSource"];for(const h of d){if(!(h in l)){c.error=`snapshotJson missing required field: ${h}`;break}const p=l[h];if(typeof p!="string"){c.error=`snapshotJson field '${h}' must be a string.`;break}if(p.length===0){c.error=`snapshotJson field '${h}' cannot be an empty string.`;break}h==="bundle"?c.bundle=p:h==="bundleName"?c.bundleName=p:h==="bundleSource"&&(c.bundleSource=p)}return c}(e);if(i.error)throw new H(F.INVALID_ARGUMENT,i.error);let s,o=0;if(typeof n[o]!="object"||Aa(n[o])||(s=n[o++]),i.bundleSource==="QuerySnapshot"){let a=null;if(typeof n[o]=="object"&&Aa(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,p,m){let x,v=!1;return Tb(c,d.bundle).then(()=>g9(c,d.bundleName)).then(y=>{y&&!v&&(m&&y.withConverter(m),x=Lf(y,h||{},p))}).catch(y=>(p.error&&p.error(y),()=>{})),()=>{v||(v=!0,x&&x())}}(r,i,s,a,n[o])}if(i.bundleSource==="DocumentSnapshot"){let a=null;if(typeof n[o]=="object"&&Aa(n[o])){const l=n[o++];a={next:l.next,error:l.error,complete:l.complete}}else a={next:n[o++],error:n[o++],complete:n[o++]};return function(c,d,h,p,m){let x,v=!1;return Tb(c,d.bundle).then(()=>{if(!v){const y=new Be(c,m||null,ee.fromPath(d.bundleName));x=Lf(y,h||{},p)}}).catch(y=>(p.error&&p.error(y),()=>{})),()=>{v||(v=!0,x&&x())}}(r,i,s,a,n[o])}throw new H(F.INVALID_ARGUMENT,`unsupported bundle source: ${i.bundleSource}`)}function DY(t,e){return l9(ct(t=be(t,Ue)),Aa(e)?e:{next:e})}function nd(t,e){return function(r,i){const s=new kt;return r.asyncQueue.enqueueAndForget(async()=>M$(await vx(r),i,s)),s.promise}(ct(t),e)}function Cx(t,e,n){const r=n.docs.get(e._key),i=new ws(t);return new kn(t,i,e._key,r,new Di(n.hasPendingWrites,n.fromCache),e.converter)}function VY(t){return I9(t,{count:E9()})}function I9(t,e){const n=be(t.firestore,Ue),r=ct(n),i=fR(e,(s,o)=>new KR(o,s.aggregateType,s._internalFieldPath));return a9(r,t._query,i).then(s=>function(a,l,c){const d=new ws(a);return new y9(l,d,c)}(n,t,s))}class A9{constructor(e){this.kind="memory",this._onlineComponentProvider=ss.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new mx(void 0)}}toJSON(){return{kind:this.kind}}}class P9{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=D9(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class C9{constructor(){this.kind="memoryEager",this._offlineComponentProvider=sl.provider}toJSON(){return{kind:this.kind}}}class R9{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new mx(e)}}toJSON(){return{kind:this.kind}}}function jY(){return new C9}function MY(t){return new R9(t==null?void 0:t.cacheSizeBytes)}function OY(t){return new A9(t)}function LY(t){return new P9(t)}class k9{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ss.provider,this._offlineComponentProvider={build:n=>new gx(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class N9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ss.provider,this._offlineComponentProvider={build:n=>new Zk(n,e==null?void 0:e.cacheSizeBytes)}}}function D9(t){return new k9(t==null?void 0:t.forceOwnership)}function FY(){return new N9}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Do(e)}set(e,n,r){this._verifyNotCommitted();const i=Vi(e,this._firestore),s=em(i.converter,n,r),o=Kp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,nt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Vi(e,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof ko?bx(this._dataReader,"WriteBatch.update",s._key,n,r,i):Ex(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vi(e,this._firestore);return this._mutations=this._mutations.concat(new xl(n._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vi(t,e){if((t=St(t)).firestore!==e)throw new H(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Do(e)}get(e){const n=Vi(e,this._firestore),r=new Px(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return re(24041);const s=i[0];if(s.isFoundDocument())return new Pu(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new Pu(this._firestore,r,n._key,null,n.converter);throw re(18433,{doc:s})})}set(e,n,r){const i=Vi(e,this._firestore),s=em(i.converter,n,r),o=Kp(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,r);return this._transaction.set(i._key,o),this}update(e,n,r,...i){const s=Vi(e,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof ko?bx(this._dataReader,"Transaction.update",s._key,n,r,i):Ex(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Vi(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9 extends M9{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Vi(e,this._firestore),r=new ws(this._firestore);return super.get(e).then(i=>new kn(this._firestore,r,n._key,i._document,new Di(!1,!1),n.converter))}}function BY(t,e,n){t=be(t,Ue);const r=Object.assign(Object.assign({},V9),n);return function(s){if(s.maxAttempts<1)throw new H(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new kt;return s.asyncQueue.enqueueAndForget(async()=>{const c=await nN(s);new t9(s.asyncQueue,c,a,o,l).zu()}),l.promise}(ct(t),i=>e(new O9(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(){return new Ju("deleteField")}function UY(){return new wx("serverTimestamp")}function zY(...t){return new xx("arrayUnion",t)}function WY(...t){return new _x("arrayRemove",t)}function GY(t){return new Tx("increment",t)}function qY(t){return new or(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HY(t){return ct(t=be(t,Ue)),new j9(t,e=>nd(t,e))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(t,e){const n=ct(t=be(t,Ue));if(!n._uninitializedComponentsProvider||n._uninitializedComponentsProvider._offline.kind==="memory")return an("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(s){const o=typeof s=="string"?function(c){try{return JSON.parse(c)}catch(d){throw new H(F.INVALID_ARGUMENT,"Failed to parse JSON: "+(d==null?void 0:d.message))}}(s):s,a=[];if(Array.isArray(o.indexes))for(const l of o.indexes){const c=Sb(l,"collectionGroup"),d=[];if(Array.isArray(l.fields))for(const h of l.fields){const p=Qp("setIndexConfiguration",Sb(h,"fieldPath"));h.arrayConfig==="CONTAINS"?d.push(new Ys(p,2)):h.order==="ASCENDING"?d.push(new Ys(p,0)):h.order==="DESCENDING"&&d.push(new Ys(p,1))}a.push(new za(za.UNKNOWN_ID,c,d,Wa.empty()))}return a}(e);return d9(n,r)}function Sb(t,e){if(typeof t[e]!="string")throw new H(F.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function QY(t){var e;t=be(t,Ue);const n=Ib.get(t);if(n)return n;if(((e=ct(t)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new L9(t);return Ib.set(t,r),r}function YY(t){SN(t,!0)}function XY(t){SN(t,!1)}function JY(t){f9(ct(t._firestore)).then(e=>Q("deleting all persistent cache indexes succeeded")).catch(e=>an("deleting all persistent cache indexes failed",e))}function SN(t,e){h9(ct(t._firestore),e).then(n=>Q(`setting persistent cache index auto creation isEnabled=${e} succeeded`)).catch(n=>an(`setting persistent cache index auto creation isEnabled=${e} failed`,n))}const Ib=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(t){var e;const n=(e=ct(be(t.firestore,Ue))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return n===void 0?null:Lp(n,Jt(t._query)).Vt}function eX(t,e){var n;const r=fR(e,(s,o)=>new KR(o,s.aggregateType,s._internalFieldPath)),i=(n=ct(be(t.firestore,Ue))._onlineComponents)===null||n===void 0?void 0:n.datastore.serializer;return i===void 0?null:sk(i,NR(t._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Rx.instance.onExistenceFilterMismatch(e)}}class Rx{constructor(){this.Fc=new Map}static get instance(){return th||(th=new Rx,function(n){if(Pf)throw new Error("a TestingHooksSpi instance is already set");Pf=n}(th)),th}ct(e){this.Fc.forEach(n=>n(e))}onExistenceFilterMismatch(e){const n=Symbol(),r=this.Fc;return r.set(n,e),()=>r.delete(n)}}let th=null;(function(e,n=!0){(function(i){yl=i})(O5),_f(new fu("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ue(new Z5(r.getProvider("auth-internal")),new n3(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new so(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Sa(nE,rE,e),Sa(nE,rE,"esm2017")})();async function Pa(){return(await tm(Nr(lt,"users"))).docs.map(e=>({id:e.id,...e.data()}))}async function IN(t){return{id:(await im(Nr(lt,"users"),t)).id,...t}}async function AN(t,e){return await nm(ln(lt,"users",t),e),{id:t,...e}}async function PN(t){return await rm(ln(lt,"users",t))}async function F9(t){const e=await td(ln(lt,"users",t));return e.exists()?{id:t,...e.data()}:null}async function kx(){const t=await td(ln(lt,"admin_config","paymentInfo"));return t.exists()?t.data():{banks:[],ewallets:[]}}async function Fv(t){var e;try{await nm(ln(lt,"admin_config","paymentInfo"),t)}catch(n){if(n.code==="not-found"||(e=n.message)!=null&&e.includes("No document to update")){const{setDoc:r}=await kr(()=>import("./index.esm-8dc265ab.js"),[]);await r(ln(lt,"admin_config","paymentInfo"),t)}else throw n}}const B9={apiKey:"AIzaSyCng39jE_0N5Spco2ADef3xmijpZgyhxCI",authDomain:"undangan-digital-38d0b.firebaseapp.com",projectId:"undangan-digital-38d0b",storageBucket:"undangan-digital-38d0b.firebasestorage.app",messagingSenderId:"389804485470",appId:"1:389804485470:web:a3f39722d76ca149b8fdcf",measurementId:"G-7WCGDGHR0T"},$9=Tw(B9),lt=cN($9);async function Nx(){return(await tm(Nr(lt,"music"))).docs.map(e=>({id:e.id,...e.data()}))}async function CN(t){return{id:(await im(Nr(lt,"music"),t)).id,...t}}async function RN(t){return await rm(ln(lt,"music",t))}async function Dx(){return(await tm(Nr(lt,"templates"))).docs.map(e=>({id:e.id,...e.data()}))}function U9(t){return Lf(Nr(lt,"templates"),e=>{const n=e.docs.map(r=>({id:r.id,...r.data()}));t(n)})}async function Vx(t){return{id:(await im(Nr(lt,"templates"),t)).id,...t}}async function jx(t,e){return await nm(ln(lt,"templates",t),e),{id:t,...e}}async function kN(t){return await rm(ln(lt,"templates",t))}async function sm(t){const e=await td(ln(lt,"templates",t));return e.exists()?{id:t,...e.data()}:null}async function Ff(){return(await tm(Nr(lt,"orders"))).docs.map(e=>({id:e.id,...e.data()}))}function NN(t){return Lf(Nr(lt,"orders"),e=>{const n=e.docs.map(r=>({id:r.id,...r.data()}));t(n)})}async function DN(t){return{id:(await im(Nr(lt,"orders"),t)).id,...t}}async function Bv(t,e){return await nm(ln(lt,"orders",t),e),{id:t,...e}}async function VN(t){const e=typeof t=="string"?t.trim():String(t);try{console.log("[FIRESTORE] deleteOrder id:",e);const n=await rm(ln(lt,"orders",e));return console.log("[FIRESTORE] deleteOrder SUCCESS:",e,n),n}catch(n){throw console.error("[FIRESTORE] deleteOrder ERROR:",e,n&&n.message,n),n}}async function z9(t){const e=await td(ln(lt,"orders",t));return e.exists()?{id:t,...e.data()}:null}const W9=Object.freeze(Object.defineProperty({__proto__:null,addMusic:CN,addOrder:DN,addTemplate:Vx,addUser:IN,deleteMusic:RN,deleteOrder:VN,deleteTemplate:kN,deleteUser:PN,getAllMusic:Nx,getAllOrders:Ff,getAllTemplates:Dx,getAllUsers:Pa,getOrderById:z9,getPaymentInfo:kx,getTemplateById:sm,getUserById:F9,setPaymentInfo:Fv,subscribeOrders:NN,subscribeTemplates:U9,updateOrder:Bv,updateTemplate:jx,updateUser:AN},Symbol.toStringTag,{value:"Module"})),G9={apiKey:"AIzaSyCng39jE_0N5Spco2ADef3xmijpZgyhxCI",authDomain:"undangan-digital-38d0b.firebaseapp.com",projectId:"undangan-digital-38d0b",storageBucket:"undangan-digital-38d0b.firebasestorage.app",messagingSenderId:"389804485470",appId:"1:389804485470:web:a3f39722d76ca149b8fdcf",measurementId:"G-7WCGDGHR0T"},q9=Tw(G9),H9=cN(q9),jN=ln(H9,"admin_config","siteSettings");async function Mx(){const t=await td(jN);return t.exists()?t.data():null}async function Ng(t){await S9(jN,t,{merge:!0})}var MN={exports:{}},K9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Q9=K9,Y9=Q9;function ON(){}function LN(){}LN.resetWarningCache=ON;var X9=function(){function t(r,i,s,o,a,l){if(l!==Y9){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:LN,resetWarningCache:ON};return n.PropTypes=n,n};MN.exports=X9();var J9=MN.exports;const Xe=ul(J9);function Z9(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var FN=_,eU=Z9(FN);function Ab(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var nU=!!(typeof window<"u"&&window.document&&window.document.createElement);function rU(t,e,n){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof n<"u"&&typeof n!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(i){return i.displayName||i.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=t(o.map(function(d){return d.props})),c.canUseDOM?e(a):n&&(a=n(a))}var c=function(d){tU(h,d);function h(){return d.apply(this,arguments)||this}h.peek=function(){return a},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var x=a;return a=void 0,o=[],x};var p=h.prototype;return p.UNSAFE_componentWillMount=function(){o.push(this),l()},p.componentDidUpdate=function(){l()},p.componentWillUnmount=function(){var x=o.indexOf(this);o.splice(x,1),l()},p.render=function(){return eU.createElement(s,this.props)},h}(FN.PureComponent);return Ab(c,"displayName","SideEffect("+r(s)+")"),Ab(c,"canUseDOM",nU),c}}var iU=rU;const sU=ul(iU);var oU=typeof Element<"u",aU=typeof Map=="function",lU=typeof Set=="function",cU=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Mh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Mh(t[r],e[r]))return!1;return!0}var s;if(aU&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!Mh(r.value[1],e.get(r.value[0])))return!1;return!0}if(lU&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(cU&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(oU&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!Mh(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var uU=function(e,n){try{return Mh(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const dU=ul(uU);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Pb=Object.getOwnPropertySymbols,hU=Object.prototype.hasOwnProperty,fU=Object.prototype.propertyIsEnumerable;function pU(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function mU(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var gU=mU()?Object.assign:function(t,e){for(var n,r=pU(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)hU.call(n,o)&&(r[o]=n[o]);if(Pb){i=Pb(n);for(var a=0;a<i.length;a++)fU.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};const yU=ul(gU);var Zs={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},ge={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(ge).map(function(t){return ge[t]});var Je={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Bf={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Cu={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},vU=Object.keys(Bf).reduce(function(t,e){return t[Bf[e]]=e,t},{}),wU=[ge.NOSCRIPT,ge.SCRIPT,ge.STYLE],rr="data-react-helmet",xU=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_U=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},TU=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),dn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EU=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Cb=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},bU=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},$v=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},SU=function(e){var n=Ca(e,ge.TITLE),r=Ca(e,Cu.TITLE_TEMPLATE);if(r&&n)return r.replace(/%s/g,function(){return Array.isArray(n)?n.join(""):n});var i=Ca(e,Cu.DEFAULT_TITLE);return n||i||void 0},IU=function(e){return Ca(e,Cu.ON_CHANGE_CLIENT_STATE)||function(){}},Dg=function(e,n){return n.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,i){return dn({},r,i)},{})},AU=function(e,n){return n.filter(function(r){return typeof r[ge.BASE]<"u"}).map(function(r){return r[ge.BASE]}).reverse().reduce(function(r,i){if(!r.length)for(var s=Object.keys(i),o=0;o<s.length;o++){var a=s[o],l=a.toLowerCase();if(e.indexOf(l)!==-1&&i[l])return r.concat(i)}return r},[])},ac=function(e,n,r){var i={};return r.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&kU("Helmet: "+e+' should be of type "Array". Instead found type "'+xU(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,o){var a={};o.filter(function(p){for(var m=void 0,x=Object.keys(p),v=0;v<x.length;v++){var E=x[v],y=E.toLowerCase();n.indexOf(y)!==-1&&!(m===Je.REL&&p[m].toLowerCase()==="canonical")&&!(y===Je.REL&&p[y].toLowerCase()==="stylesheet")&&(m=y),n.indexOf(E)!==-1&&(E===Je.INNER_HTML||E===Je.CSS_TEXT||E===Je.ITEM_PROP)&&(m=E)}if(!m||!p[m])return!1;var w=p[m].toLowerCase();return i[m]||(i[m]={}),a[m]||(a[m]={}),i[m][w]?!1:(a[m][w]=!0,!0)}).reverse().forEach(function(p){return s.push(p)});for(var l=Object.keys(a),c=0;c<l.length;c++){var d=l[c],h=yU({},i[d],a[d]);i[d]=h}return s},[]).reverse()},Ca=function(e,n){for(var r=e.length-1;r>=0;r--){var i=e[r];if(i.hasOwnProperty(n))return i[n]}return null},PU=function(e){return{baseTag:AU([Je.HREF,Je.TARGET],e),bodyAttributes:Dg(Zs.BODY,e),defer:Ca(e,Cu.DEFER),encode:Ca(e,Cu.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Dg(Zs.HTML,e),linkTags:ac(ge.LINK,[Je.REL,Je.HREF],e),metaTags:ac(ge.META,[Je.NAME,Je.CHARSET,Je.HTTPEQUIV,Je.PROPERTY,Je.ITEM_PROP],e),noscriptTags:ac(ge.NOSCRIPT,[Je.INNER_HTML],e),onChangeClientState:IU(e),scriptTags:ac(ge.SCRIPT,[Je.SRC,Je.INNER_HTML],e),styleTags:ac(ge.STYLE,[Je.CSS_TEXT],e),title:SU(e),titleAttributes:Dg(Zs.TITLE,e)}},Uv=function(){var t=Date.now();return function(e){var n=Date.now();n-t>16?(t=n,e(n)):setTimeout(function(){Uv(e)},0)}}(),Rb=function(e){return clearTimeout(e)},CU=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Uv:global.requestAnimationFrame||Uv,RU=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Rb:global.cancelAnimationFrame||Rb,kU=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},lc=null,NU=function(e){lc&&RU(lc),e.defer?lc=CU(function(){kb(e,function(){lc=null})}):(kb(e),lc=null)},kb=function(e,n){var r=e.baseTag,i=e.bodyAttributes,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.onChangeClientState,d=e.scriptTags,h=e.styleTags,p=e.title,m=e.titleAttributes;zv(ge.BODY,i),zv(ge.HTML,s),DU(p,m);var x={baseTag:Ko(ge.BASE,r),linkTags:Ko(ge.LINK,o),metaTags:Ko(ge.META,a),noscriptTags:Ko(ge.NOSCRIPT,l),scriptTags:Ko(ge.SCRIPT,d),styleTags:Ko(ge.STYLE,h)},v={},E={};Object.keys(x).forEach(function(y){var w=x[y],T=w.newTags,C=w.oldTags;T.length&&(v[y]=T),C.length&&(E[y]=x[y].oldTags)}),n&&n(),c(e,v,E)},BN=function(e){return Array.isArray(e)?e.join(""):e},DU=function(e,n){typeof e<"u"&&document.title!==e&&(document.title=BN(e)),zv(ge.TITLE,n)},zv=function(e,n){var r=document.getElementsByTagName(e)[0];if(r){for(var i=r.getAttribute(rr),s=i?i.split(","):[],o=[].concat(s),a=Object.keys(n),l=0;l<a.length;l++){var c=a[l],d=n[c]||"";r.getAttribute(c)!==d&&r.setAttribute(c,d),s.indexOf(c)===-1&&s.push(c);var h=o.indexOf(c);h!==-1&&o.splice(h,1)}for(var p=o.length-1;p>=0;p--)r.removeAttribute(o[p]);s.length===o.length?r.removeAttribute(rr):r.getAttribute(rr)!==a.join(",")&&r.setAttribute(rr,a.join(","))}},Ko=function(e,n){var r=document.head||document.querySelector(ge.HEAD),i=r.querySelectorAll(e+"["+rr+"]"),s=Array.prototype.slice.call(i),o=[],a=void 0;return n&&n.length&&n.forEach(function(l){var c=document.createElement(e);for(var d in l)if(l.hasOwnProperty(d))if(d===Je.INNER_HTML)c.innerHTML=l.innerHTML;else if(d===Je.CSS_TEXT)c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{var h=typeof l[d]>"u"?"":l[d];c.setAttribute(d,h)}c.setAttribute(rr,"true"),s.some(function(p,m){return a=m,c.isEqualNode(p)})?s.splice(a,1):o.push(c)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return r.appendChild(l)}),{oldTags:s,newTags:o}},$N=function(e){return Object.keys(e).reduce(function(n,r){var i=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return n?n+" "+i:i},"")},VU=function(e,n,r,i){var s=$N(r),o=BN(n);return s?"<"+e+" "+rr+'="true" '+s+">"+$v(o,i)+"</"+e+">":"<"+e+" "+rr+'="true">'+$v(o,i)+"</"+e+">"},jU=function(e,n,r){return n.reduce(function(i,s){var o=Object.keys(s).filter(function(c){return!(c===Je.INNER_HTML||c===Je.CSS_TEXT)}).reduce(function(c,d){var h=typeof s[d]>"u"?d:d+'="'+$v(s[d],r)+'"';return c?c+" "+h:h},""),a=s.innerHTML||s.cssText||"",l=wU.indexOf(e)===-1;return i+"<"+e+" "+rr+'="true" '+o+(l?"/>":">"+a+"</"+e+">")},"")},UN=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[Bf[i]||i]=e[i],r},n)},MU=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,i){return r[vU[i]||i]=e[i],r},n)},OU=function(e,n,r){var i,s=(i={key:n},i[rr]=!0,i),o=UN(r,s);return[ce.createElement(ge.TITLE,o,n)]},LU=function(e,n){return n.map(function(r,i){var s,o=(s={key:i},s[rr]=!0,s);return Object.keys(r).forEach(function(a){var l=Bf[a]||a;if(l===Je.INNER_HTML||l===Je.CSS_TEXT){var c=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:c}}else o[l]=r[a]}),ce.createElement(e,o)})},Or=function(e,n,r){switch(e){case ge.TITLE:return{toComponent:function(){return OU(e,n.title,n.titleAttributes)},toString:function(){return VU(e,n.title,n.titleAttributes,r)}};case Zs.BODY:case Zs.HTML:return{toComponent:function(){return UN(n)},toString:function(){return $N(n)}};default:return{toComponent:function(){return LU(e,n)},toString:function(){return jU(e,n,r)}}}},zN=function(e){var n=e.baseTag,r=e.bodyAttributes,i=e.encode,s=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,c=e.scriptTags,d=e.styleTags,h=e.title,p=h===void 0?"":h,m=e.titleAttributes;return{base:Or(ge.BASE,n,i),bodyAttributes:Or(Zs.BODY,r,i),htmlAttributes:Or(Zs.HTML,s,i),link:Or(ge.LINK,o,i),meta:Or(ge.META,a,i),noscript:Or(ge.NOSCRIPT,l,i),script:Or(ge.SCRIPT,c,i),style:Or(ge.STYLE,d,i),title:Or(ge.TITLE,{title:p,titleAttributes:m},i)}},FU=function(e){var n,r;return r=n=function(i){EU(s,i);function s(){return _U(this,s),bU(this,i.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(a){return!dU(this.props,a)},s.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case ge.SCRIPT:case ge.NOSCRIPT:return{innerHTML:l};case ge.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(a){var l,c=a.child,d=a.arrayTypeChildren,h=a.newChildProps,p=a.nestedChildren;return dn({},d,(l={},l[c.type]=[].concat(d[c.type]||[],[dn({},h,this.mapNestedChildrenToProps(c,p))]),l))},s.prototype.mapObjectTypeChildren=function(a){var l,c,d=a.child,h=a.newProps,p=a.newChildProps,m=a.nestedChildren;switch(d.type){case ge.TITLE:return dn({},h,(l={},l[d.type]=m,l.titleAttributes=dn({},p),l));case ge.BODY:return dn({},h,{bodyAttributes:dn({},p)});case ge.HTML:return dn({},h,{htmlAttributes:dn({},p)})}return dn({},h,(c={},c[d.type]=dn({},p),c))},s.prototype.mapArrayTypeChildrenToProps=function(a,l){var c=dn({},l);return Object.keys(a).forEach(function(d){var h;c=dn({},c,(h={},h[d]=a[d],h))}),c},s.prototype.warnOnInvalidChildren=function(a,l){return!0},s.prototype.mapChildrenToProps=function(a,l){var c=this,d={};return ce.Children.forEach(a,function(h){if(!(!h||!h.props)){var p=h.props,m=p.children,x=Cb(p,["children"]),v=MU(x);switch(c.warnOnInvalidChildren(h,m),h.type){case ge.LINK:case ge.META:case ge.NOSCRIPT:case ge.SCRIPT:case ge.STYLE:d=c.flattenArrayTypeChildren({child:h,arrayTypeChildren:d,newChildProps:v,nestedChildren:m});break;default:l=c.mapObjectTypeChildren({child:h,newProps:l,newChildProps:v,nestedChildren:m});break}}}),l=this.mapArrayTypeChildrenToProps(d,l),l},s.prototype.render=function(){var a=this.props,l=a.children,c=Cb(a,["children"]),d=dn({},c);return l&&(d=this.mapChildrenToProps(l,d)),ce.createElement(e,d)},TU(s,null,[{key:"canUseDOM",set:function(a){e.canUseDOM=a}}]),s}(ce.Component),n.propTypes={base:Xe.object,bodyAttributes:Xe.object,children:Xe.oneOfType([Xe.arrayOf(Xe.node),Xe.node]),defaultTitle:Xe.string,defer:Xe.bool,encodeSpecialCharacters:Xe.bool,htmlAttributes:Xe.object,link:Xe.arrayOf(Xe.object),meta:Xe.arrayOf(Xe.object),noscript:Xe.arrayOf(Xe.object),onChangeClientState:Xe.func,script:Xe.arrayOf(Xe.object),style:Xe.arrayOf(Xe.object),title:Xe.string,titleAttributes:Xe.object,titleTemplate:Xe.string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var i=e.rewind();return i||(i=zN({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),i},r},BU=function(){return null},$U=sU(PU,NU,zN)(BU),ti=FU($U);ti.renderStatic=ti.rewind;const WN=_.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),om=_.createContext({}),Ox=_.createContext(null),am=typeof document<"u",UU=am?_.useLayoutEffect:_.useEffect,GN=_.createContext({strict:!1}),Lx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),zU="framerAppearId",qN="data-"+Lx(zU);function WU(t,e,n,r){const{visualElement:i}=_.useContext(om),s=_.useContext(GN),o=_.useContext(Ox),a=_.useContext(WN).reducedMotion,l=_.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;_.useInsertionEffect(()=>{c&&c.update(n,o)});const d=_.useRef(!!(n[qN]&&!window.HandoffComplete));return UU(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),_.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function pa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function GU(t,e,n){return _.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):pa(n)&&(n.current=r))},[e])}function Ru(t){return typeof t=="string"||Array.isArray(t)}function lm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Fx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bx=["initial",...Fx];function cm(t){return lm(t.animate)||Bx.some(e=>Ru(t[e]))}function HN(t){return!!(cm(t)||t.variants)}function qU(t,e){if(cm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ru(n)?n:void 0,animate:Ru(r)?r:void 0}}return t.inherit!==!1?e:{}}function HU(t){const{initial:e,animate:n}=qU(t,_.useContext(om));return _.useMemo(()=>({initial:e,animate:n}),[Nb(e),Nb(n)])}function Nb(t){return Array.isArray(t)?t.join(" "):t}const Db={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ku={};for(const t in Db)ku[t]={isEnabled:e=>Db[t].some(n=>!!e[n])};function KU(t){for(const e in t)ku[e]={...ku[e],...t[e]}}const KN=_.createContext({}),QN=_.createContext({}),QU=Symbol.for("motionComponentSymbol");function YU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&KU(t);function s(a,l){let c;const d={..._.useContext(WN),...a,layoutId:XU(a)},{isStatic:h}=d,p=HU(a),m=r(a,h);if(!h&&am){p.visualElement=WU(i,m,d,e);const x=_.useContext(QN),v=_.useContext(GN).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,v,t,x))}return _.createElement(om.Provider,{value:p},c&&p.visualElement?_.createElement(c,{visualElement:p.visualElement,...d}):null,n(i,a,GU(m,p.visualElement,l),m,h,p.visualElement))}const o=_.forwardRef(s);return o[QU]=i,o}function XU({layoutId:t}){const e=_.useContext(KN).id;return e&&t!==void 0?e+"-"+t:t}function JU(t){function e(r,i={}){return YU(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const ZU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $x(t){return typeof t!="string"||t.includes("-")?!1:!!(ZU.indexOf(t)>-1||/[A-Z]/.test(t))}const $f={};function ez(t){Object.assign($f,t)}const rd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jo=new Set(rd);function YN(t,{layout:e,layoutId:n}){return jo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$f[t]||t==="opacity")}const Tn=t=>!!(t&&t.getVelocity),tz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nz=rd.length;function rz(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<nz;o++){const a=rd[o];if(t[a]!==void 0){const l=tz[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const XN=t=>e=>typeof e=="string"&&e.startsWith(t),JN=XN("--"),Wv=XN("var(--"),iz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,sz=(t,e)=>e&&typeof t=="number"?e.transform(t):t,as=(t,e,n)=>Math.min(Math.max(n,t),e),Mo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bc={...Mo,transform:t=>as(0,1,t)},nh={...Mo,default:1},$c=t=>Math.round(t*1e5)/1e5,um=/(-)?([\d]*\.?[\d])+/g,ZN=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,oz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function id(t){return typeof t=="string"}const sd=t=>({test:e=>id(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xi=sd("deg"),Ar=sd("%"),he=sd("px"),az=sd("vh"),lz=sd("vw"),Vb={...Ar,parse:t=>Ar.parse(t)/100,transform:t=>Ar.transform(t*100)},jb={...Mo,transform:Math.round},e2={borderWidth:he,borderTopWidth:he,borderRightWidth:he,borderBottomWidth:he,borderLeftWidth:he,borderRadius:he,radius:he,borderTopLeftRadius:he,borderTopRightRadius:he,borderBottomRightRadius:he,borderBottomLeftRadius:he,width:he,maxWidth:he,height:he,maxHeight:he,size:he,top:he,right:he,bottom:he,left:he,padding:he,paddingTop:he,paddingRight:he,paddingBottom:he,paddingLeft:he,margin:he,marginTop:he,marginRight:he,marginBottom:he,marginLeft:he,rotate:xi,rotateX:xi,rotateY:xi,rotateZ:xi,scale:nh,scaleX:nh,scaleY:nh,scaleZ:nh,skew:xi,skewX:xi,skewY:xi,distance:he,translateX:he,translateY:he,translateZ:he,x:he,y:he,z:he,perspective:he,transformPerspective:he,opacity:Bc,originX:Vb,originY:Vb,originZ:he,zIndex:jb,fillOpacity:Bc,strokeOpacity:Bc,numOctaves:jb};function Ux(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,d=!0;for(const h in e){const p=e[h];if(JN(h)){s[h]=p;continue}const m=e2[h],x=sz(p,m);if(jo.has(h)){if(l=!0,o[h]=x,!d)continue;p!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,a[h]=x):i[h]=x}if(e.transform||(l||r?i.transform=rz(t.transform,n,d,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${p} ${m}`}}const zx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function t2(t,e,n){for(const r in e)!Tn(e[r])&&!YN(r,n)&&(t[r]=e[r])}function cz({transformTemplate:t},e,n){return _.useMemo(()=>{const r=zx();return Ux(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function uz(t,e,n){const r=t.style||{},i={};return t2(i,r,t),Object.assign(i,cz(t,e,n)),t.transformValues?t.transformValues(i):i}function dz(t,e,n){const r={},i=uz(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const hz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hz.has(t)}let n2=t=>!Uf(t);function fz(t){t&&(n2=e=>e.startsWith("on")?!Uf(e):t(e))}try{fz(require("@emotion/is-prop-valid").default)}catch{}function pz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(n2(i)||n===!0&&Uf(i)||!e&&!Uf(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Mb(t,e,n){return typeof t=="string"?t:he.transform(e+n*t)}function mz(t,e,n){const r=Mb(e,t.x,t.width),i=Mb(n,t.y,t.height);return`${r} ${i}`}const gz={offset:"stroke-dashoffset",array:"stroke-dasharray"},yz={offset:"strokeDashoffset",array:"strokeDasharray"};function vz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?gz:yz;t[s.offset]=he.transform(-r);const o=he.transform(e),a=he.transform(n);t[s.array]=`${o} ${a}`}function Wx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h,p){if(Ux(t,c,d,p),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:x,dimensions:v}=t;m.transform&&(v&&(x.transform=m.transform),delete m.transform),v&&(i!==void 0||s!==void 0||x.transform)&&(x.transformOrigin=mz(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&vz(m,o,a,l,!1)}const r2=()=>({...zx(),attrs:{}}),Gx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wz(t,e,n,r){const i=_.useMemo(()=>{const s=r2();return Wx(s,e,{enableHardwareAcceleration:!1},Gx(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};t2(s,t.style,t),i.style={...s,...i.style}}return i}function xz(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=($x(n)?wz:dz)(r,s,o,n),d={...pz(r,typeof n=="string",t),...l,ref:i},{children:h}=r,p=_.useMemo(()=>Tn(h)?h.get():h,[h]);return _.createElement(n,{...d,children:p})}}function i2(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const s2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o2(t,e,n,r){i2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(s2.has(i)?i:Lx(i),e.attrs[i])}function qx(t,e){const{style:n}=t,r={};for(const i in n)(Tn(n[i])||e.style&&Tn(e.style[i])||YN(i,t))&&(r[i]=n[i]);return r}function a2(t,e){const n=qx(t,e);for(const r in t)if(Tn(t[r])||Tn(e[r])){const i=rd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Hx(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function _z(t){const e=_.useRef(null);return e.current===null&&(e.current=t()),e.current}const zf=t=>Array.isArray(t),Tz=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Ez=t=>zf(t)?t[t.length-1]||0:t;function Oh(t){const e=Tn(t)?t.get():t;return Tz(e)?e.toValue():e}function bz({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:Sz(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const l2=t=>(e,n)=>{const r=_.useContext(om),i=_.useContext(Ox),s=()=>bz(t,e,r,i);return n?s():_z(s)};function Sz(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Oh(s[p]);let{initial:o,animate:a}=t;const l=cm(t),c=HN(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!lm(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const x=Hx(t,m);if(!x)return;const{transitionEnd:v,transition:E,...y}=x;for(const w in y){let T=y[w];if(Array.isArray(T)){const C=d?T.length-1:0;T=T[C]}T!==null&&(i[w]=T)}for(const w in v)i[w]=v[w]}),i}const ht=t=>t;class Ob{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Iz(t){let e=new Ob,n=new Ob,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const h=d&&i,p=h?e:n;return c&&o.add(l),p.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const rh=["prepare","read","update","preRender","render","postRender"],Az=40;function Pz(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=rh.reduce((h,p)=>(h[p]=Iz(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,Az),1),i.timestamp=h,i.isProcessing=!0,rh.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:rh.reduce((h,p)=>{const m=s[p];return h[p]=(x,v=!1,E=!1)=>(n||l(),m.schedule(x,v,E)),h},{}),cancel:h=>rh.forEach(p=>s[p].cancel(h)),state:i,steps:s}}const{schedule:Ye,cancel:ni,state:Ht,steps:Vg}=Pz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ht,!0),Cz={useVisualState:l2({scrapeMotionValuesFromProps:a2,createRenderState:r2,onMount:(t,e,{renderState:n,latestValues:r})=>{Ye.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ye.render(()=>{Wx(n,r,{enableHardwareAcceleration:!1},Gx(e.tagName),t.transformTemplate),o2(e,n)})}})},Rz={useVisualState:l2({scrapeMotionValuesFromProps:qx,createRenderState:zx})};function kz(t,{forwardMotionProps:e=!1},n,r){return{...$x(t)?Cz:Rz,preloadedFeatures:n,useRender:xz(e),createVisualElement:r,Component:t}}function Wr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const c2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function dm(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Nz=t=>e=>c2(e)&&t(e,dm(e));function qr(t,e,n,r){return Wr(t,e,Nz(n),r)}const Dz=(t,e)=>n=>e(t(n)),Hi=(...t)=>t.reduce(Dz);function u2(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Lb=u2("dragHorizontal"),Fb=u2("dragVertical");function d2(t){let e=!1;if(t==="y")e=Fb();else if(t==="x")e=Lb();else{const n=Lb(),r=Fb();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function h2(){const t=d2(!0);return t?(t(),!1):!0}class xs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Bb(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||h2())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Ye.update(()=>a[r](s,o))};return qr(t.current,n,i,{passive:!t.getProps()[r]})}class Vz extends xs{mount(){this.unmount=Hi(Bb(this.node,!0),Bb(this.node,!1))}unmount(){}}class jz extends xs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hi(Wr(this.node.current,"focus",()=>this.onFocus()),Wr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const f2=(t,e)=>e?t===e?!0:f2(t,e.parentElement):!1;function jg(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,dm(n))}class Mz extends xs{constructor(){super(...arguments),this.removeStartListeners=ht,this.removeEndListeners=ht,this.removeAccessibleListeners=ht,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=qr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Ye.update(()=>{!h&&!f2(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=qr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Hi(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||jg("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Ye.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Wr(this.node.current,"keyup",o),jg("down",(a,l)=>{this.startPress(a,l)})},n=Wr(this.node.current,"keydown",e),r=()=>{this.isPressing&&jg("cancel",(s,o)=>this.cancelPress(s,o))},i=Wr(this.node.current,"blur",r);this.removeAccessibleListeners=Hi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ye.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!h2()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ye.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=qr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Wr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Gv=new WeakMap,Mg=new WeakMap,Oz=t=>{const e=Gv.get(t.target);e&&e(t)},Lz=t=>{t.forEach(Oz)};function Fz({root:t,...e}){const n=t||document;Mg.has(n)||Mg.set(n,{});const r=Mg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Lz,{root:t,...e})),r[i]}function Bz(t,e,n){const r=Fz(e);return Gv.set(t,n),r.observe(t),()=>{Gv.delete(t),r.unobserve(t)}}const $z={some:0,all:1};class Uz extends xs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:$z[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=c?d:h;p&&p(l)};return Bz(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zz(e,n))&&this.startObserver()}unmount(){}}function zz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Wz={inView:{Feature:Uz},tap:{Feature:Mz},focus:{Feature:jz},hover:{Feature:Vz}};function p2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Gz(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function qz(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function hm(t,e,n){const r=t.getProps();return Hx(r,e,n!==void 0?n:r.custom,Gz(t),qz(t))}let Hz=ht,Kx=ht;const Ki=t=>t*1e3,Hr=t=>t/1e3,Kz={current:!1},m2=t=>Array.isArray(t)&&typeof t[0]=="number";function g2(t){return!!(!t||typeof t=="string"&&y2[t]||m2(t)||Array.isArray(t)&&t.every(g2))}const wc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,y2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wc([0,.65,.55,1]),circOut:wc([.55,0,1,.45]),backIn:wc([.31,.01,.66,-.59]),backOut:wc([.33,1.53,.69,.99])};function v2(t){if(t)return m2(t)?wc(t):Array.isArray(t)?t.map(v2):y2[t]}function Qz(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=v2(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Yz(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const w2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Xz=1e-7,Jz=12;function Zz(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=w2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Xz&&++a<Jz);return o}function od(t,e,n,r){if(t===e&&n===r)return ht;const i=s=>Zz(s,0,1,t,n);return s=>s===0||s===1?s:w2(i(s),e,r)}const e8=od(.42,0,1,1),t8=od(0,0,.58,1),x2=od(.42,0,.58,1),n8=t=>Array.isArray(t)&&typeof t[0]!="number",_2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,T2=t=>e=>1-t(1-e),Qx=t=>1-Math.sin(Math.acos(t)),E2=T2(Qx),r8=_2(Qx),b2=od(.33,1.53,.69,.99),Yx=T2(b2),i8=_2(Yx),s8=t=>(t*=2)<1?.5*Yx(t):.5*(2-Math.pow(2,-10*(t-1))),o8={linear:ht,easeIn:e8,easeInOut:x2,easeOut:t8,circIn:Qx,circInOut:r8,circOut:E2,backIn:Yx,backInOut:i8,backOut:b2,anticipate:s8},$b=t=>{if(Array.isArray(t)){Kx(t.length===4);const[e,n,r,i]=t;return od(e,n,r,i)}else if(typeof t=="string")return o8[t];return t},Xx=(t,e)=>n=>!!(id(n)&&oz.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),S2=(t,e,n)=>r=>{if(!id(r))return r;const[i,s,o,a]=r.match(um);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},a8=t=>as(0,255,t),Og={...Mo,transform:t=>Math.round(a8(t))},qs={test:Xx("rgb","red"),parse:S2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Og.transform(t)+", "+Og.transform(e)+", "+Og.transform(n)+", "+$c(Bc.transform(r))+")"};function l8(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qv={test:Xx("#"),parse:l8,transform:qs.transform},ma={test:Xx("hsl","hue"),parse:S2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ar.transform($c(e))+", "+Ar.transform($c(n))+", "+$c(Bc.transform(r))+")"},rn={test:t=>qs.test(t)||qv.test(t)||ma.test(t),parse:t=>qs.test(t)?qs.parse(t):ma.test(t)?ma.parse(t):qv.parse(t),transform:t=>id(t)?t:t.hasOwnProperty("red")?qs.transform(t):ma.transform(t)},st=(t,e,n)=>-n*t+n*e+t;function Lg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function c8({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Lg(l,a,t+1/3),s=Lg(l,a,t),o=Lg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Fg=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},u8=[qv,qs,ma],d8=t=>u8.find(e=>e.test(t));function Ub(t){const e=d8(t);let n=e.parse(t);return e===ma&&(n=c8(n)),n}const I2=(t,e)=>{const n=Ub(t),r=Ub(e),i={...n};return s=>(i.red=Fg(n.red,r.red,s),i.green=Fg(n.green,r.green,s),i.blue=Fg(n.blue,r.blue,s),i.alpha=st(n.alpha,r.alpha,s),qs.transform(i))};function h8(t){var e,n;return isNaN(t)&&id(t)&&(((e=t.match(um))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ZN))===null||n===void 0?void 0:n.length)||0)>0}const A2={regex:iz,countKey:"Vars",token:"${v}",parse:ht},P2={regex:ZN,countKey:"Colors",token:"${c}",parse:rn.parse},C2={regex:um,countKey:"Numbers",token:"${n}",parse:Mo.parse};function Bg(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function Wf(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Bg(n,A2),Bg(n,P2),Bg(n,C2),n}function R2(t){return Wf(t).values}function k2(t){const{values:e,numColors:n,numVars:r,tokenised:i}=Wf(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(A2.token,o[l]):l<r+n?a=a.replace(P2.token,rn.transform(o[l])):a=a.replace(C2.token,$c(o[l]));return a}}const f8=t=>typeof t=="number"?0:t;function p8(t){const e=R2(t);return k2(t)(e.map(f8))}const ls={test:h8,parse:R2,createTransformer:k2,getAnimatableNone:p8},N2=(t,e)=>n=>`${n>0?e:t}`;function D2(t,e){return typeof t=="number"?n=>st(t,e,n):rn.test(t)?I2(t,e):t.startsWith("var(")?N2(t,e):j2(t,e)}const V2=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>D2(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},m8=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=D2(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},j2=(t,e)=>{const n=ls.createTransformer(e),r=Wf(t),i=Wf(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Hi(V2(r.values,i.values),n):N2(t,e)},Nu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},zb=(t,e)=>n=>st(t,e,n);function g8(t){return typeof t=="number"?zb:typeof t=="string"?rn.test(t)?I2:j2:Array.isArray(t)?V2:typeof t=="object"?m8:zb}function y8(t,e,n){const r=[],i=n||g8(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ht:e;a=Hi(l,a)}r.push(a)}return r}function M2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Kx(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=y8(e,r,i),a=o.length,l=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const h=Nu(t[d],t[d+1],c);return o[d](h)};return n?c=>l(as(t[0],t[s-1],c)):l}function v8(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Nu(0,e,r);t.push(st(n,1,i))}}function w8(t){const e=[0];return v8(e,t.length-1),e}function x8(t,e){return t.map(n=>n*e)}function _8(t,e){return t.map(()=>e||x2).splice(0,t.length-1)}function Gf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=n8(r)?r.map($b):$b(r),s={done:!1,value:e[0]},o=x8(n&&n.length===e.length?n:w8(e),t),a=M2(o,e,{ease:Array.isArray(i)?i:_8(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function O2(t,e){return e?t*(1e3/e):0}const T8=5;function L2(t,e,n){const r=Math.max(e-T8,0);return O2(n-t(r),e-r)}const $g=.001,E8=.01,Wb=10,b8=.05,S8=1;function I8({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;Hz(t<=Ki(Wb));let o=1-e;o=as(b8,S8,o),t=as(E8,Wb,Hr(t)),o<1?(i=c=>{const d=c*o,h=d*t,p=d-n,m=Hv(c,o),x=Math.exp(-h);return $g-p/m*x},s=c=>{const h=c*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),v=Hv(Math.pow(c,2),o);return(-i(c)+$g>0?-1:1)*((p-m)*x)/v}):(i=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-$g+d*h},s=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=P8(i,s,a);if(t=Ki(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const A8=12;function P8(t,e,n){let r=n;for(let i=1;i<A8;i++)r=r-t(r)/e(r);return r}function Hv(t,e){return t*Math.sqrt(1-e*e)}const C8=["duration","bounce"],R8=["stiffness","damping","mass"];function Gb(t,e){return e.some(n=>t[n]!==void 0)}function k8(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Gb(t,R8)&&Gb(t,C8)){const n=I8(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function F2({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:p}=k8({...r,velocity:-Hr(r.velocity||0)}),m=h||0,x=l/(2*Math.sqrt(a*c)),v=s-i,E=Hr(Math.sqrt(a/c)),y=Math.abs(v)<5;n||(n=y?.01:2),e||(e=y?.005:.5);let w;if(x<1){const T=Hv(E,x);w=C=>{const D=Math.exp(-x*E*C);return s-D*((m+x*E*v)/T*Math.sin(T*C)+v*Math.cos(T*C))}}else if(x===1)w=T=>s-Math.exp(-E*T)*(v+(m+E*v)*T);else{const T=E*Math.sqrt(x*x-1);w=C=>{const D=Math.exp(-x*E*C),j=Math.min(T*C,300);return s-D*((m+x*E*v)*Math.sinh(j)+T*v*Math.cosh(j))/T}}return{calculatedDuration:p&&d||null,next:T=>{const C=w(T);if(p)o.done=T>=d;else{let D=m;T!==0&&(x<1?D=L2(w,T,C):D=0);const j=Math.abs(D)<=n,A=Math.abs(s-C)<=e;o.done=j&&A}return o.value=o.done?s:C,o}}}function qb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},m=S=>a!==void 0&&S<a||l!==void 0&&S>l,x=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let v=n*e;const E=h+v,y=o===void 0?E:o(E);y!==E&&(v=y-h);const w=S=>-v*Math.exp(-S/r),T=S=>y+w(S),C=S=>{const I=w(S),P=T(S);p.done=Math.abs(I)<=c,p.value=p.done?y:P};let D,j;const A=S=>{m(p.value)&&(D=S,j=F2({keyframes:[p.value,x(p.value)],velocity:L2(T,S,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return A(0),{calculatedDuration:null,next:S=>{let I=!1;return!j&&D===void 0&&(I=!0,C(S),A(S)),D!==void 0&&S>D?j.next(S-D):(!I&&C(S),p)}}}const N8=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ye.update(e,!0),stop:()=>ni(e),now:()=>Ht.isProcessing?Ht.timestamp:performance.now()}},Hb=2e4;function Kb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Hb;)e+=n,r=t.next(e);return e>=Hb?1/0:e}const D8={decay:qb,inertia:qb,tween:Gf,keyframes:Gf,spring:F2};function qf({autoplay:t=!0,delay:e=0,driver:n=N8,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:h,...p}){let m=1,x=!1,v,E;const y=()=>{E=new Promise(W=>{v=W})};y();let w;const T=D8[i]||Gf;let C;T!==Gf&&typeof r[0]!="number"&&(C=M2([0,100],r,{clamp:!1}),r=[0,100]);const D=T({...p,keyframes:r});let j;a==="mirror"&&(j=T({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let A="idle",S=null,I=null,P=null;D.calculatedDuration===null&&s&&(D.calculatedDuration=Kb(D));const{calculatedDuration:k}=D;let V=1/0,N=1/0;k!==null&&(V=k+o,N=V*(s+1)-o);let G=0;const K=W=>{if(I===null)return;m>0&&(I=Math.min(I,W)),m<0&&(I=Math.min(W-N/m,I)),S!==null?G=S:G=Math.round(W-I)*m;const B=G-e*(m>=0?1:-1),Y=m>=0?B<0:B>N;G=Math.max(B,0),A==="finished"&&S===null&&(G=N);let se=G,Pe=D;if(s){const we=Math.min(G,N)/V;let ve=Math.floor(we),fe=we%1;!fe&&we>=1&&(fe=1),fe===1&&ve--,ve=Math.min(ve,s+1),!!(ve%2)&&(a==="reverse"?(fe=1-fe,o&&(fe-=o/V)):a==="mirror"&&(Pe=j)),se=as(0,1,fe)*V}const le=Y?{done:!1,value:r[0]}:Pe.next(se);C&&(le.value=C(le.value));let{done:Z}=le;!Y&&k!==null&&(Z=m>=0?G>=N:G<=0);const me=S===null&&(A==="finished"||A==="running"&&Z);return h&&h(le.value),me&&M(),le},q=()=>{w&&w.stop(),w=void 0},J=()=>{A="idle",q(),v(),y(),I=P=null},M=()=>{A="finished",d&&d(),q(),v()},$=()=>{if(x)return;w||(w=n(K));const W=w.now();l&&l(),S!==null?I=W-S:(!I||A==="finished")&&(I=W),A==="finished"&&y(),P=I,S=null,A="running",w.start()};t&&$();const z={then(W,B){return E.then(W,B)},get time(){return Hr(G)},set time(W){W=Ki(W),G=W,S!==null||!w||m===0?S=W:I=w.now()-W/m},get duration(){const W=D.calculatedDuration===null?Kb(D):D.calculatedDuration;return Hr(W)},get speed(){return m},set speed(W){W===m||!w||(m=W,z.time=Hr(G))},get state(){return A},play:$,pause:()=>{A="paused",S=G},stop:()=>{x=!0,A!=="idle"&&(A="idle",c&&c(),J())},cancel:()=>{P!==null&&K(P),J()},complete:()=>{A="finished"},sample:W=>(I=0,K(W))};return z}function V8(t){let e;return()=>(e===void 0&&(e=t()),e)}const j8=V8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),M8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ih=10,O8=2e4,L8=(t,e)=>e.type==="spring"||t==="backgroundColor"||!g2(e.ease);function F8(t,e,{onUpdate:n,onComplete:r,...i}){if(!(j8()&&M8.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(T=>{a=T})};d();let{keyframes:h,duration:p=300,ease:m,times:x}=i;if(L8(e,i)){const T=qf({...i,repeat:0,delay:0});let C={done:!1,value:h[0]};const D=[];let j=0;for(;!C.done&&j<O8;)C=T.sample(j),D.push(C.value),j+=ih;x=void 0,h=D,p=j-ih,m="linear"}const v=Qz(t.owner.current,e,h,{...i,duration:p,ease:m,times:x}),E=()=>{c=!1,v.cancel()},y=()=>{c=!0,Ye.update(E),a(),d()};return v.onfinish=()=>{c||(t.set(Yz(h,i)),r&&r(),y())},{then(T,C){return l.then(T,C)},attachTimeline(T){return v.timeline=T,v.onfinish=null,ht},get time(){return Hr(v.currentTime||0)},set time(T){v.currentTime=Ki(T)},get speed(){return v.playbackRate},set speed(T){v.playbackRate=T},get duration(){return Hr(p)},play:()=>{o||(v.play(),ni(E))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:T}=v;if(T){const C=qf({...i,autoplay:!1});t.setWithVelocity(C.sample(T-ih).value,C.sample(T).value,ih)}y()},complete:()=>{c||v.finish()},cancel:y}}function B8({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ht,pause:ht,stop:ht,then:s=>(s(),Promise.resolve()),cancel:ht,complete:ht});return e?qf({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const $8={type:"spring",stiffness:500,damping:25,restSpeed:10},U8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),z8={type:"keyframes",duration:.8},W8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},G8=(t,{keyframes:e})=>e.length>2?z8:jo.has(t)?t.startsWith("scale")?U8(e[1]):$8:W8,Kv=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ls.test(e)||e==="0")&&!e.startsWith("url(")),q8=new Set(["brightness","contrast","saturate","opacity"]);function H8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(um)||[];if(!r)return t;const i=n.replace(r,"");let s=q8.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const K8=/([a-z-]*)\(.*?\)/g,Qv={...ls,getAnimatableNone:t=>{const e=t.match(K8);return e?e.map(H8).join(" "):t}},Q8={...e2,color:rn,backgroundColor:rn,outlineColor:rn,fill:rn,stroke:rn,borderColor:rn,borderTopColor:rn,borderRightColor:rn,borderBottomColor:rn,borderLeftColor:rn,filter:Qv,WebkitFilter:Qv},Jx=t=>Q8[t];function B2(t,e){let n=Jx(t);return n!==Qv&&(n=ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $2=t=>/^0[^.\s]+$/.test(t);function Y8(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||$2(t)}function X8(t,e,n,r){const i=Kv(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),Y8(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];s[d]=B2(e,a)}return s}function J8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function Zx(t,e){return t[e]||t.default||t}const Z8={skipAnimations:!1},e_=(t,e,n,r={})=>i=>{const s=Zx(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ki(o);const l=X8(e,t,n,s),c=l[0],d=l[l.length-1],h=Kv(t,c),p=Kv(t,d);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:x=>{e.set(x),s.onUpdate&&s.onUpdate(x)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(J8(s)||(m={...m,...G8(t,m)}),m.duration&&(m.duration=Ki(m.duration)),m.repeatDelay&&(m.repeatDelay=Ki(m.repeatDelay)),!h||!p||Kz.current||s.type===!1||Z8.skipAnimations)return B8(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=F8(e,t,m);if(x)return x}return qf(m)};function Hf(t){return!!(Tn(t)&&t.add)}const U2=t=>/^\-?\d*\.?\d+$/.test(t);function t_(t,e){t.indexOf(e)===-1&&t.push(e)}function n_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class r_{constructor(){this.subscriptions=[]}add(e){return t_(this.subscriptions,e),()=>n_(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const e7=t=>!isNaN(parseFloat(t));class t7{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Ht;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=e7(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new r_);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ye.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?O2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function al(t,e){return new t7(t,e)}const z2=t=>e=>e.test(t),n7={test:t=>t==="auto",parse:t=>t},W2=[Mo,he,Ar,xi,lz,az,n7],cc=t=>W2.find(z2(t)),r7=[...W2,rn,ls],i7=t=>r7.find(z2(t));function s7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,al(n))}function o7(t,e){const n=hm(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Ez(s[o]);s7(t,o,a)}}function a7(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(U2(d)||$2(d))?d=parseFloat(d):!i7(d)&&ls.test(c)&&(d=B2(l,c)),t.addValue(l,al(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function l7(t,e){return e?(e[t]||e.default||e).from:void 0}function c7(t,e,n){const r={};for(const i in t){const s=l7(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function u7({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function d7(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function G2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const p=t.getValue(h),m=a[h];if(!p||m===void 0||d&&u7(d,h))continue;const x={delay:n,elapsed:0,...Zx(s||{},h)};if(window.HandoffAppearAnimations){const y=t.getProps()[qN];if(y){const w=window.HandoffAppearAnimations(y,h,p,Ye);w!==null&&(x.elapsed=w,x.isHandoff=!0)}}let v=!x.isHandoff&&!d7(p,m);if(x.type==="spring"&&(p.getVelocity()||x.velocity)&&(v=!1),p.animation&&(v=!1),v)continue;p.start(e_(h,p,m,t.shouldReduceMotion&&jo.has(h)?{type:!1}:x));const E=p.animation;Hf(l)&&(l.add(h),E.then(()=>l.remove(h))),c.push(E)}return o&&Promise.all(c).then(()=>{o&&o7(t,o)}),c}function Yv(t,e,n={}){const r=hm(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(G2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=i;return h7(t,e,c+l,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function h7(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(f7).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(Yv(c,e,{...s,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function f7(t,e){return t.sortNodePosition(e)}function p7(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Yv(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Yv(t,e,n);else{const i=typeof e=="function"?hm(t,e,n.custom):e;r=Promise.all(G2(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const m7=[...Fx].reverse(),g7=Fx.length;function y7(t){return e=>Promise.all(e.map(({animation:n,options:r})=>p7(t,n,r)))}function v7(t){let e=y7(t);const n=x7();let r=!0;const i=(l,c)=>{const d=hm(t,c);if(d){const{transition:h,transitionEnd:p,...m}=d;l={...l,...m,...p}}return l};function s(l){e=l(t)}function o(l,c){const d=t.getProps(),h=t.getVariantContext(!0)||{},p=[],m=new Set;let x={},v=1/0;for(let y=0;y<g7;y++){const w=m7[y],T=n[w],C=d[w]!==void 0?d[w]:h[w],D=Ru(C),j=w===c?T.isActive:null;j===!1&&(v=y);let A=C===h[w]&&C!==d[w]&&D;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),T.protectedKeys={...x},!T.isActive&&j===null||!C&&!T.prevProp||lm(C)||typeof C=="boolean")continue;let I=w7(T.prevProp,C)||w===c&&T.isActive&&!A&&D||y>v&&D,P=!1;const k=Array.isArray(C)?C:[C];let V=k.reduce(i,{});j===!1&&(V={});const{prevResolvedValues:N={}}=T,G={...N,...V},K=q=>{I=!0,m.has(q)&&(P=!0,m.delete(q)),T.needsAnimating[q]=!0};for(const q in G){const J=V[q],M=N[q];if(x.hasOwnProperty(q))continue;let $=!1;zf(J)&&zf(M)?$=!p2(J,M):$=J!==M,$?J!==void 0?K(q):m.add(q):J!==void 0&&m.has(q)?K(q):T.protectedKeys[q]=!0}T.prevProp=C,T.prevResolvedValues=V,T.isActive&&(x={...x,...V}),r&&t.blockInitialAnimation&&(I=!1),I&&(!A||P)&&p.push(...k.map(q=>({animation:q,options:{type:w,...l}})))}if(m.size){const y={};m.forEach(w=>{const T=t.getBaseTarget(w);T!==void 0&&(y[w]=T)}),p.push({animation:y})}let E=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(p):Promise.resolve()}function a(l,c,d){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(m=>{var x;return(x=m.animationState)===null||x===void 0?void 0:x.setActive(l,c)}),n[l].isActive=c;const p=o(d,l);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function w7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!p2(e,t):!1}function Cs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x7(){return{animate:Cs(!0),whileInView:Cs(),whileHover:Cs(),whileTap:Cs(),whileDrag:Cs(),whileFocus:Cs(),exit:Cs()}}class _7 extends xs{constructor(e){super(e),e.animationState||(e.animationState=v7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),lm(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let T7=0;class E7 extends xs{constructor(){super(...arguments),this.id=T7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const b7={animation:{Feature:_7},exit:{Feature:E7}},Qb=(t,e)=>Math.abs(t-e);function S7(t,e){const n=Qb(t.x,e.x),r=Qb(t.y,e.y);return Math.sqrt(n**2+r**2)}class q2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=zg(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=S7(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:x}=h,{timestamp:v}=Ht;this.history.push({...x,timestamp:v});const{onStart:E,onMove:y}=this.handlers;p||(E&&E(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ug(p,this.transformPagePoint),Ye.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=zg(h.type==="pointercancel"?this.lastMoveEventInfo:Ug(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,E),x&&x(h,E)},!c2(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=dm(e),a=Ug(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ht;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,zg(a,this.history)),this.removeListeners=Hi(qr(this.contextWindow,"pointermove",this.handlePointerMove),qr(this.contextWindow,"pointerup",this.handlePointerUp),qr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ni(this.updatePoint)}}function Ug(t,e){return e?{point:e(t.point)}:t}function Yb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zg({point:t},e){return{point:t,delta:Yb(t,H2(e)),offset:Yb(t,I7(e)),velocity:A7(e,.1)}}function I7(t){return t[0]}function H2(t){return t[t.length-1]}function A7(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=H2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ki(e)));)n--;if(!r)return{x:0,y:0};const s=Hr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Mn(t){return t.max-t.min}function Xv(t,e=0,n=.01){return Math.abs(t-e)<=n}function Xb(t,e,n,r=.5){t.origin=r,t.originPoint=st(e.min,e.max,t.origin),t.scale=Mn(n)/Mn(e),(Xv(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(Xv(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Uc(t,e,n,r){Xb(t.x,e.x,n.x,r?r.originX:void 0),Xb(t.y,e.y,n.y,r?r.originY:void 0)}function Jb(t,e,n){t.min=n.min+e.min,t.max=t.min+Mn(e)}function P7(t,e,n){Jb(t.x,e.x,n.x),Jb(t.y,e.y,n.y)}function Zb(t,e,n){t.min=e.min-n.min,t.max=t.min+Mn(e)}function zc(t,e,n){Zb(t.x,e.x,n.x),Zb(t.y,e.y,n.y)}function C7(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?st(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?st(n,t,r.max):Math.min(t,n)),t}function eS(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function R7(t,{top:e,left:n,bottom:r,right:i}){return{x:eS(t.x,n,i),y:eS(t.y,e,r)}}function tS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function k7(t,e){return{x:tS(t.x,e.x),y:tS(t.y,e.y)}}function N7(t,e){let n=.5;const r=Mn(t),i=Mn(e);return i>r?n=Nu(e.min,e.max-r,t.min):r>i&&(n=Nu(t.min,t.max-i,e.min)),as(0,1,n)}function D7(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Jv=.35;function V7(t=Jv){return t===!1?t=0:t===!0&&(t=Jv),{x:nS(t,"left","right"),y:nS(t,"top","bottom")}}function nS(t,e,n){return{min:rS(t,e),max:rS(t,n)}}function rS(t,e){return typeof t=="number"?t:t[e]||0}const iS=()=>({translate:0,scale:1,origin:0,originPoint:0}),ga=()=>({x:iS(),y:iS()}),sS=()=>({min:0,max:0}),vt=()=>({x:sS(),y:sS()});function Bn(t){return[t("x"),t("y")]}function K2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function j7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function M7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Wg(t){return t===void 0||t===1}function Zv({scale:t,scaleX:e,scaleY:n}){return!Wg(t)||!Wg(e)||!Wg(n)}function js(t){return Zv(t)||Q2(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Q2(t){return oS(t.x)||oS(t.y)}function oS(t){return t&&t!=="0%"}function Kf(t,e,n){const r=t-n,i=e*r;return n+i}function aS(t,e,n,r,i){return i!==void 0&&(t=Kf(t,i,r)),Kf(t,n,r)+e}function e0(t,e=0,n=1,r,i){t.min=aS(t.min,e,n,r,i),t.max=aS(t.max,e,n,r,i)}function Y2(t,{x:e,y:n}){e0(t.x,e.translate,e.scale,e.originPoint),e0(t.y,n.translate,n.scale,n.originPoint)}function O7(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ya(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Y2(t,o)),r&&js(s.latestValues)&&ya(t,s.latestValues))}e.x=lS(e.x),e.y=lS(e.y)}function lS(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function bi(t,e){t.min=t.min+e,t.max=t.max+e}function cS(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=st(t.min,t.max,s);e0(t,e[n],e[r],o,e.scale)}const L7=["x","scaleX","originX"],F7=["y","scaleY","originY"];function ya(t,e){cS(t.x,e,L7),cS(t.y,e,F7)}function X2(t,e){return K2(M7(t.getBoundingClientRect(),e))}function B7(t,e,n){const r=X2(t,n),{scroll:i}=e;return i&&(bi(r.x,i.offset.x),bi(r.y,i.offset.y)),r}const J2=({current:t})=>t?t.ownerDocument.defaultView:null,$7=new WeakMap;class U7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(dm(d,"page").point)},s=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:x}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=d2(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bn(E=>{let y=this.getAxisMotionValue(E).get()||0;if(Ar.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[E];T&&(y=Mn(T)*(parseFloat(y)/100))}}this.originPoint[E]=y}),x&&Ye.update(()=>x(d,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:x,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:E}=h;if(m&&this.currentDirection===null){this.currentDirection=z7(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,E),this.updateAxis("y",h.point,E),this.visualElement.render(),v&&v(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Bn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new q2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:J2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ye.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!sh(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=C7(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&pa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=R7(i.layoutBox,n):this.constraints=!1,this.elastic=V7(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Bn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=D7(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!pa(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=B7(r,i.root,this.visualElement.getTransformPagePoint());let o=k7(i.layout.layoutBox,s);if(n){const a=n(j7(o));this.hasMutatedConstraints=!!a,a&&(o=K2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Bn(d=>{if(!sh(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(e_(e,r,0,n))}stopAnimation(){Bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bn(n=>{const{drag:r}=this.getProps();if(!sh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-st(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!pa(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=N7({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bn(o=>{if(!sh(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(st(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;$7.set(this.visualElement,this);const e=this.visualElement.current,n=qr(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();pa(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Wr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Bn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Jv,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function sh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function z7(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class W7 extends xs{constructor(e){super(e),this.removeGroupControls=ht,this.removeListeners=ht,this.controls=new U7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ht}unmount(){this.removeGroupControls(),this.removeListeners()}}const uS=t=>(e,n)=>{t&&Ye.update(()=>t(e,n))};class G7 extends xs{constructor(){super(...arguments),this.removePointerDownListener=ht}onPointerDown(e){this.session=new q2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:J2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uS(e),onStart:uS(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ye.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=qr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function q7(){const t=_.useContext(Ox);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=_.useId();return _.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Lh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dS(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(he.test(t))t=parseFloat(t);else return t;const n=dS(t,e.target.x),r=dS(t,e.target.y);return`${n}% ${r}%`}},H7={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ls.parse(t);if(i.length>5)return r;const s=ls.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=st(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class K7 extends ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;ez(Q7),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Lh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ye.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Z2(t){const[e,n]=q7(),r=_.useContext(KN);return ce.createElement(K7,{...t,layoutGroup:r,switchLayoutGroup:_.useContext(QN),isPresent:e,safeToRemove:n})}const Q7={borderRadius:{...uc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uc,borderTopRightRadius:uc,borderBottomLeftRadius:uc,borderBottomRightRadius:uc,boxShadow:H7},eD=["TopLeft","TopRight","BottomLeft","BottomRight"],Y7=eD.length,hS=t=>typeof t=="string"?parseFloat(t):t,fS=t=>typeof t=="number"||he.test(t);function X7(t,e,n,r,i,s){i?(t.opacity=st(0,n.opacity!==void 0?n.opacity:1,J7(r)),t.opacityExit=st(e.opacity!==void 0?e.opacity:1,0,Z7(r))):s&&(t.opacity=st(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Y7;o++){const a=`border${eD[o]}Radius`;let l=pS(e,a),c=pS(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||fS(l)===fS(c)?(t[a]=Math.max(st(hS(l),hS(c),r),0),(Ar.test(c)||Ar.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,r))}function pS(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const J7=tD(0,.5,E2),Z7=tD(.5,.95,ht);function tD(t,e,n){return r=>r<t?0:r>e?1:n(Nu(t,e,r))}function mS(t,e){t.min=e.min,t.max=e.max}function Fn(t,e){mS(t.x,e.x),mS(t.y,e.y)}function gS(t,e,n,r,i){return t-=e,t=Kf(t,1/n,r),i!==void 0&&(t=Kf(t,1/i,r)),t}function eW(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ar.test(e)&&(e=parseFloat(e),e=st(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=st(s.min,s.max,r);t===s&&(a-=e),t.min=gS(t.min,e,n,a,i),t.max=gS(t.max,e,n,a,i)}function yS(t,e,[n,r,i],s,o){eW(t,e[n],e[r],e[i],e.scale,s,o)}const tW=["x","scaleX","originX"],nW=["y","scaleY","originY"];function vS(t,e,n,r){yS(t.x,e,tW,n?n.x:void 0,r?r.x:void 0),yS(t.y,e,nW,n?n.y:void 0,r?r.y:void 0)}function wS(t){return t.translate===0&&t.scale===1}function nD(t){return wS(t.x)&&wS(t.y)}function rW(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function rD(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function xS(t){return Mn(t.x)/Mn(t.y)}class iW{constructor(){this.members=[]}add(e){t_(this.members,e),e.scheduleRender()}remove(e){if(n_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _S(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const sW=(t,e)=>t.depth-e.depth;class oW{constructor(){this.children=[],this.isDirty=!1}add(e){t_(this.children,e),this.isDirty=!0}remove(e){n_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sW),this.isDirty=!1,this.children.forEach(e)}}function aW(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ni(r),t(s-e))};return Ye.read(r,!0),()=>ni(r)}function lW(t){window.MotionDebug&&window.MotionDebug.record(t)}function cW(t){return t instanceof SVGElement&&t.tagName!=="svg"}function uW(t,e,n){const r=Tn(t)?t:al(t);return r.start(e_("",r,e,n)),r.animation}const TS=["","X","Y","Z"],dW={visibility:"hidden"},ES=1e3;let hW=0;const Ms={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function iD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=hW++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ms.totalNodes=Ms.resolvedTargetDeltas=Ms.recalculatedProjection=0,this.nodes.forEach(mW),this.nodes.forEach(xW),this.nodes.forEach(_W),this.nodes.forEach(gW),lW(Ms)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oW)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new r_),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=cW(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=aW(p,250),Lh.hasAnimatedSinceResize&&(Lh.hasAnimatedSinceResize=!1,this.nodes.forEach(SS))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||IW,{onLayoutAnimationStart:E,onLayoutAnimationComplete:y}=d.getProps(),w=!this.targetLayout||!rD(this.targetLayout,x)||m,T=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||T||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,T);const C={...Zx(v,"layout"),onPlay:E,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else p||SS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bS);return}this.isUpdating||this.nodes.forEach(vW),this.isUpdating=!1,this.nodes.forEach(wW),this.nodes.forEach(fW),this.nodes.forEach(pW),this.clearAllSnapshots();const a=performance.now();Ht.delta=as(0,1e3/60,a-Ht.timestamp),Ht.timestamp=a,Ht.isProcessing=!0,Vg.update.process(Ht),Vg.preRender.process(Ht),Vg.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(yW),this.sharedNodes.forEach(EW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!nD(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||js(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),AW(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return vt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(bi(a.x,l.offset.x),bi(a.y,l.offset.y)),a}removeElementScroll(o){const a=vt();Fn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){Fn(a,o);const{scroll:p}=this.root;p&&(bi(a.x,-p.offset.x),bi(a.y,-p.offset.y))}bi(a.x,d.offset.x),bi(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=vt();Fn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ya(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),js(d.latestValues)&&ya(l,d.latestValues)}return js(this.latestValues)&&ya(l,this.latestValues),l}removeTransform(o){const a=vt();Fn(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!js(c.latestValues))continue;Zv(c.latestValues)&&c.updateSnapshot();const d=vt(),h=c.measurePageBox();Fn(d,h),vS(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return js(this.latestValues)&&vS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Ht.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vt(),this.relativeTargetOrigin=vt(),zc(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=vt(),this.targetWithTransforms=vt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),P7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),Y2(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vt(),this.relativeTargetOrigin=vt(),zc(this.relativeTargetOrigin,this.target,m.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ms.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Zv(this.parent.latestValues)||Q2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Fn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;O7(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=ga(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ga(),this.projectionDeltaWithTransform=ga());const v=this.projectionTransform;Uc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=_S(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Ms.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=vt(),m=l?l.source:void 0,x=this.layout?this.layout.source:void 0,v=m!==x,E=this.getStack(),y=!E||E.members.length<=1,w=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(SW));this.animationProgress=0;let T;this.mixTargetDelta=C=>{const D=C/1e3;IS(h.x,o.x,D),IS(h.y,o.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bW(this.relativeTarget,this.relativeTargetOrigin,p,D),T&&rW(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=vt()),Fn(T,this.relativeTarget)),v&&(this.animationValues=d,X7(d,c,this.latestValues,D,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ye.update(()=>{Lh.hasAnimatedSinceResize=!0,this.currentAnimation=uW(0,ES,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ES),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&sD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||vt();const h=Mn(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Mn(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Fn(a,l),ya(a,d),Uc(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iW),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<TS.length;d++){const h="rotate"+TS[d];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return dW;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Oh(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Oh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!js(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=_S(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y:x}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in $f){if(p[v]===void 0)continue;const{correct:E,applyTo:y}=$f[v],w=c.transform==="none"?p[v]:E(p[v],h);if(y){const T=y.length;for(let C=0;C<T;C++)c[y[C]]=w}else c[v]=w}return this.options.layoutId&&(c.pointerEvents=h===this?Oh(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(bS),this.root.sharedNodes.clear()}}}function fW(t){t.updateLayout()}function pW(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Bn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Mn(p);p.min=r[h].min,p.max=p.min+m}):sD(s,n.layoutBox,r)&&Bn(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=Mn(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=ga();Uc(a,r,n.layoutBox);const l=ga();o?Uc(l,t.applyTransform(i,!0),n.measuredBox):Uc(l,r,n.layoutBox);const c=!nD(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const x=vt();zc(x,n.layoutBox,p.layoutBox);const v=vt();zc(v,r,m.layoutBox),rD(x,v)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function mW(t){Ms.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yW(t){t.clearSnapshot()}function bS(t){t.clearMeasurements()}function vW(t){t.isLayoutDirty=!1}function wW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function SS(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xW(t){t.resolveTargetDelta()}function _W(t){t.calcProjection()}function TW(t){t.resetRotation()}function EW(t){t.removeLeadSnapshot()}function IS(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AS(t,e,n,r){t.min=st(e.min,n.min,r),t.max=st(e.max,n.max,r)}function bW(t,e,n,r){AS(t.x,e.x,n.x,r),AS(t.y,e.y,n.y,r)}function SW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IW={duration:.45,ease:[.4,0,.1,1]},PS=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),CS=PS("applewebkit/")&&!PS("chrome/")?Math.round:ht;function RS(t){t.min=CS(t.min),t.max=CS(t.max)}function AW(t){RS(t.x),RS(t.y)}function sD(t,e,n){return t==="position"||t==="preserve-aspect"&&!Xv(xS(e),xS(n),.2)}const PW=iD({attachResizeListener:(t,e)=>Wr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gg={current:void 0},oD=iD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gg.current){const t=new PW({});t.mount(window),t.setOptions({layoutScroll:!0}),Gg.current=t}return Gg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CW={pan:{Feature:G7},drag:{Feature:W7,ProjectionNode:oD,MeasureLayout:Z2}},RW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function kW(t){const e=RW.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function t0(t,e,n=1){const[r,i]=kW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return U2(o)?parseFloat(o):o}else return Wv(i)?t0(i,e,n+1):i}function NW(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Wv(s))return;const o=t0(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Wv(s))continue;const o=t0(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const DW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),aD=t=>DW.has(t),VW=t=>Object.keys(t).some(aD),kS=t=>t===Mo||t===he,NS=(t,e)=>parseFloat(t.split(", ")[e]),DS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return NS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?NS(s[1],t):0}},jW=new Set(["x","y","z"]),MW=rd.filter(t=>!jW.has(t));function OW(t){const e=[];return MW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ll={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:DS(4,13),y:DS(5,14)};ll.translateX=ll.x;ll.translateY=ll.y;const LW=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=ll[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=ll[c](l,s)}),t},FW=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(aD);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=cc(d);const p=e[l];let m;if(zf(p)){const x=p.length,v=p[0]===null?1:0;d=p[v],h=cc(d);for(let E=v;E<x&&p[E]!==null;E++)m?Kx(cc(p[E])===m):m=cc(p[E])}else m=cc(p);if(h!==m)if(kS(h)&&kS(m)){const x=c.get();typeof x=="string"&&c.set(parseFloat(x)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===he&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||p===0)?d===0?c.set(m.transform(d)):e[l]=h.transform(p):(o||(s=OW(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=LW(e,t,a);return s.length&&s.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),am&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function BW(t,e,n,r){return VW(e)?FW(t,e,n,r):{target:e,transitionEnd:r}}const $W=(t,e,n,r)=>{const i=NW(t,e,r);return e=i.target,r=i.transitionEnd,BW(t,e,n,r)},n0={current:null},lD={current:!1};function UW(){if(lD.current=!0,!!am)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>n0.current=t.matches;t.addListener(e),e()}else n0.current=!1}function zW(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Tn(s))t.addValue(i,s),Hf(r)&&r.add(i);else if(Tn(o))t.addValue(i,al(s,{owner:t})),Hf(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,al(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const VS=new WeakMap,cD=Object.keys(ku),WW=cD.length,jS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],GW=Bx.length;class qW{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ye.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=cm(n),this.isVariantNode=HN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const p=d[h];a[h]!==void 0&&Tn(p)&&(p.set(a[h],!1),Hf(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,VS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lD.current||UW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:n0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){VS.delete(this.current),this.projection&&this.projection.unmount(),ni(this.notifyUpdate),ni(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=jo.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ye.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<WW;l++){const c=cD[l],{isEnabled:d,Feature:h,ProjectionNode:p,MeasureLayout:m}=ku[c];p&&(o=p),d(n)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:h,layoutScroll:p,layoutRoot:m}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||h&&pa(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jS.length;r++){const i=jS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=zW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<GW;r++){const i=Bx[r],s=this.props[i];(Ru(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=al(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Hx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Tn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new r_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uD extends qW{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=c7(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){a7(this,r,o);const a=$W(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function HW(t){return window.getComputedStyle(t)}class KW extends uD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(jo.has(n)){const r=Jx(n);return r&&r.default||0}else{const r=HW(e),i=(JN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return X2(e,n)}build(e,n,r,i){Ux(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return qx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){i2(e,n,r,i)}}class QW extends uD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(jo.has(n)){const r=Jx(n);return r&&r.default||0}return n=s2.has(n)?n:Lx(n),e.getAttribute(n)}measureInstanceViewportBox(){return vt()}scrapeMotionValuesFromProps(e,n){return a2(e,n)}build(e,n,r,i){Wx(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){o2(e,n,r,i)}mount(e){this.isSVGTag=Gx(e.tagName),super.mount(e)}}const YW=(t,e)=>$x(t)?new QW(e,{enableHardwareAcceleration:!1}):new KW(e,{enableHardwareAcceleration:!0}),XW={layout:{ProjectionNode:oD,MeasureLayout:Z2}},JW={...b7,...Wz,...CW,...XW},Yt=JU((t,e)=>kz(t,e,JW,YW));function Qf({className:t="",style:e={},size:n=40,...r}){const[i,s]=_.useState({light:"",dark:""}),[o,a]=_.useState(!1);_.useEffect(()=>{const c=JSON.parse(localStorage.getItem("siteSettings")||"{}");s({light:c.logoLight||"",dark:c.logoDark||""});const d=window.matchMedia("(prefers-color-scheme: dark)");a(d.matches);const h=p=>a(p.matches);return d.addEventListener("change",h),()=>d.removeEventListener("change",h)},[]);const l=o?i.dark:i.light;return l?f.jsx("img",{src:l,alt:"Logo Website",className:`object-contain ${t}`,style:{height:n,maxHeight:n,...e},height:n,...r}):null}function ad({className:t=""}){const[e,n]=ce.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");ce.useEffect(()=>{e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="dark"?"light":"dark")};return f.jsx("button",{"aria-label":"Toggle theme",onClick:r,className:`rounded-full p-2 border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 shadow hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${t}`,type:"button",children:e==="dark"?f.jsx(o6,{className:"h-5 w-5"}):f.jsx(JF,{className:"h-5 w-5"})})}const ZW=vw("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ue=ce.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?Z4:"button";return f.jsx(o,{className:De(ZW({variant:e,size:n,className:t})),ref:s,...i})});ue.displayName="Button";const xn=ce.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:De("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));xn.displayName="Card";const go=ce.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:De("flex flex-col space-y-1.5 p-6",t),...e}));go.displayName="CardHeader";const yo=ce.forwardRef(({className:t,...e},n)=>f.jsx("h3",{ref:n,className:De("text-2xl font-semibold leading-none tracking-tight",t),...e}));yo.displayName="CardTitle";const eG=ce.forwardRef(({className:t,...e},n)=>f.jsx("p",{ref:n,className:De("text-sm text-muted-foreground",t),...e}));eG.displayName="CardDescription";const _n=ce.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:De("p-6 pt-0",t),...e}));_n.displayName="CardContent";const dD=ce.forwardRef(({className:t,...e},n)=>f.jsx("div",{ref:n,className:De("flex items-center p-6 pt-0",t),...e}));dD.displayName="CardFooter";const tG=()=>{const t=Io();ur();const[e,n]=_.useState([]),[r,i]=_.useState(!0),[s,o]=_.useState(1),a=()=>{const h=document.getElementById("templates");h&&h.scrollIntoView({behavior:"smooth",block:"start"})},l=5;_.useEffect(()=>{i(!0),Mx().then(h=>{h&&localStorage.setItem("siteSettings",JSON.stringify(h))}),Dx().then(h=>{const p=h.filter(m=>m.status==="publish");n(p),i(!1)})},[]);const c=h=>{t(`/preview/${h}`)},d=h=>{t(`/order/${h}`)};return f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsx("title",{children:"UndanganKami - Platform Undangan Digital Terbaik"}),f.jsx("meta",{name:"description",content:"Buat undangan digital yang menawan dengan berbagai template menarik. Mudah, cepat, dan elegan untuk hari spesial Anda."})]}),f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900",children:[f.jsx("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-purple-100 dark:border-gray-800 sticky top-0 z-50",children:f.jsx("div",{className:"container mx-auto px-4 py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center space-x-3",children:f.jsx(Qf,{size:44,className:"h-11 w-auto"})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(ad,{}),f.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[f.jsx("a",{href:"#templates",className:"text-gray-700 dark:text-gray-200 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"Template"}),f.jsx("a",{href:"#features",className:"text-gray-700 dark:text-gray-200 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:"Fitur"}),f.jsx(ue,{variant:"outline",onClick:()=>t("/admin/login"),className:"border-purple-200 dark:border-gray-700 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-gray-800",children:"Admin"})]})]})]})})}),f.jsx("section",{className:"py-20 px-4",children:f.jsx("div",{className:"container mx-auto text-center",children:f.jsxs("div",{children:[f.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 font-playfair",children:["Undangan Digital",f.jsx("span",{className:"block gradient-text",children:"Yang Menawan"})]}),f.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Ciptakan undangan pernikahan digital yang elegan dan berkesan untuk hari bahagia Anda"}),f.jsx(ue,{size:"lg",className:"gradient-bg text-white px-8 py-4 text-lg rounded-full hover:shadow-lg transition-all",onClick:()=>document.getElementById("templates").scrollIntoView({behavior:"smooth"}),children:"Lihat Template"})]})})}),f.jsx("section",{id:"features",className:"py-16 px-4 bg-white/50",children:f.jsxs("div",{className:"container mx-auto",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h2",{className:"text-4xl font-bold mb-4 font-playfair",children:"Fitur Unggulan"}),f.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Nikmati berbagai fitur menarik yang membuat undangan Anda semakin istimewa"})]}),f.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:f.jsx(ZF,{className:"h-12 w-12 text-purple-600"}),title:"Template Beragam",description:"Pilihan template yang elegan dan dapat disesuaikan dengan tema pernikahan Anda"},{icon:f.jsx(yC,{className:"h-12 w-12 text-purple-600"}),title:"Musik Islami",description:"Koleksi ayat Al-Quran dan nasyid untuk menambah kekhusyukan undangan"},{icon:f.jsx(gC,{className:"h-12 w-12 text-purple-600"}),title:"Wedding Gift Digital",description:"Fitur cashless untuk memudahkan tamu memberikan hadiah pernikahan"}].map((h,p)=>f.jsx("div",{children:f.jsx(xn,{className:"text-center p-6 card-hover border-purple-100",children:f.jsxs(_n,{className:"pt-6",children:[f.jsx("div",{className:"mb-4 flex justify-center",children:h.icon}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:h.title}),f.jsx("p",{className:"text-gray-600",children:h.description})]})})},p))})]})}),f.jsx("section",{id:"templates",className:"py-16 px-4",children:f.jsxs("div",{className:"container mx-auto",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h2",{className:"text-4xl font-bold mb-4 font-playfair",children:"Template Terbaru"}),f.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Pilih dari koleksi template undangan digital terbaik kami"})]}),r?f.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center",children:[f.jsx(Yt.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.2,ease:"linear"},className:"mb-4",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"#a78bfa",strokeWidth:"6",opacity:"0.2"}),f.jsx("path",{d:"M52 28c0-13.255-10.745-24-24-24",stroke:"#8b5cf6",strokeWidth:"6",strokeLinecap:"round"})]})}),f.jsx(Yt.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-purple-500 text-lg font-semibold",children:"Memuat template..."}),f.jsx(Yt.p,{initial:{opacity:0},animate:{opacity:.7},transition:{delay:1.2,duration:1.2,repeat:1/0,repeatType:"reverse"},className:"text-gray-400 mt-2",children:"Mohon tunggu sebentar, kami sedang mengambil koleksi terbaik untuk Anda."})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.slice((s-1)*l,s*l).map((h,p)=>f.jsx("div",{children:f.jsxs(xn,{className:"overflow-hidden card-hover border-purple-100",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{loading:"lazy",className:"w-full h-64 object-cover",alt:`Template ${h.name}`,src:h.thumbnail||h.image||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/330px-No-Image-Placeholder.svg.png"}),f.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2",children:h.category&&h.category!=="Custom"&&h.category!=="Custom HTML"&&f.jsx("span",{className:"px-3 py-1 rounded-full text-xs bg-purple-100 text-purple-700 font-semibold border border-purple-200 mt-1",children:h.category})})]}),f.jsxs(_n,{className:"p-6",children:[f.jsx("h3",{className:"text-xl font-semibold mb-2",children:h.name}),f.jsx("p",{className:"text-gray-600 mb-2",children:h.description}),f.jsx("div",{className:"mb-2",children:h.discount&&Number(h.discount)>0?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"text-gray-400 line-through mr-2 text-sm",children:["Rp",Number(h.price).toLocaleString("id-ID")]}),f.jsxs("span",{className:"text-purple-700 font-bold text-lg",children:["Rp",(Number(h.price)*(1-Number(h.discount)/100)).toLocaleString("id-ID")]}),f.jsxs("span",{className:"ml-2 text-xs text-green-600 font-semibold",children:["-",h.discount,"%"]})]}):f.jsxs("span",{className:"text-purple-700 font-bold text-lg",children:["Rp",Number(h.price).toLocaleString("id-ID")]})}),f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsxs("span",{className:"flex",children:[f.jsx("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),f.jsx("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),f.jsx("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),f.jsx("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),f.jsx("svg",{className:"h-4 w-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})})]}),f.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"(4.9)"})]})]}),f.jsxs(dD,{className:"p-6 pt-0 flex gap-2",children:[f.jsxs(ue,{variant:"outline",className:"flex-1 border-purple-200 text-purple-600 hover:bg-purple-50",onClick:()=>c(h.id),children:[f.jsx(mC,{className:"h-4 w-4 mr-2"}),"Preview"]}),f.jsxs(ue,{className:"flex-1 gradient-bg text-white hover:shadow-lg",onClick:()=>d(h.id),children:[f.jsx(s6,{className:"h-4 w-4 mr-2"}),"Pesan"]})]})]})},h.id))}),e.length>l&&f.jsxs("div",{className:"flex justify-center mt-8 gap-2",children:[f.jsx(ue,{variant:"outline",disabled:s===1,onClick:()=>{o(s-1),setTimeout(a,100)},children:"< Prev"}),[...Array(Math.ceil(e.length/l))].map((h,p)=>f.jsx(ue,{variant:s===p+1?"default":"outline",onClick:()=>{o(p+1),setTimeout(a,100)},className:s===p+1?"font-bold":"",children:p+1},p)),f.jsx(ue,{variant:"outline",disabled:s===Math.ceil(e.length/l),onClick:()=>{o(s+1),setTimeout(a,100)},children:"Next >"})]}),e.length===0&&f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-gray-500 text-lg",children:"Belum ada template yang dipublikasikan"})})]})]})}),f.jsx("footer",{className:"bg-gray-900 text-white py-12 px-4",children:f.jsxs("div",{className:"container mx-auto",children:[f.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center space-x-2 mb-4",children:f.jsx(Qf,{size:32,className:"h-8 w-auto"})}),f.jsx("p",{className:"text-gray-400",children:"Platform undangan digital terpercaya untuk hari bahagia Anda"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold mb-4 block",children:"Layanan"}),f.jsxs("ul",{className:"space-y-2 text-gray-400",children:[f.jsx("li",{children:"Template Undangan"}),f.jsx("li",{children:"Kustomisasi Desain"}),f.jsx("li",{children:"Wedding Gift Digital"})]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold mb-4 block",children:"Bantuan"}),f.jsxs("ul",{className:"space-y-2 text-gray-400",children:[f.jsx("li",{children:"FAQ"}),f.jsx("li",{children:"Panduan"}),f.jsx("li",{children:"Kontak Support"})]})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold mb-4 block",children:"Kontak"}),f.jsxs("ul",{className:"space-y-2 text-gray-400",children:[f.jsx("li",{children:"Email: info@undangankami.com"}),f.jsx("li",{children:"WhatsApp: +62 812-3456-7890"}),f.jsx("li",{children:"Instagram: @undangankami"})]})]})]}),f.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:f.jsx("p",{children:" 2024 UndanganKami. Semua hak dilindungi."})})]})})]})]})};var nG=w0[" useId ".trim().toString()]||(()=>{}),rG=0;function Qi(t){const[e,n]=_.useState(nG());return Ft(()=>{t||n(r=>r??String(rG++))},[t]),t||(e?`radix-${e}`:"")}var qg="focusScope.autoFocusOnMount",Hg="focusScope.autoFocusOnUnmount",MS={bubbles:!1,cancelable:!0},iG="FocusScope",i_=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=_.useState(null),c=Kn(i),d=Kn(s),h=_.useRef(null),p=rt(e,v=>l(v)),m=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let v=function(T){if(m.paused||!a)return;const C=T.target;a.contains(C)?h.current=C:_i(h.current,{select:!0})},E=function(T){if(m.paused||!a)return;const C=T.relatedTarget;C!==null&&(a.contains(C)||_i(h.current,{select:!0}))},y=function(T){if(document.activeElement===document.body)for(const D of T)D.removedNodes.length>0&&_i(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",E);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",E),w.disconnect()}}},[r,a,m.paused]),_.useEffect(()=>{if(a){LS.add(m);const v=document.activeElement;if(!a.contains(v)){const y=new CustomEvent(qg,MS);a.addEventListener(qg,c),a.dispatchEvent(y),y.defaultPrevented||(sG(uG(hD(a)),{select:!0}),document.activeElement===v&&_i(a))}return()=>{a.removeEventListener(qg,c),setTimeout(()=>{const y=new CustomEvent(Hg,MS);a.addEventListener(Hg,d),a.dispatchEvent(y),y.defaultPrevented||_i(v??document.body,{select:!0}),a.removeEventListener(Hg,d),LS.remove(m)},0)}}},[a,c,d,m]);const x=_.useCallback(v=>{if(!n&&!r||m.paused)return;const E=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(E&&y){const w=v.currentTarget,[T,C]=oG(w);T&&C?!v.shiftKey&&y===C?(v.preventDefault(),n&&_i(T,{select:!0})):v.shiftKey&&y===T&&(v.preventDefault(),n&&_i(C,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return f.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});i_.displayName=iG;function sG(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(_i(r,{select:e}),document.activeElement!==n)return}function oG(t){const e=hD(t),n=OS(e,t),r=OS(e.reverse(),t);return[n,r]}function hD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function OS(t,e){for(const n of t)if(!aG(n,{upTo:e}))return n}function aG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function lG(t){return t instanceof HTMLInputElement&&"select"in t}function _i(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&lG(t)&&e&&t.select()}}var LS=cG();function cG(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=FS(t,e),t.unshift(e)},remove(e){var n;t=FS(t,e),(n=t[0])==null||n.resume()}}}function FS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function uG(t){return t.filter(e=>e.tagName!=="A")}var Kg=0;function fD(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??BS()),document.body.insertAdjacentElement("beforeend",t[1]??BS()),Kg++,()=>{Kg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Kg--}},[])}function BS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var yr=function(){return yr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yr.apply(this,arguments)};function pD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dG(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Fh="right-scroll-bar-position",Bh="width-before-scroll-bar",hG="with-scroll-bars-hidden",fG="--removed-body-scroll-bar-size";function Qg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pG(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var mG=typeof window<"u"?_.useLayoutEffect:_.useEffect,$S=new WeakMap;function gG(t,e){var n=pG(e||null,function(r){return t.forEach(function(i){return Qg(i,r)})});return mG(function(){var r=$S.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Qg(a,null)}),s.forEach(function(a){i.has(a)||Qg(a,o)})}$S.set(n,t)},[t]),n}function yG(t){return t}function vG(t,e){e===void 0&&(e=yG);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var d=o;o=[],d.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),n}}}};return i}function wG(t){t===void 0&&(t={});var e=vG(null);return e.options=yr({async:!0,ssr:!1},t),e}var mD=function(t){var e=t.sideCar,n=pD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,yr({},n))};mD.isSideCarExport=!0;function xG(t,e){return t.useMedium(e),mD}var gD=wG(),Yg=function(){},fm=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:Yg,onWheelCapture:Yg,onTouchMoveCapture:Yg}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,m=t.noRelative,x=t.noIsolation,v=t.inert,E=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,T=t.gapMode,C=pD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=p,j=gG([n,e]),A=yr(yr({},C),i);return _.createElement(_.Fragment,null,d&&_.createElement(D,{sideCar:gD,removeScrollBar:c,shards:h,noRelative:m,noIsolation:x,inert:v,setCallbacks:s,allowPinchZoom:!!E,lockRef:n,gapMode:T}),o?_.cloneElement(_.Children.only(a),yr(yr({},A),{ref:j})):_.createElement(w,yr({},A,{className:l,ref:j}),a))});fm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fm.classNames={fullWidth:Bh,zeroRight:Fh};var US,_G=function(){if(US)return US;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=_G();return e&&t.setAttribute("nonce",e),t}function EG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function bG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var SG=function(){var t=0,e=null;return{add:function(n){t==0&&(e=TG())&&(EG(e,n),bG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},IG=function(){var t=SG();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yD=function(){var t=IG(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},AG={left:0,top:0,right:0,gap:0},Xg=function(t){return parseInt(t||"",10)||0},PG=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Xg(n),Xg(r),Xg(i)]},CG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AG;var e=PG(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},RG=yD(),Ra="data-scroll-locked",kG=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ra,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Bh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fh," .").concat(Fh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Bh," .").concat(Bh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ra,`] {
    `).concat(fG,": ").concat(a,`px;
  }
`)},zS=function(){var t=parseInt(document.body.getAttribute(Ra)||"0",10);return isFinite(t)?t:0},NG=function(){_.useEffect(function(){return document.body.setAttribute(Ra,(zS()+1).toString()),function(){var t=zS()-1;t<=0?document.body.removeAttribute(Ra):document.body.setAttribute(Ra,t.toString())}},[])},DG=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;NG();var s=_.useMemo(function(){return CG(i)},[i]);return _.createElement(RG,{styles:kG(s,!e,i,n?"":"!important")})},r0=!1;if(typeof window<"u")try{var oh=Object.defineProperty({},"passive",{get:function(){return r0=!0,!0}});window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{r0=!1}var Qo=r0?{passive:!1}:!1,VG=function(t){return t.tagName==="TEXTAREA"},vD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!VG(t)&&n[e]==="visible")},jG=function(t){return vD(t,"overflowY")},MG=function(t){return vD(t,"overflowX")},WS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=wD(t,r);if(i){var s=xD(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OG=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},LG=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},wD=function(t,e){return t==="v"?jG(e):MG(e)},xD=function(t,e){return t==="v"?OG(e):LG(e)},FG=function(t,e){return t==="h"&&e==="rtl"?-1:1},BG=function(t,e,n,r,i){var s=FG(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,d=o>0,h=0,p=0;do{if(!a)break;var m=xD(t,a),x=m[0],v=m[1],E=m[2],y=v-E-s*x;(x||y)&&wD(t,a)&&(h+=y,p+=x);var w=a.parentNode;a=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(i&&Math.abs(h)<1||!i&&o>h)||!d&&(i&&Math.abs(p)<1||!i&&-o>p))&&(c=!0),c},ah=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},GS=function(t){return[t.deltaX,t.deltaY]},qS=function(t){return t&&"current"in t?t.current:t},$G=function(t,e){return t[0]===e[0]&&t[1]===e[1]},UG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},zG=0,Yo=[];function WG(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),i=_.useState(zG++)[0],s=_.useState(yD)[0],o=_.useRef(t);_.useEffect(function(){o.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=dG([t.lockRef.current],(t.shards||[]).map(qS),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(v,E){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=ah(v),w=n.current,T="deltaX"in v?v.deltaX:w[0]-y[0],C="deltaY"in v?v.deltaY:w[1]-y[1],D,j=v.target,A=Math.abs(T)>Math.abs(C)?"h":"v";if("touches"in v&&A==="h"&&j.type==="range")return!1;var S=WS(A,j);if(!S)return!0;if(S?D=A:(D=A==="v"?"h":"v",S=WS(A,j)),!S)return!1;if(!r.current&&"changedTouches"in v&&(T||C)&&(r.current=D),!D)return!0;var I=r.current||D;return BG(I,E,v,I==="h"?T:C,!0)},[]),l=_.useCallback(function(v){var E=v;if(!(!Yo.length||Yo[Yo.length-1]!==s)){var y="deltaY"in E?GS(E):ah(E),w=e.current.filter(function(D){return D.name===E.type&&(D.target===E.target||E.target===D.shadowParent)&&$G(D.delta,y)})[0];if(w&&w.should){E.cancelable&&E.preventDefault();return}if(!w){var T=(o.current.shards||[]).map(qS).filter(Boolean).filter(function(D){return D.contains(E.target)}),C=T.length>0?a(E,T[0]):!o.current.noIsolation;C&&E.cancelable&&E.preventDefault()}}},[]),c=_.useCallback(function(v,E,y,w){var T={name:v,delta:E,target:y,should:w,shadowParent:GG(y)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(C){return C!==T})},1)},[]),d=_.useCallback(function(v){n.current=ah(v),r.current=void 0},[]),h=_.useCallback(function(v){c(v.type,GS(v),v.target,a(v,t.lockRef.current))},[]),p=_.useCallback(function(v){c(v.type,ah(v),v.target,a(v,t.lockRef.current))},[]);_.useEffect(function(){return Yo.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Qo),document.addEventListener("touchmove",l,Qo),document.addEventListener("touchstart",d,Qo),function(){Yo=Yo.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,Qo),document.removeEventListener("touchmove",l,Qo),document.removeEventListener("touchstart",d,Qo)}},[]);var m=t.removeScrollBar,x=t.inert;return _.createElement(_.Fragment,null,x?_.createElement(s,{styles:UG(i)}):null,m?_.createElement(DG,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function GG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qG=xG(gD,WG);var _D=_.forwardRef(function(t,e){return _.createElement(fm,yr({},t,{ref:e,sideCar:qG}))});_D.classNames=fm.classNames;const TD=_D;var HG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Xo=new WeakMap,lh=new WeakMap,ch={},Jg=0,ED=function(t){return t&&(t.host||ED(t.parentNode))},KG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ED(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},QG=function(t,e,n,r){var i=KG(e,Array.isArray(t)?t:[t]);ch[n]||(ch[n]=new WeakMap);var s=ch[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))d(p);else try{var m=p.getAttribute(r),x=m!==null&&m!=="false",v=(Xo.get(p)||0)+1,E=(s.get(p)||0)+1;Xo.set(p,v),s.set(p,E),o.push(p),v===1&&x&&lh.set(p,!0),E===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return d(e),a.clear(),Jg++,function(){o.forEach(function(h){var p=Xo.get(h)-1,m=s.get(h)-1;Xo.set(h,p),s.set(h,m),p||(lh.has(h)||h.removeAttribute(r),lh.delete(h)),m||h.removeAttribute(n)}),Jg--,Jg||(Xo=new WeakMap,Xo=new WeakMap,lh=new WeakMap,ch={})}},bD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||HG(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),QG(r,i,n,"aria-hidden")):function(){return null}},pm="Dialog",[SD,rX]=Po(pm),[YG,dr]=SD(pm),ID=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=_.useRef(null),l=_.useRef(null),[c,d]=Ba({prop:r,defaultProp:i??!1,onChange:s,caller:pm});return f.jsx(YG,{scope:e,triggerRef:a,contentRef:l,contentId:Qi(),titleId:Qi(),descriptionId:Qi(),open:c,onOpenChange:d,onOpenToggle:_.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};ID.displayName=pm;var AD="DialogTrigger",PD=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(AD,n),s=rt(e,i.triggerRef);return f.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":a_(i.open),...r,ref:s,onClick:pe(t.onClick,i.onOpenToggle)})});PD.displayName=AD;var s_="DialogPortal",[XG,CD]=SD(s_,{forceMount:void 0}),RD=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=dr(s_,e);return f.jsx(XG,{scope:e,forceMount:n,children:_.Children.map(r,o=>f.jsx(ml,{present:n||s.open,children:f.jsx(bp,{asChild:!0,container:i,children:o})}))})};RD.displayName=s_;var Yf="DialogOverlay",kD=_.forwardRef((t,e)=>{const n=CD(Yf,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=dr(Yf,t.__scopeDialog);return s.modal?f.jsx(ml,{present:r||s.open,children:f.jsx(ZG,{...i,ref:e})}):null});kD.displayName=Yf;var JG=Fa("DialogOverlay.RemoveScroll"),ZG=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(Yf,n);return f.jsx(TD,{as:JG,allowPinchZoom:!0,shards:[i.contentRef],children:f.jsx(xe.div,{"data-state":a_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),vo="DialogContent",ND=_.forwardRef((t,e)=>{const n=CD(vo,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=dr(vo,t.__scopeDialog);return f.jsx(ml,{present:r||s.open,children:s.modal?f.jsx(eq,{...i,ref:e}):f.jsx(tq,{...i,ref:e})})});ND.displayName=vo;var eq=_.forwardRef((t,e)=>{const n=dr(vo,t.__scopeDialog),r=_.useRef(null),i=rt(e,n.contentRef,r);return _.useEffect(()=>{const s=r.current;if(s)return bD(s)},[]),f.jsx(DD,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,s=>s.preventDefault())})}),tq=_.forwardRef((t,e)=>{const n=dr(vo,t.__scopeDialog),r=_.useRef(!1),i=_.useRef(!1);return f.jsx(DD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),DD=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=dr(vo,n),l=_.useRef(null),c=rt(e,l);return fD(),f.jsxs(f.Fragment,{children:[f.jsx(i_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:f.jsx(Ep,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":a_(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(nq,{titleId:a.titleId}),f.jsx(iq,{contentRef:l,descriptionId:a.descriptionId})]})]})}),o_="DialogTitle",VD=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(o_,n);return f.jsx(xe.h2,{id:i.titleId,...r,ref:e})});VD.displayName=o_;var jD="DialogDescription",MD=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(jD,n);return f.jsx(xe.p,{id:i.descriptionId,...r,ref:e})});MD.displayName=jD;var OD="DialogClose",LD=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=dr(OD,n);return f.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>i.onOpenChange(!1))})});LD.displayName=OD;function a_(t){return t?"open":"closed"}var FD="DialogTitleWarning",[iX,BD]=X4(FD,{contentName:vo,titleName:o_,docsSlug:"dialog"}),nq=({titleId:t})=>{const e=BD(FD),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},rq="DialogDescriptionWarning",iq=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BD(rq).contentName}}.`;return _.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},sq=ID,oq=PD,aq=RD,$D=kD,UD=ND,zD=VD,WD=MD,lq=LD;const ld=sq,GD=oq,cq=aq,qD=ce.forwardRef(({className:t,...e},n)=>f.jsx($D,{ref:n,className:De("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));qD.displayName=$D.displayName;const Al=ce.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(cq,{children:[f.jsx(qD,{}),f.jsxs(UD,{ref:r,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,f.jsxs(lq,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(wC,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Al.displayName=UD.displayName;const Pl=({className:t,...e})=>f.jsx("div",{className:De("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Pl.displayName="DialogHeader";const HD=({className:t,...e})=>f.jsx("div",{className:De("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});HD.displayName="DialogFooter";const Cl=ce.forwardRef(({className:t,...e},n)=>f.jsx(zD,{ref:n,className:De("text-lg font-semibold leading-none tracking-tight",t),...e}));Cl.displayName=zD.displayName;const uq=ce.forwardRef(({className:t,...e},n)=>f.jsx(WD,{ref:n,className:De("text-sm text-muted-foreground",t),...e}));uq.displayName=WD.displayName;const dq=_.lazy(()=>kr(()=>import("./StepIndicator-7373491b.js"),[])),hq=_.lazy(()=>kr(()=>import("./Step1_TemplateInfo-e2c790c0.js"),[])),fq=_.lazy(()=>kr(()=>import("./Step2_CoupleData-e0ee5b15.js"),[])),pq=_.lazy(()=>kr(()=>import("./Step3_ParentsData-2eb308f9.js"),[])),mq=_.lazy(()=>kr(()=>import("./Step4_EventDetails-e8d7e5ff.js"),[])),gq=_.lazy(()=>kr(()=>import("./Step5_MusicSelection-0fad8062.js"),[])),yq=_.lazy(()=>kr(()=>import("./Step6_WeddingGift-83bb39b1.js"),[])),vq=_.lazy(()=>kr(()=>import("./Step7_Confirmation-931dbd6d.js"),[])),wq=()=>{const[t,e]=_.useState(null),n=M=>{M&&navigator.clipboard.writeText(M).then(()=>{e(M),setTimeout(()=>e(null),1500)})},{templateId:r}=Tp(),i=Io(),[s,o]=_.useState(1),[a,l]=_.useState(null),[c,d]=_.useState([]),[h,p]=_.useState(!1),[m,x]=_.useState({banks:[],ewallets:[]}),[v,E]=_.useState(""),[y,w]=_.useState({templateId:r,templateName:"",groomName:"",groomNickname:"",brideName:"",brideNickname:"",groomFatherName:"",groomMotherName:"",brideFatherName:"",brideMotherName:"",akadDate:"",akadTime:"",akadVenue:"",receptionDate:"",receptionTime:"",receptionVenue:"",selectedMusic:"",weddingGifts:[{type:"bank",name:"",account:"",holder:""}],createdAt:"",status:"pending"}),T=[{id:1,title:"Informasi Template",description:"Template yang dipilih"},{id:2,title:"Data Mempelai",description:"Nama lengkap dan panggilan"},{id:3,title:"Data Orang Tua",description:"Nama ayah dan ibu"},{id:4,title:"Waktu & Lokasi",description:"Detail acara pernikahan"},{id:5,title:"Pilihan Musik",description:"Musik latar undangan"},{id:6,title:"Wedding Gift",description:"Informasi cashless"},{id:7,title:"Konfirmasi",description:"Review dan submit"}];_.useEffect(()=>{r&&(sm(r).then(M=>{M?(l(M),w($=>({...$,templateName:M.name}))):l(null)}).catch(()=>l(null)),kr(()=>Promise.resolve().then(()=>W9),void 0).then(M=>{M.getAllMusic().then($=>{d($)})}),kx().then(M=>x(M)),Pa().then(M=>{const $=M.find(z=>z.type==="cs"&&z.whatsapp);E($?$.whatsapp:"")}))},[r]);const C=(M,$)=>{w(z=>({...z,[M]:$}))},D=(M,$,z)=>{const W=[...y.weddingGifts];W[M]={...W[M],[$]:z},w(B=>({...B,weddingGifts:W}))},j=()=>{w(M=>({...M,weddingGifts:[...M.weddingGifts,{type:"bank",name:"",account:"",holder:""}]}))},A=M=>{y.weddingGifts.length>1&&w($=>({...$,weddingGifts:y.weddingGifts.filter((z,W)=>W!==M)}))},S=()=>s===2?y.groomName.trim()&&y.groomNickname.trim()&&y.brideName.trim()&&y.brideNickname.trim():s===3?y.groomFatherName.trim()&&y.groomMotherName.trim()&&y.brideFatherName.trim()&&y.brideMotherName.trim():s===4?y.akadDate.trim()&&y.akadTime.trim()&&y.akadVenue.trim()&&y.akadMapLink&&y.akadMapLink.trim()&&y.receptionDate.trim()&&y.receptionTime.trim()&&y.receptionVenue.trim()&&y.receptionMapLink&&y.receptionMapLink.trim():!0,I=()=>{S()&&o(M=>Math.min(M+1,T.length))},P=()=>o(M=>Math.max(M-1,1));function k(M,$,z){if(console.log("DEBUG generateInvitationHTML - musicList:",z),console.log("DEBUG generateInvitationHTML - selectedMusic:",M.selectedMusic),!$)return"<div>Template tidak ditemukan</div>";let W=$.html||"",B="",Y=null;if(M.selectedMusic&&Array.isArray(z)?(Y=z.find(Z=>Z.id===M.selectedMusic),console.log("DEBUG generateInvitationHTML - selected music object:",Y),Y&&Y.url?(B=Y.url,console.log("DEBUG generateInvitationHTML - musicUrl:",B)):console.warn("DEBUG generateInvitationHTML - Tidak ditemukan url musik untuk id:",M.selectedMusic)):console.warn("DEBUG generateInvitationHTML - musicList kosong atau selectedMusic tidak ada"),W=W.replace(/{{\s*musicUrl\s*}}/g,B),Object.entries(M).forEach(([Z,me])=>{if(Z==="weddingGifts"||typeof me=="object"&&me!==null)return;const we=new RegExp(`{{\\s*${Z}\\s*}}`,"g");W=W.replace(we,me??"")}),W.includes("{{weddingGifts}}")){let Z=M.weddingGifts;if(typeof Z=="string")try{Z=JSON.parse(Z),Array.isArray(Z)||(Z=[])}catch{Z=[]}const me=(Z||[]).filter(we=>we&&typeof we=="object"&&(we.name||we.account||we.holder)).map((we,ve,fe)=>{const _e=we.type==="ewallet",_t=_e?'<svg width="20" height="20" fill="none" stroke="#06b6d4" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="3" y="7" width="18" height="10" rx="2"/><path d="M16 11h2a1 1 0 0 1 0 2h-2z"/></svg>':'<svg width="20" height="20" fill="none" stroke="#4f46e5" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="2" y="7" width="20" height="10" rx="2"/><path d="M6 11h4a1 1 0 0 1 0 2H6z"/></svg>',Bt=we.account?`<button type="button" class="btn-copy-account" data-account="${we.account}" style="margin-left:8px;padding:2px 10px;font-size:0.95rem;border:none;background:#f1f5f9;color:#2563eb;border-radius:6px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .2s;"><svg width=16 height=16 fill=none stroke='#2563eb' stroke-width=2 viewBox='0 0 24 24'><rect x='9' y='9' width='13' height='13' rx='2'/><path d='M5 15V5a2 2 0 0 1 2-2h10'/></svg> <span>Salin</span></button>`:"";return`<div class="gift-item" style="display:flex;align-items:flex-start;padding:16px 0;${ve<fe.length-1?"border-bottom:1px solid #e5e7eb;":""}">
            <div style="margin-right:12px;">${_t}</div>
            <div style="flex:1;min-width:0;">
              <div style="font-weight:600;font-size:1rem;color:#111827;">${_e?"E-Wallet":"Bank"}: ${we.name||"-"}</div>
              <div style="color:#374151;font-size:0.95rem;">a.n. ${we.holder||"-"}</div>
              <div style="color:#2563eb;font-size:1.05rem;word-break:break-all;display:flex;align-items:center;gap:4px;">${we.account||"-"}${Bt}</div>
            </div>
          </div>`}).join("");W=W.replace(/{{\s*weddingGifts\s*}}/g,me||"")}let se="";B&&(se=`<audio id="wedding-music" src="${B}" style="display:none" preload="auto" loop></audio>
<script>(function(){
  var audio = document.getElementById('wedding-music');
  if(audio){
    document.body.addEventListener('click', function playMusicOnce(){
      audio.play();
      document.body.removeEventListener('click', playMusicOnce);
    });
  }
})();<\/script>`);const Pe=`<script>(function(){
      document.addEventListener('click',function(e){
        const btn = e.target.closest('.btn-copy-account');
        if(btn){
          const acc = btn.getAttribute('data-account');
          if(acc){
            navigator.clipboard.writeText(acc).then(()=>{
              const span = btn.querySelector('span');
              if(span){
                const old = span.textContent;
                span.textContent = 'Berhasil disalin!';
                btn.style.background = '#bbf7d0';
                btn.style.color = '#15803d';
                setTimeout(()=>{
                  span.textContent = old;
                  btn.style.background = '#f1f5f9';
                  btn.style.color = '#2563eb';
                },1200);
              }
            });
          }
        }
      });
    })();<\/script>`;let le=`<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Undangan</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>${$.css||""}</style>
</head>
<body>
${W}
<script type="text/javascript">
${$.js||""}
<\/script>
${Pe}
</body>
</html>`;return se&&(le=le.replace("</body>",se+`
</body>`)),console.log("DEBUG generateInvitationHTML - finalHtml:",le),le}const[V,N]=_.useState(!1),G=async()=>{if(V)return;N(!0);const M={...y,createdAt:new Date().toISOString()};try{const z=(await DN(M)).id;localStorage.removeItem("orderDraft");const W=k({...M,id:z},a,c);localStorage.setItem("inv-"+z,W),q(`${window.location.origin}/invitation/${z}`),p(!0)}catch($){alert("Gagal menyimpan pesanan: "+($.message||$))}finally{N(!1)}},[K,q]=_.useState(""),J=()=>{switch(s){case 1:return f.jsx(hq,{template:a});case 2:return f.jsx(fq,{formData:y,handleInputChange:C});case 3:return f.jsx(pq,{formData:y,handleInputChange:C});case 4:return f.jsx(mq,{formData:y,handleInputChange:C});case 5:return f.jsx(gq,{formData:y,handleInputChange:C,music:c});case 6:return f.jsx(yq,{formData:y,handleWeddingGiftChange:D,addWeddingGift:j,removeWeddingGift:A});case 7:return f.jsx(vq,{formData:y,music:c});default:return null}};return _.useState(!1),a?f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsxs("title",{children:["Form Pemesanan - ",a.name," | UndanganKami"]}),f.jsx("meta",{name:"description",content:`Pesan template undangan digital ${a.name}`})]}),f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900 relative",children:[f.jsx("header",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-purple-100 dark:border-gray-800 sticky top-0 z-50",children:f.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center space-x-2",children:f.jsx(Qf,{size:44,className:"h-11 w-auto"})}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(ue,{variant:"outline",onClick:()=>i("/"),className:"border-purple-200 dark:border-gray-700 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-gray-800",children:"Kembali"}),f.jsx(ad,{})]})]})}),f.jsx("div",{className:"container mx-auto px-4 py-8",children:f.jsxs(_.Suspense,{fallback:f.jsx("div",{className:"text-center py-12",children:"Memuat form..."}),children:[f.jsx(dq,{steps:T,currentStep:s}),f.jsx(Yt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:f.jsx(xn,{className:"max-w-2xl mx-auto",children:f.jsx(_n,{className:"p-8",children:J()})})},s),f.jsxs("div",{className:"flex justify-between mt-8 max-w-2xl mx-auto",children:[f.jsxs(ue,{variant:"outline",onClick:P,disabled:s===1,children:[f.jsx(WF,{className:"h-4 w-4 mr-2"}),"Sebelumnya"]}),s<T.length?f.jsxs(ue,{onClick:I,className:"gradient-bg text-white",disabled:!S(),children:["Selanjutnya",f.jsx(GF,{className:"h-4 w-4 ml-2"})]}):f.jsxs(ue,{onClick:G,className:"gradient-bg text-white flex items-center justify-center",disabled:V,children:[V&&f.jsxs("svg",{className:"animate-spin mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),V?"Mengirim Pesanan...":"Pesan Sekarang"]})]})]})}),f.jsx(ld,{open:h,onOpenChange:()=>i("/"),children:f.jsxs(Al,{className:"max-w-lg w-full text-center p-0 overflow-hidden",children:[f.jsxs(Pl,{className:"bg-green-50 dark:bg-green-900/40 px-6 pt-6 pb-2",children:[f.jsx("div",{className:"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100 mb-2",children:f.jsx(fC,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),f.jsx(Cl,{className:"text-2xl w-full text-center font-bold text-green-700 mb-1",children:"Pesanan Berhasil!"})]}),f.jsxs("div",{className:"px-6 pt-2 pb-1",children:[f.jsx("span",{className:"block text-gray-700 dark:text-gray-200 text-sm font-semibold mb-0.5",children:"Jumlah yang harus dibayarkan:"}),f.jsx("span",{className:"block text-2xl font-extrabold text-purple-700 mb-1",children:a&&a.price?a.discount&&Number(a.discount)>0?`Rp${(Number(a.price)*(1-Number(a.discount)/100)).toLocaleString("id-ID")}`:`Rp${Number(a.price).toLocaleString("id-ID")}`:"-"}),a&&a.discount&&Number(a.discount)>0&&f.jsxs("span",{className:"block text-xs text-gray-500",children:["(Sudah termasuk diskon ",a.discount,"%)"]})]}),f.jsxs("div",{className:"px-6 pb-1",children:[f.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Pilih salah satu metode pembayaran di bawah ini lalu lakukan pembayaran:"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[m.banks&&m.banks.length>0&&f.jsxs("div",{className:"col-span-1",children:[f.jsx("div",{className:"font-semibold text-xs mb-1 text-purple-700",children:"Rekening Bank"}),f.jsx("div",{className:"flex flex-col gap-1",children:m.banks.map(M=>f.jsxs("div",{className:"text-xs border border-purple-200 rounded px-2 py-1 bg-purple-50 dark:bg-gray-800 flex flex-col gap-0.5",children:[f.jsx("div",{className:"font-bold text-sm text-purple-800",children:M.name}),f.jsxs("div",{className:"text-[0.95em] text-gray-700 dark:text-gray-200",children:["a.n. ",M.holder]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-mono text-base text-purple-700 tracking-wide",children:M.account}),f.jsx("button",{type:"button",className:`ml-1 px-2 py-0.5 rounded text-xs border ${t===M.account?"bg-green-100 text-green-700 border-green-300":"bg-white text-purple-700 border-purple-200 hover:bg-purple-100"} transition`,onClick:()=>n(M.account),"aria-label":"Salin nomor rekening",children:t===M.account?"Disalin!":"Copy"})]})]},M.id))})]}),m.ewallets&&m.ewallets.length>0&&f.jsxs("div",{className:"col-span-1",children:[f.jsx("div",{className:"font-semibold text-xs mb-1 text-cyan-700",children:"E-wallet"}),f.jsx("div",{className:"flex flex-col gap-1",children:m.ewallets.map(M=>f.jsxs("div",{className:"text-xs border border-cyan-200 rounded px-2 py-1 bg-cyan-50 dark:bg-gray-800 flex flex-col gap-0.5",children:[f.jsx("div",{className:"font-bold text-sm text-cyan-800",children:M.name}),f.jsxs("div",{className:"text-[0.95em] text-gray-700 dark:text-gray-200",children:["a.n. ",M.holder]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"font-mono text-base text-cyan-700 tracking-wide",children:M.account}),f.jsx("button",{type:"button",className:`ml-1 px-2 py-0.5 rounded text-xs border ${t===M.account?"bg-green-100 text-green-700 border-green-300":"bg-white text-cyan-700 border-cyan-200 hover:bg-cyan-100"} transition`,onClick:()=>n(M.account),"aria-label":"Salin nomor e-wallet",children:t===M.account?"Disalin!":"Copy"})]})]},M.id))})]})]})]}),f.jsxs("div",{className:"px-6 pt-1 pb-4",children:[f.jsx("p",{className:"text-gray-600 text-xs mb-1 mt-2",children:"Setelah transfer, konfirmasi pembayaran melalui tombol berikut:"}),(()=>{let M="-";a&&a.price&&(M=a.discount&&Number(a.discount)>0?`Rp${(Number(a.price)*(1-Number(a.discount)/100)).toLocaleString("id-ID")}`:`Rp${Number(a.price).toLocaleString("id-ID")}`);const $=y.groomName||"-",z=y.brideName||"-",W=`Saya ingin konfirmasi pembayaran untuk pesanan atas nama ${$} & ${z} sejumlah ${M}.`,B=v?`https://wa.me/${v.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(W)}`:"#";return f.jsx("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"w-full",children:f.jsx(ue,{className:"w-full bg-green-500 hover:bg-green-600 text-white text-base font-bold py-2 rounded shadow-sm mt-1",children:"Konfirmasi via WhatsApp"})})})()]})]})})]})]}):f.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:f.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 md:p-10",children:[f.jsx(Yt.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.2,ease:"linear"},className:"mb-4",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"#a78bfa",strokeWidth:"6",opacity:"0.2"}),f.jsx("path",{d:"M52 28c0-13.255-10.745-24-24-24",stroke:"#8b5cf6",strokeWidth:"6",strokeLinecap:"round"})]})}),f.jsx(Yt.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-purple-500 text-lg font-semibold text-center",children:"Memuat form pesanan..."}),f.jsx(Yt.p,{initial:{opacity:0},animate:{opacity:.7},transition:{delay:1.2,duration:1.2,repeat:1/0,repeatType:"reverse"},className:"text-gray-400 mt-2 text-center text-base md:text-lg",children:"Mohon tunggu sebentar, kami sedang menyiapkan tampilan terbaik untuk Anda."})]})})},HS=({templates:t,orders:e})=>{const n=[{title:"Total Template",value:t.length,color:"bg-blue-500"},{title:"Template Aktif",value:t.filter(r=>r.status==="publish").length,color:"bg-green-500"},{title:"Total Pesanan",value:e.length,color:"bg-purple-500"},{title:"Pesanan Pending",value:e.filter(r=>r.status==="pending").length,color:"bg-orange-500"}];return f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Dashboard"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:n.map((r,i)=>f.jsx(Yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:f.jsx(xn,{children:f.jsx(_n,{className:"p-6",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:`p-3 rounded-full ${r.color} text-white mr-4`,children:f.jsx(av,{className:"h-6 w-6"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600",children:r.title}),f.jsx("p",{className:"text-2xl font-bold",children:r.value})]})]})})})},i))}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs(xn,{children:[f.jsx(go,{children:f.jsx(yo,{children:"Template Terbaru"})}),f.jsx(_n,{children:f.jsx("div",{className:"space-y-4",children:t.slice(-5).reverse().map(r=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:r.name}),f.jsx("p",{className:"text-sm text-gray-600",children:r.category})]}),f.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.status==="publish"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.status})]},r.id))})})]}),f.jsxs(xn,{children:[f.jsx(go,{children:f.jsx(yo,{children:"Pesanan Terbaru"})}),f.jsx(_n,{children:f.jsx("div",{className:"space-y-4",children:e.slice(-5).reverse().map(r=>f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-medium",children:[r.groomName," & ",r.brideName]}),f.jsx("p",{className:"text-sm text-gray-600",children:new Date(r.createdAt).toLocaleDateString()})]}),f.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${r.status==="completed"?"bg-green-100 text-green-800":r.status==="processing"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:r.status})]},r.id))})})]})]})]})},KS=({templates:t,setTemplates:e})=>{const{toast:n}=ur(),r=Io();let i=null;try{i=JSON.parse(localStorage.getItem("adminUser"))||null}catch{i=null}let s=t;i&&i.type==="designer"&&(s=t.filter(d=>d.createdBy===i.username));const o=async d=>{try{const h=t.find(m=>m.id===d);if(h&&h.thumbnail)try{const m=h.thumbnail.match(/\/v\d+\/([^\.]+)\./),x=m?m[1]:null;x&&await fetch("http://localhost:4000/delete-music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:x,resource_type:"image"})})}catch{}await kN(d);const p=t.filter(m=>m.id!==d);e(p),n({title:"Template Dihapus",description:"Template berhasil dihapus dari database dan Cloudinary."})}catch(h){n({title:"Gagal hapus template",description:h.message,variant:"destructive"})}},a=async d=>{const h=t.find(m=>m.id===d);if(!h)return n({title:"Template tidak ditemukan",variant:"destructive"});const p=h.status==="publish"?"draft":"publish";try{await jx(d,{...h,status:p,updatedAt:new Date().toISOString()});const m=t.map(x=>x.id===d?{...x,status:p,updatedAt:new Date().toISOString()}:x);e(m),n({title:"Status Template Diubah",description:"Status template berhasil diubah."})}catch(m){n({title:"Gagal ubah status template",description:m.message,variant:"destructive"})}},l=d=>{r(`/admin/template-builder/${d}`)},c=async d=>{const h=t.find(y=>y.id===d);if(!h)return n({title:"Template tidak ditemukan",variant:"destructive"});const{id:p,createdAt:m,updatedAt:x,...v}=h,E={...v,name:h.name+" (Copy)",status:"draft",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{const y=await Vx(E);e(w=>[y,...w]),n({title:"Template berhasil diduplikat",description:"Template baru sudah masuk ke database."})}catch(y){n({title:"Gagal duplikat template",description:y.message,variant:"destructive"})}};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Kelola Template"}),f.jsxs(ue,{className:"gradient-bg text-white",onClick:()=>r("/admin/template-builder"),children:[f.jsx(HF,{className:"h-4 w-4 mr-2"}),"Buka Template Builder"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(d=>f.jsxs(xn,{className:"overflow-hidden",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{className:"w-full h-48 object-cover",alt:`Template ${d.name}`,src:d.thumbnail||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/No-Image-Placeholder.svg/330px-No-Image-Placeholder.svg.png"}),f.jsx("div",{className:"absolute top-4 right-4 flex flex-col items-end gap-2",children:f.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${d.status==="publish"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:d.status})})]}),f.jsxs(_n,{className:"p-4",children:[f.jsx("h3",{className:"text-lg font-semibold mb-2",children:d.name}),f.jsx("p",{className:"text-gray-600 text-sm mb-2 h-10 overflow-hidden",children:d.description}),f.jsx("div",{className:"mb-2",children:d.discount&&Number(d.discount)>0?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"text-gray-400 line-through mr-2 text-sm",children:["Rp",Number(d.price).toLocaleString("id-ID")]}),f.jsxs("span",{className:"text-purple-700 font-bold text-lg",children:["Rp",(Number(d.price)*(1-Number(d.discount)/100)).toLocaleString("id-ID")]}),f.jsxs("span",{className:"ml-2 text-xs text-green-600 font-semibold",children:["-",d.discount,"%"]})]}):f.jsxs("span",{className:"text-purple-700 font-bold text-lg",children:["Rp",Number(d.price).toLocaleString("id-ID")]})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>l(d.id),disabled:i&&i.type==="designer"&&d.createdBy!==i.username,children:f.jsx(t6,{className:"h-4 w-4"})}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>a(d.id),className:d.status==="publish"?"bg-green-50 text-green-700 border-green-200 dark:bg-green-900 dark:text-green-200 dark:border-green-700 hover:bg-green-100 dark:hover:bg-green-800":"bg-white text-gray-700 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700",disabled:i&&i.type==="designer"&&d.createdBy!==i.username,children:f.jsx(mC,{className:"h-4 w-4"})}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>o(d.id),className:"text-red-600 hover:bg-red-50",disabled:i&&i.type==="designer"&&d.createdBy!==i.username,children:f.jsx(hu,{className:"h-4 w-4"})}),f.jsx(ue,{size:"sm",variant:"outline",className:"text-blue-600 hover:bg-blue-50",onClick:()=>c(d.id),title:"Duplikat Template",children:"Duplikat"})]})]})]},d.id))}),s.length===0&&f.jsx("div",{className:"text-center py-12 col-span-full",children:f.jsx("p",{className:"text-gray-500 text-lg",children:"Belum ada template. Buat di Template Builder!"})})]})},ke=ce.forwardRef(({className:t,type:e,...n},r)=>f.jsx("input",{type:e,className:De("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));ke.displayName="Input";var xq="Label",KD=_.forwardRef((t,e)=>f.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));KD.displayName=xq;var QD=KD;const _q=vw("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=ce.forwardRef(({className:t,...e},n)=>f.jsx(QD,{ref:n,className:De(_q(),t),...e}));Te.displayName=QD.displayName;function QS(t,[e,n]){return Math.min(n,Math.max(e,t))}var Tq=_.createContext(void 0);function l_(t){const e=_.useContext(Tq);return t||e||"ltr"}const Eq=["top","right","bottom","left"],cs=Math.min,An=Math.max,Xf=Math.round,uh=Math.floor,Pr=t=>({x:t,y:t}),bq={left:"right",right:"left",bottom:"top",top:"bottom"},Sq={start:"end",end:"start"};function i0(t,e,n){return An(t,cs(e,n))}function ri(t,e){return typeof t=="function"?t(e):t}function ii(t){return t.split("-")[0]}function Rl(t){return t.split("-")[1]}function c_(t){return t==="x"?"y":"x"}function u_(t){return t==="y"?"height":"width"}function xr(t){return["top","bottom"].includes(ii(t))?"y":"x"}function d_(t){return c_(xr(t))}function Iq(t,e,n){n===void 0&&(n=!1);const r=Rl(t),i=d_(t),s=u_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Jf(o)),[o,Jf(o)]}function Aq(t){const e=Jf(t);return[s0(t),e,s0(e)]}function s0(t){return t.replace(/start|end/g,e=>Sq[e])}function Pq(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Cq(t,e,n,r){const i=Rl(t);let s=Pq(ii(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(s0)))),s}function Jf(t){return t.replace(/left|right|bottom|top/g,e=>bq[e])}function Rq(t){return{top:0,right:0,bottom:0,left:0,...t}}function YD(t){return typeof t!="number"?Rq(t):{top:t,right:t,bottom:t,left:t}}function Zf(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function YS(t,e,n){let{reference:r,floating:i}=t;const s=xr(e),o=d_(e),a=u_(o),l=ii(e),c=s==="y",d=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Rl(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const kq=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:h}=YS(c,r,l),p=r,m={},x=0;for(let v=0;v<a.length;v++){const{name:E,fn:y}=a[v],{x:w,y:T,data:C,reset:D}=await y({x:d,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});d=w??d,h=T??h,m={...m,[E]:{...m[E],...C}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(c=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:d,y:h}=YS(c,p,l)),v=-1)}return{x:d,y:h,placement:p,strategy:i,middlewareData:m}};async function Du(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=ri(e,t),x=YD(m),E=a[p?h==="floating"?"reference":"floating":h],y=Zf(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(E)))==null||n?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),w=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},D=Zf(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:T,strategy:l}):w);return{top:(y.top-D.top+x.top)/C.y,bottom:(D.bottom-y.bottom+x.bottom)/C.y,left:(y.left-D.left+x.left)/C.x,right:(D.right-y.right+x.right)/C.x}}const Nq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=ri(t,e)||{};if(c==null)return{};const h=YD(d),p={x:n,y:r},m=d_(i),x=u_(m),v=await o.getDimensions(c),E=m==="y",y=E?"top":"left",w=E?"bottom":"right",T=E?"clientHeight":"clientWidth",C=s.reference[x]+s.reference[m]-p[m]-s.floating[x],D=p[m]-s.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=j?j[T]:0;(!A||!await(o.isElement==null?void 0:o.isElement(j)))&&(A=a.floating[T]||s.floating[x]);const S=C/2-D/2,I=A/2-v[x]/2-1,P=cs(h[y],I),k=cs(h[w],I),V=P,N=A-v[x]-k,G=A/2-v[x]/2+S,K=i0(V,G,N),q=!l.arrow&&Rl(i)!=null&&G!==K&&s.reference[x]/2-(G<V?P:k)-v[x]/2<0,J=q?G<V?G-V:G-N:0;return{[m]:p[m]+J,data:{[m]:K,centerOffset:G-K-J,...q&&{alignmentOffset:J}},reset:q}}}),Dq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...E}=ri(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ii(i),w=xr(a),T=ii(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=p||(T||!v?[Jf(a)]:Aq(a)),j=x!=="none";!p&&j&&D.push(...Cq(a,v,x,C));const A=[a,...D],S=await Du(e,E),I=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&I.push(S[y]),h){const G=Iq(i,o,C);I.push(S[G[0]],S[G[1]])}if(P=[...P,{placement:i,overflows:I}],!I.every(G=>G<=0)){var k,V;const G=(((k=s.flip)==null?void 0:k.index)||0)+1,K=A[G];if(K&&(!(h==="alignment"?w!==xr(K):!1)||P.every(M=>M.overflows[0]>0&&xr(M.placement)===w)))return{data:{index:G,overflows:P},reset:{placement:K}};let q=(V=P.filter(J=>J.overflows[0]<=0).sort((J,M)=>J.overflows[1]-M.overflows[1])[0])==null?void 0:V.placement;if(!q)switch(m){case"bestFit":{var N;const J=(N=P.filter(M=>{if(j){const $=xr(M.placement);return $===w||$==="y"}return!0}).map(M=>[M.placement,M.overflows.filter($=>$>0).reduce(($,z)=>$+z,0)]).sort((M,$)=>M[1]-$[1])[0])==null?void 0:N[0];J&&(q=J);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function XS(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function JS(t){return Eq.some(e=>t[e]>=0)}const Vq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ri(t,e);switch(r){case"referenceHidden":{const s=await Du(e,{...i,elementContext:"reference"}),o=XS(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:JS(o)}}}case"escaped":{const s=await Du(e,{...i,altBoundary:!0}),o=XS(s,n.floating);return{data:{escapedOffsets:o,escaped:JS(o)}}}default:return{}}}}};async function jq(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ii(n),a=Rl(n),l=xr(n)==="y",c=["left","top"].includes(o)?-1:1,d=s&&l?-1:1,h=ri(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof x=="number"&&(m=a==="end"?x*-1:x),l?{x:m*d,y:p*c}:{x:p*c,y:m*d}}const Mq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await jq(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Oq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:y,y:w}=E;return{x:y,y:w}}},...l}=ri(t,e),c={x:n,y:r},d=await Du(e,l),h=xr(ii(i)),p=c_(h);let m=c[p],x=c[h];if(s){const E=p==="y"?"top":"left",y=p==="y"?"bottom":"right",w=m+d[E],T=m-d[y];m=i0(w,m,T)}if(o){const E=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=x+d[E],T=x-d[y];x=i0(w,x,T)}const v=a.fn({...e,[p]:m,[h]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:s,[h]:o}}}}}},Lq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ri(t,e),d={x:n,y:r},h=xr(i),p=c_(h);let m=d[p],x=d[h];const v=ri(a,e),E=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const T=p==="y"?"height":"width",C=s.reference[p]-s.floating[T]+E.mainAxis,D=s.reference[p]+s.reference[T]-E.mainAxis;m<C?m=C:m>D&&(m=D)}if(c){var y,w;const T=p==="y"?"width":"height",C=["top","left"].includes(ii(i)),D=s.reference[h]-s.floating[T]+(C&&((y=o.offset)==null?void 0:y[h])||0)+(C?0:E.crossAxis),j=s.reference[h]+s.reference[T]+(C?0:((w=o.offset)==null?void 0:w[h])||0)-(C?E.crossAxis:0);x<D?x=D:x>j&&(x=j)}return{[p]:m,[h]:x}}}},Fq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ri(t,e),d=await Du(e,c),h=ii(i),p=Rl(i),m=xr(i)==="y",{width:x,height:v}=s.floating;let E,y;h==="top"||h==="bottom"?(E=h,y=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,E=p==="end"?"top":"bottom");const w=v-d.top-d.bottom,T=x-d.left-d.right,C=cs(v-d[E],w),D=cs(x-d[y],T),j=!e.middlewareData.shift;let A=C,S=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(A=w),j&&!p){const P=An(d.left,0),k=An(d.right,0),V=An(d.top,0),N=An(d.bottom,0);m?S=x-2*(P!==0||k!==0?P+k:An(d.left,d.right)):A=v-2*(V!==0||N!==0?V+N:An(d.top,d.bottom))}await l({...e,availableWidth:S,availableHeight:A});const I=await o.getDimensions(a.floating);return x!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function mm(){return typeof window<"u"}function kl(t){return XD(t)?(t.nodeName||"").toLowerCase():"#document"}function Dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Dr(t){var e;return(e=(XD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function XD(t){return mm()?t instanceof Node||t instanceof Dn(t).Node:!1}function lr(t){return mm()?t instanceof Element||t instanceof Dn(t).Element:!1}function Rr(t){return mm()?t instanceof HTMLElement||t instanceof Dn(t).HTMLElement:!1}function ZS(t){return!mm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dn(t).ShadowRoot}function cd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=cr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Bq(t){return["table","td","th"].includes(kl(t))}function gm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function h_(t){const e=f_(),n=lr(t)?cr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function $q(t){let e=us(t);for(;Rr(e)&&!cl(e);){if(h_(e))return e;if(gm(e))return null;e=us(e)}return null}function f_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cl(t){return["html","body","#document"].includes(kl(t))}function cr(t){return Dn(t).getComputedStyle(t)}function ym(t){return lr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function us(t){if(kl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ZS(t)&&t.host||Dr(t);return ZS(e)?e.host:e}function JD(t){const e=us(t);return cl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Rr(e)&&cd(e)?e:JD(e)}function Vu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=JD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Dn(i);if(s){const a=o0(o);return e.concat(o,o.visualViewport||[],cd(i)?i:[],a&&n?Vu(a):[])}return e.concat(i,Vu(i,[],n))}function o0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ZD(t){const e=cr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Rr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Xf(n)!==s||Xf(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function p_(t){return lr(t)?t:t.contextElement}function ka(t){const e=p_(t);if(!Rr(e))return Pr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ZD(e);let o=(s?Xf(n.width):n.width)/r,a=(s?Xf(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Uq=Pr(0);function eV(t){const e=Dn(t);return!f_()||!e.visualViewport?Uq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function zq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Dn(t)?!1:e}function wo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=p_(t);let o=Pr(1);e&&(r?lr(r)&&(o=ka(r)):o=ka(t));const a=zq(s,n,r)?eV(s):Pr(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,d=i.width/o.x,h=i.height/o.y;if(s){const p=Dn(s),m=r&&lr(r)?Dn(r):r;let x=p,v=o0(x);for(;v&&r&&m!==x;){const E=ka(v),y=v.getBoundingClientRect(),w=cr(v),T=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*E.x,C=y.top+(v.clientTop+parseFloat(w.paddingTop))*E.y;l*=E.x,c*=E.y,d*=E.x,h*=E.y,l+=T,c+=C,x=Dn(v),v=o0(x)}}return Zf({width:d,height:h,x:l,y:c})}function m_(t,e){const n=ym(t).scrollLeft;return e?e.left+n:wo(Dr(t)).left+n}function tV(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:m_(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Wq(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Dr(r),a=e?gm(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Pr(1);const d=Pr(0),h=Rr(r);if((h||!h&&!s)&&((kl(r)!=="body"||cd(o))&&(l=ym(r)),Rr(r))){const m=wo(r);c=ka(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!h&&!s?tV(o,l,!0):Pr(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function Gq(t){return Array.from(t.getClientRects())}function qq(t){const e=Dr(t),n=ym(t),r=t.ownerDocument.body,i=An(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=An(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+m_(t);const a=-n.scrollTop;return cr(r).direction==="rtl"&&(o+=An(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Hq(t,e){const n=Dn(t),r=Dr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=f_();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Kq(t,e){const n=wo(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Rr(t)?ka(t):Pr(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function eI(t,e,n){let r;if(e==="viewport")r=Hq(t,n);else if(e==="document")r=qq(Dr(t));else if(lr(e))r=Kq(e,n);else{const i=eV(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Zf(r)}function nV(t,e){const n=us(t);return n===e||!lr(n)||cl(n)?!1:cr(n).position==="fixed"||nV(n,e)}function Qq(t,e){const n=e.get(t);if(n)return n;let r=Vu(t,[],!1).filter(a=>lr(a)&&kl(a)!=="body"),i=null;const s=cr(t).position==="fixed";let o=s?us(t):t;for(;lr(o)&&!cl(o);){const a=cr(o),l=h_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||cd(o)&&!l&&nV(t,o))?r=r.filter(d=>d!==o):i=a,o=us(o)}return e.set(t,r),r}function Yq(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?gm(e)?[]:Qq(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,d)=>{const h=eI(e,d,i);return c.top=An(h.top,c.top),c.right=cs(h.right,c.right),c.bottom=cs(h.bottom,c.bottom),c.left=An(h.left,c.left),c},eI(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xq(t){const{width:e,height:n}=ZD(t);return{width:e,height:n}}function Jq(t,e,n){const r=Rr(e),i=Dr(e),s=n==="fixed",o=wo(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Pr(0);function c(){l.x=m_(i)}if(r||!r&&!s)if((kl(e)!=="body"||cd(i))&&(a=ym(e)),r){const m=wo(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!r&&i&&c();const d=i&&!r&&!s?tV(i,a):Pr(0),h=o.left+a.scrollLeft-l.x-d.x,p=o.top+a.scrollTop-l.y-d.y;return{x:h,y:p,width:o.width,height:o.height}}function Zg(t){return cr(t).position==="static"}function tI(t,e){if(!Rr(t)||cr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Dr(t)===n&&(n=n.ownerDocument.body),n}function rV(t,e){const n=Dn(t);if(gm(t))return n;if(!Rr(t)){let i=us(t);for(;i&&!cl(i);){if(lr(i)&&!Zg(i))return i;i=us(i)}return n}let r=tI(t,e);for(;r&&Bq(r)&&Zg(r);)r=tI(r,e);return r&&cl(r)&&Zg(r)&&!h_(r)?n:r||$q(t)||n}const Zq=async function(t){const e=this.getOffsetParent||rV,n=this.getDimensions,r=await n(t.floating);return{reference:Jq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eH(t){return cr(t).direction==="rtl"}const tH={convertOffsetParentRelativeRectToViewportRelativeRect:Wq,getDocumentElement:Dr,getClippingRect:Yq,getOffsetParent:rV,getElementRects:Zq,getClientRects:Gq,getDimensions:Xq,getScale:ka,isElement:lr,isRTL:eH};function iV(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nH(t,e){let n=null,r;const i=Dr(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=c;if(a||e(),!p||!m)return;const x=uh(h),v=uh(i.clientWidth-(d+p)),E=uh(i.clientHeight-(h+m)),y=uh(d),T={rootMargin:-x+"px "+-v+"px "+-E+"px "+-y+"px",threshold:An(0,cs(1,l))||1};let C=!0;function D(j){const A=j[0].intersectionRatio;if(A!==l){if(!C)return o();A?o(!1,A):r=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!iV(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(D,{...T,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,T)}n.observe(t)}return o(!0),s}function rH(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=p_(t),d=i||s?[...c?Vu(c):[],...Vu(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const h=c&&a?nH(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var T;(T=m)==null||T.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let x,v=l?wo(t):null;l&&E();function E(){const y=wo(t);v&&!iV(v,y)&&n(),v=y,x=requestAnimationFrame(E)}return n(),()=>{var y;d.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),h==null||h(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(x)}}const iH=Mq,sH=Oq,oH=Dq,aH=Fq,lH=Vq,nI=Nq,cH=Lq,uH=(t,e,n)=>{const r=new Map,i={platform:tH,...n},s={...i.platform,_c:r};return kq(t,e,{...i,platform:s})};var dH=typeof document<"u",hH=function(){},$h=dH?_.useLayoutEffect:hH;function ep(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!ep(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!ep(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function sV(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function rI(t,e){const n=sV(t);return Math.round(e*n)/n}function ey(t){const e=_.useRef(t);return $h(()=>{e.current=t}),e}function fH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=_.useState(r);ep(p,r)||m(r);const[x,v]=_.useState(null),[E,y]=_.useState(null),w=_.useCallback(M=>{M!==j.current&&(j.current=M,v(M))},[]),T=_.useCallback(M=>{M!==A.current&&(A.current=M,y(M))},[]),C=s||x,D=o||E,j=_.useRef(null),A=_.useRef(null),S=_.useRef(d),I=l!=null,P=ey(l),k=ey(i),V=ey(c),N=_.useCallback(()=>{if(!j.current||!A.current)return;const M={placement:e,strategy:n,middleware:p};k.current&&(M.platform=k.current),uH(j.current,A.current,M).then($=>{const z={...$,isPositioned:V.current!==!1};G.current&&!ep(S.current,z)&&(S.current=z,bo.flushSync(()=>{h(z)}))})},[p,e,n,k,V]);$h(()=>{c===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(M=>({...M,isPositioned:!1})))},[c]);const G=_.useRef(!1);$h(()=>(G.current=!0,()=>{G.current=!1}),[]),$h(()=>{if(C&&(j.current=C),D&&(A.current=D),C&&D){if(P.current)return P.current(C,D,N);N()}},[C,D,N,P,I]);const K=_.useMemo(()=>({reference:j,floating:A,setReference:w,setFloating:T}),[w,T]),q=_.useMemo(()=>({reference:C,floating:D}),[C,D]),J=_.useMemo(()=>{const M={position:n,left:0,top:0};if(!q.floating)return M;const $=rI(q.floating,d.x),z=rI(q.floating,d.y);return a?{...M,transform:"translate("+$+"px, "+z+"px)",...sV(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:z}},[n,a,q.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:N,refs:K,elements:q,floatingStyles:J}),[d,N,K,q,J])}const pH=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?nI({element:r.current,padding:i}).fn(n):{}:r?nI({element:r,padding:i}).fn(n):{}}}},mH=(t,e)=>({...iH(t),options:[t,e]}),gH=(t,e)=>({...sH(t),options:[t,e]}),yH=(t,e)=>({...cH(t),options:[t,e]}),vH=(t,e)=>({...oH(t),options:[t,e]}),wH=(t,e)=>({...aH(t),options:[t,e]}),xH=(t,e)=>({...lH(t),options:[t,e]}),_H=(t,e)=>({...pH(t),options:[t,e]});var TH="Arrow",oV=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return f.jsx(xe.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});oV.displayName=TH;var EH=oV;function bH(t){const[e,n]=_.useState(void 0);return Ft(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var g_="Popper",[aV,lV]=Po(g_),[SH,cV]=aV(g_),uV=t=>{const{__scopePopper:e,children:n}=t,[r,i]=_.useState(null);return f.jsx(SH,{scope:e,anchor:r,onAnchorChange:i,children:n})};uV.displayName=g_;var dV="PopperAnchor",hV=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=cV(dV,n),o=_.useRef(null),a=rt(e,o);return _.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:f.jsx(xe.div,{...i,ref:a})});hV.displayName=dV;var y_="PopperContent",[IH,AH]=aV(y_),fV=_.forwardRef((t,e)=>{var Z,me,we,ve,fe,_e;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...v}=t,E=cV(y_,n),[y,w]=_.useState(null),T=rt(e,_t=>w(_t)),[C,D]=_.useState(null),j=bH(C),A=(j==null?void 0:j.width)??0,S=(j==null?void 0:j.height)??0,I=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(c)?c:[c],V=k.length>0,N={padding:P,boundary:k.filter(CH),altBoundary:V},{refs:G,floatingStyles:K,placement:q,isPositioned:J,middlewareData:M}=fH({strategy:"fixed",placement:I,whileElementsMounted:(..._t)=>rH(..._t,{animationFrame:m==="always"}),elements:{reference:E.anchor},middleware:[mH({mainAxis:i+S,alignmentAxis:o}),l&&gH({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?yH():void 0,...N}),l&&vH({...N}),wH({...N,apply:({elements:_t,rects:Bt,availableWidth:Vr,availableHeight:ui})=>{const{width:di,height:Em}=Bt.reference,Es=_t.floating.style;Es.setProperty("--radix-popper-available-width",`${Vr}px`),Es.setProperty("--radix-popper-available-height",`${ui}px`),Es.setProperty("--radix-popper-anchor-width",`${di}px`),Es.setProperty("--radix-popper-anchor-height",`${Em}px`)}}),C&&_H({element:C,padding:a}),RH({arrowWidth:A,arrowHeight:S}),p&&xH({strategy:"referenceHidden",...N})]}),[$,z]=gV(q),W=Kn(x);Ft(()=>{J&&(W==null||W())},[J,W]);const B=(Z=M.arrow)==null?void 0:Z.x,Y=(me=M.arrow)==null?void 0:me.y,se=((we=M.arrow)==null?void 0:we.centerOffset)!==0,[Pe,le]=_.useState();return Ft(()=>{y&&le(window.getComputedStyle(y).zIndex)},[y]),f.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:J?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Pe,"--radix-popper-transform-origin":[(ve=M.transformOrigin)==null?void 0:ve.x,(fe=M.transformOrigin)==null?void 0:fe.y].join(" "),...((_e=M.hide)==null?void 0:_e.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(IH,{scope:n,placedSide:$,onArrowChange:D,arrowX:B,arrowY:Y,shouldHideArrow:se,children:f.jsx(xe.div,{"data-side":$,"data-align":z,...v,ref:T,style:{...v.style,animation:J?void 0:"none"}})})})});fV.displayName=y_;var pV="PopperArrow",PH={top:"bottom",right:"left",bottom:"top",left:"right"},mV=_.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=AH(pV,r),o=PH[s.placedSide];return f.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:f.jsx(EH,{...i,ref:n,style:{...i.style,display:"block"}})})});mV.displayName=pV;function CH(t){return t!==null}var RH=t=>({name:"transformOrigin",options:t,fn(e){var E,y,w;const{placement:n,rects:r,middlewareData:i}=e,o=((E=i.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=gV(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let x="",v="";return c==="bottom"?(x=o?h:`${p}px`,v=`${-l}px`):c==="top"?(x=o?h:`${p}px`,v=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,v=o?h:`${m}px`):c==="left"&&(x=`${r.floating.width+l}px`,v=o?h:`${m}px`),{data:{x,y:v}}}});function gV(t){const[e,n="center"]=t.split("-");return[e,n]}var kH=uV,NH=hV,DH=fV,VH=mV;function jH(t){const e=_.useRef({value:t,previous:t});return _.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var MH=[" ","Enter","ArrowUp","ArrowDown"],OH=[" ","Enter"],xo="Select",[vm,wm,LH]=fw(xo),[Nl,sX]=Po(xo,[LH,lV]),xm=lV(),[FH,_s]=Nl(xo),[BH,$H]=Nl(xo),yV=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:p,required:m,form:x}=t,v=xm(e),[E,y]=_.useState(null),[w,T]=_.useState(null),[C,D]=_.useState(!1),j=l_(c),[A,S]=Ba({prop:r,defaultProp:i??!1,onChange:s,caller:xo}),[I,P]=Ba({prop:o,defaultProp:a,onChange:l,caller:xo}),k=_.useRef(null),V=E?x||!!E.closest("form"):!0,[N,G]=_.useState(new Set),K=Array.from(N).map(q=>q.props.value).join(";");return f.jsx(kH,{...v,children:f.jsxs(FH,{required:m,scope:e,trigger:E,onTriggerChange:y,valueNode:w,onValueNodeChange:T,valueNodeHasChildren:C,onValueNodeHasChildrenChange:D,contentId:Qi(),value:I,onValueChange:P,open:A,onOpenChange:S,dir:j,triggerPointerDownPosRef:k,disabled:p,children:[f.jsx(vm.Provider,{scope:e,children:f.jsx(BH,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(q=>{G(J=>new Set(J).add(q))},[]),onNativeOptionRemove:_.useCallback(q=>{G(J=>{const M=new Set(J);return M.delete(q),M})},[]),children:n})}),V?f.jsxs($V,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:I,onChange:q=>P(q.target.value),disabled:p,form:x,children:[I===void 0?f.jsx("option",{value:""}):null,Array.from(N)]},K):null]})})};yV.displayName=xo;var vV="SelectTrigger",wV=_.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=xm(n),o=_s(vV,n),a=o.disabled||r,l=rt(e,o.onTriggerChange),c=wm(n),d=_.useRef("touch"),[h,p,m]=zV(v=>{const E=c().filter(T=>!T.disabled),y=E.find(T=>T.value===o.value),w=WV(E,v,y);w!==void 0&&o.onValueChange(w.value)}),x=v=>{a||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return f.jsx(NH,{asChild:!0,...s,children:f.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":UV(o.value)?"":void 0,...i,ref:l,onClick:pe(i.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&x(v)}),onPointerDown:pe(i.onPointerDown,v=>{d.current=v.pointerType;const E=v.target;E.hasPointerCapture(v.pointerId)&&E.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:pe(i.onKeyDown,v=>{const E=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(E&&v.key===" ")&&MH.includes(v.key)&&(x(),v.preventDefault())})})})});wV.displayName=vV;var xV="SelectValue",_V=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=_s(xV,n),{onValueNodeHasChildrenChange:c}=l,d=s!==void 0,h=rt(e,l.onValueNodeChange);return Ft(()=>{c(d)},[c,d]),f.jsx(xe.span,{...a,ref:h,style:{pointerEvents:"none"},children:UV(l.value)?f.jsx(f.Fragment,{children:o}):s})});_V.displayName=xV;var UH="SelectIcon",TV=_.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return f.jsx(xe.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});TV.displayName=UH;var zH="SelectPortal",EV=t=>f.jsx(bp,{asChild:!0,...t});EV.displayName=zH;var _o="SelectContent",bV=_.forwardRef((t,e)=>{const n=_s(_o,t.__scopeSelect),[r,i]=_.useState();if(Ft(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?bo.createPortal(f.jsx(SV,{scope:t.__scopeSelect,children:f.jsx(vm.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),s):null}return f.jsx(IV,{...t,ref:e})});bV.displayName=_o;var Jn=10,[SV,Ts]=Nl(_o),WH="SelectContentImpl",GH=Fa("SelectContent.RemoveScroll"),IV=_.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:v,avoidCollisions:E,...y}=t,w=_s(_o,n),[T,C]=_.useState(null),[D,j]=_.useState(null),A=rt(e,Z=>C(Z)),[S,I]=_.useState(null),[P,k]=_.useState(null),V=wm(n),[N,G]=_.useState(!1),K=_.useRef(!1);_.useEffect(()=>{if(T)return bD(T)},[T]),fD();const q=_.useCallback(Z=>{const[me,...we]=V().map(_e=>_e.ref.current),[ve]=we.slice(-1),fe=document.activeElement;for(const _e of Z)if(_e===fe||(_e==null||_e.scrollIntoView({block:"nearest"}),_e===me&&D&&(D.scrollTop=0),_e===ve&&D&&(D.scrollTop=D.scrollHeight),_e==null||_e.focus(),document.activeElement!==fe))return},[V,D]),J=_.useCallback(()=>q([S,T]),[q,S,T]);_.useEffect(()=>{N&&J()},[N,J]);const{onOpenChange:M,triggerPointerDownPosRef:$}=w;_.useEffect(()=>{if(T){let Z={x:0,y:0};const me=ve=>{var fe,_e;Z={x:Math.abs(Math.round(ve.pageX)-(((fe=$.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(ve.pageY)-(((_e=$.current)==null?void 0:_e.y)??0))}},we=ve=>{Z.x<=10&&Z.y<=10?ve.preventDefault():T.contains(ve.target)||M(!1),document.removeEventListener("pointermove",me),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",we,{capture:!0})}}},[T,M,$]),_.useEffect(()=>{const Z=()=>M(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[M]);const[z,W]=zV(Z=>{const me=V().filter(fe=>!fe.disabled),we=me.find(fe=>fe.ref.current===document.activeElement),ve=WV(me,Z,we);ve&&setTimeout(()=>ve.ref.current.focus())}),B=_.useCallback((Z,me,we)=>{const ve=!K.current&&!we;(w.value!==void 0&&w.value===me||ve)&&(I(Z),ve&&(K.current=!0))},[w.value]),Y=_.useCallback(()=>T==null?void 0:T.focus(),[T]),se=_.useCallback((Z,me,we)=>{const ve=!K.current&&!we;(w.value!==void 0&&w.value===me||ve)&&k(Z)},[w.value]),Pe=r==="popper"?a0:AV,le=Pe===a0?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:v,avoidCollisions:E}:{};return f.jsx(SV,{scope:n,content:T,viewport:D,onViewportChange:j,itemRefCallback:B,selectedItem:S,onItemLeave:Y,itemTextRefCallback:se,focusSelectedItem:J,selectedItemText:P,position:r,isPositioned:N,searchRef:z,children:f.jsx(TD,{as:GH,allowPinchZoom:!0,children:f.jsx(i_,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:pe(i,Z=>{var me;(me=w.trigger)==null||me.focus({preventScroll:!0}),Z.preventDefault()}),children:f.jsx(Ep,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:f.jsx(Pe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),...y,...le,onPlaced:()=>G(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:pe(y.onKeyDown,Z=>{const me=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!me&&Z.key.length===1&&W(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ve=V().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ve=ve.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const fe=Z.target,_e=ve.indexOf(fe);ve=ve.slice(_e+1)}setTimeout(()=>q(ve)),Z.preventDefault()}})})})})})})});IV.displayName=WH;var qH="SelectItemAlignedPosition",AV=_.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=_s(_o,n),o=Ts(_o,n),[a,l]=_.useState(null),[c,d]=_.useState(null),h=rt(e,A=>d(A)),p=wm(n),m=_.useRef(!1),x=_.useRef(!0),{viewport:v,selectedItem:E,selectedItemText:y,focusSelectedItem:w}=o,T=_.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&v&&E&&y){const A=s.trigger.getBoundingClientRect(),S=c.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(s.dir!=="rtl"){const fe=P.left-S.left,_e=I.left-fe,_t=A.left-_e,Bt=A.width+_t,Vr=Math.max(Bt,S.width),ui=window.innerWidth-Jn,di=QS(_e,[Jn,Math.max(Jn,ui-Vr)]);a.style.minWidth=Bt+"px",a.style.left=di+"px"}else{const fe=S.right-P.right,_e=window.innerWidth-I.right-fe,_t=window.innerWidth-A.right-_e,Bt=A.width+_t,Vr=Math.max(Bt,S.width),ui=window.innerWidth-Jn,di=QS(_e,[Jn,Math.max(Jn,ui-Vr)]);a.style.minWidth=Bt+"px",a.style.right=di+"px"}const k=p(),V=window.innerHeight-Jn*2,N=v.scrollHeight,G=window.getComputedStyle(c),K=parseInt(G.borderTopWidth,10),q=parseInt(G.paddingTop,10),J=parseInt(G.borderBottomWidth,10),M=parseInt(G.paddingBottom,10),$=K+q+N+M+J,z=Math.min(E.offsetHeight*5,$),W=window.getComputedStyle(v),B=parseInt(W.paddingTop,10),Y=parseInt(W.paddingBottom,10),se=A.top+A.height/2-Jn,Pe=V-se,le=E.offsetHeight/2,Z=E.offsetTop+le,me=K+q+Z,we=$-me;if(me<=se){const fe=k.length>0&&E===k[k.length-1].ref.current;a.style.bottom="0px";const _e=c.clientHeight-v.offsetTop-v.offsetHeight,_t=Math.max(Pe,le+(fe?Y:0)+_e+J),Bt=me+_t;a.style.height=Bt+"px"}else{const fe=k.length>0&&E===k[0].ref.current;a.style.top="0px";const _t=Math.max(se,K+v.offsetTop+(fe?B:0)+le)+we;a.style.height=_t+"px",v.scrollTop=me-se+v.offsetTop}a.style.margin=`${Jn}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,a,c,v,E,y,s.dir,r]);Ft(()=>T(),[T]);const[C,D]=_.useState();Ft(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const j=_.useCallback(A=>{A&&x.current===!0&&(T(),w==null||w(),x.current=!1)},[T,w]);return f.jsx(KH,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:f.jsx(xe.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});AV.displayName=qH;var HH="SelectPopperPosition",a0=_.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Jn,...s}=t,o=xm(n);return f.jsx(DH,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});a0.displayName=HH;var[KH,v_]=Nl(_o,{}),l0="SelectViewport",PV=_.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Ts(l0,n),o=v_(l0,n),a=rt(e,s.onViewportChange),l=_.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(vm.Slot,{scope:n,children:f.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pe(i.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const m=Math.abs(l.current-d.scrollTop);if(m>0){const x=window.innerHeight-Jn*2,v=parseFloat(h.style.minHeight),E=parseFloat(h.style.height),y=Math.max(v,E);if(y<x){const w=y+m,T=Math.min(x,w),C=w-T;h.style.height=T+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});PV.displayName=l0;var CV="SelectGroup",[QH,YH]=Nl(CV),XH=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Qi();return f.jsx(QH,{scope:n,id:i,children:f.jsx(xe.div,{role:"group","aria-labelledby":i,...r,ref:e})})});XH.displayName=CV;var RV="SelectLabel",kV=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=YH(RV,n);return f.jsx(xe.div,{id:i.id,...r,ref:e})});kV.displayName=RV;var tp="SelectItem",[JH,NV]=Nl(tp),DV=_.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=_s(tp,n),l=Ts(tp,n),c=a.value===r,[d,h]=_.useState(s??""),[p,m]=_.useState(!1),x=rt(e,w=>{var T;return(T=l.itemRefCallback)==null?void 0:T.call(l,w,r,i)}),v=Qi(),E=_.useRef("touch"),y=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(JH,{scope:n,value:r,disabled:i,textId:v,isSelected:c,onItemTextChange:_.useCallback(w=>{h(T=>T||((w==null?void 0:w.textContent)??"").trim())},[]),children:f.jsx(vm.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:f.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:pe(o.onFocus,()=>m(!0)),onBlur:pe(o.onBlur,()=>m(!1)),onClick:pe(o.onClick,()=>{E.current!=="mouse"&&y()}),onPointerUp:pe(o.onPointerUp,()=>{E.current==="mouse"&&y()}),onPointerDown:pe(o.onPointerDown,w=>{E.current=w.pointerType}),onPointerMove:pe(o.onPointerMove,w=>{var T;E.current=w.pointerType,i?(T=l.onItemLeave)==null||T.call(l):E.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,w=>{var T;w.currentTarget===document.activeElement&&((T=l.onItemLeave)==null||T.call(l))}),onKeyDown:pe(o.onKeyDown,w=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(OH.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});DV.displayName=tp;var xc="SelectItemText",VV=_.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=_s(xc,n),a=Ts(xc,n),l=NV(xc,n),c=$H(xc,n),[d,h]=_.useState(null),p=rt(e,y=>h(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),m=d==null?void 0:d.textContent,x=_.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:E}=c;return Ft(()=>(v(x),()=>E(x)),[v,E,x]),f.jsxs(f.Fragment,{children:[f.jsx(xe.span,{id:l.textId,...s,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?bo.createPortal(s.children,o.valueNode):null]})});VV.displayName=xc;var jV="SelectItemIndicator",MV=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return NV(jV,n).isSelected?f.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});MV.displayName=jV;var c0="SelectScrollUpButton",OV=_.forwardRef((t,e)=>{const n=Ts(c0,t.__scopeSelect),r=v_(c0,t.__scopeSelect),[i,s]=_.useState(!1),o=rt(e,r.onScrollButtonChange);return Ft(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?f.jsx(FV,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});OV.displayName=c0;var u0="SelectScrollDownButton",LV=_.forwardRef((t,e)=>{const n=Ts(u0,t.__scopeSelect),r=v_(u0,t.__scopeSelect),[i,s]=_.useState(!1),o=rt(e,r.onScrollButtonChange);return Ft(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;s(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?f.jsx(FV,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});LV.displayName=u0;var FV=_.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Ts("SelectScrollButton",n),o=_.useRef(null),a=wm(n),l=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),Ft(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),f.jsx(xe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(i.onPointerLeave,()=>{l()})})}),ZH="SelectSeparator",BV=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return f.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});BV.displayName=ZH;var d0="SelectArrow",eK=_.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=xm(n),s=_s(d0,n),o=Ts(d0,n);return s.open&&o.position==="popper"?f.jsx(VH,{...i,...r,ref:e}):null});eK.displayName=d0;var tK="SelectBubbleInput",$V=_.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=_.useRef(null),s=rt(r,i),o=jH(e);return _.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const h=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(h)}},[o,e]),f.jsx(xe.select,{...n,style:{...HP,...n.style},ref:s,defaultValue:e})});$V.displayName=tK;function UV(t){return t===""||t===void 0}function zV(t){const e=Kn(t),n=_.useRef(""),r=_.useRef(0),i=_.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=_.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function WV(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=nK(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function nK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rK=yV,GV=wV,iK=_V,sK=TV,oK=EV,qV=bV,aK=PV,HV=kV,KV=DV,lK=VV,cK=MV,QV=OV,YV=LV,XV=BV;const Uh=rK,zh=iK,Wc=ce.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(GV,{ref:r,className:De("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,f.jsx(sK,{asChild:!0,children:f.jsx(pC,{className:"h-4 w-4 opacity-50"})})]}));Wc.displayName=GV.displayName;const JV=ce.forwardRef(({className:t,...e},n)=>f.jsx(QV,{ref:n,className:De("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(qF,{className:"h-4 w-4"})}));JV.displayName=QV.displayName;const ZV=ce.forwardRef(({className:t,...e},n)=>f.jsx(YV,{ref:n,className:De("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(pC,{className:"h-4 w-4"})}));ZV.displayName=YV.displayName;const Gc=ce.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>f.jsx(oK,{children:f.jsxs(qV,{ref:i,className:De("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[f.jsx(JV,{}),f.jsx(aK,{className:De("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),f.jsx(ZV,{})]})}));Gc.displayName=qV.displayName;const uK=ce.forwardRef(({className:t,...e},n)=>f.jsx(HV,{ref:n,className:De("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));uK.displayName=HV.displayName;const $n=ce.forwardRef(({className:t,children:e,...n},r)=>f.jsxs(KV,{ref:r,className:De("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(cK,{children:f.jsx(fC,{className:"h-4 w-4"})})}),f.jsx(lK,{children:e})]}));$n.displayName=KV.displayName;const dK=ce.forwardRef(({className:t,...e},n)=>f.jsx(XV,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",t),...e}));dK.displayName=XV.displayName;var ty="rovingFocusGroup.onEntryFocus",hK={bubbles:!1,cancelable:!0},ud="RovingFocusGroup",[h0,ej,fK]=fw(ud),[pK,tj]=Po(ud,[fK]),[mK,gK]=pK(ud),nj=_.forwardRef((t,e)=>f.jsx(h0.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(h0.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(yK,{...t,ref:e})})}));nj.displayName=ud;var yK=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,p=_.useRef(null),m=rt(e,p),x=l_(s),[v,E]=Ba({prop:o,defaultProp:a??null,onChange:l,caller:ud}),[y,w]=_.useState(!1),T=Kn(c),C=ej(n),D=_.useRef(!1),[j,A]=_.useState(0);return _.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(ty,T),()=>S.removeEventListener(ty,T)},[T]),f.jsx(mK,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:v,onItemFocus:_.useCallback(S=>E(S),[E]),onItemShiftTab:_.useCallback(()=>w(!0),[]),onFocusableItemAdd:_.useCallback(()=>A(S=>S+1),[]),onFocusableItemRemove:_.useCallback(()=>A(S=>S-1),[]),children:f.jsx(xe.div,{tabIndex:y||j===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{D.current=!0}),onFocus:pe(t.onFocus,S=>{const I=!D.current;if(S.target===S.currentTarget&&I&&!y){const P=new CustomEvent(ty,hK);if(S.currentTarget.dispatchEvent(P),!P.defaultPrevented){const k=C().filter(q=>q.focusable),V=k.find(q=>q.active),N=k.find(q=>q.id===v),K=[V,N,...k].filter(Boolean).map(q=>q.ref.current);sj(K,d)}}D.current=!1}),onBlur:pe(t.onBlur,()=>w(!1))})})}),rj="RovingFocusGroupItem",ij=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Qi(),c=s||l,d=gK(rj,n),h=d.currentTabStopId===c,p=ej(n),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:v}=d;return _.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),f.jsx(h0.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:f.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:pe(t.onMouseDown,E=>{r?d.onItemFocus(c):E.preventDefault()}),onFocus:pe(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){d.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const y=xK(E,d.orientation,d.dir);if(y!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let T=p().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")T.reverse();else if(y==="prev"||y==="next"){y==="prev"&&T.reverse();const C=T.indexOf(E.currentTarget);T=d.loop?_K(T,C+1):T.slice(C+1)}setTimeout(()=>sj(T))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});ij.displayName=rj;var vK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wK(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function xK(t,e,n){const r=wK(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return vK[r]}function sj(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function _K(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var TK=nj,EK=ij,_m="Tabs",[bK,oX]=Po(_m,[tj]),oj=tj(),[SK,w_]=bK(_m),aj=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=l_(a),[h,p]=Ba({prop:r,onChange:i,defaultProp:s??"",caller:_m});return f.jsx(SK,{scope:n,baseId:Qi(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:l,children:f.jsx(xe.div,{dir:d,"data-orientation":o,...c,ref:e})})});aj.displayName=_m;var lj="TabsList",cj=_.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=w_(lj,n),o=oj(n);return f.jsx(TK,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:f.jsx(xe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});cj.displayName=lj;var uj="TabsTrigger",dj=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=w_(uj,n),a=oj(n),l=pj(o.baseId,r),c=mj(o.baseId,r),d=r===o.value;return f.jsx(EK,{asChild:!0,...a,focusable:!i,active:d,children:f.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:pe(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:pe(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(r)})})})});dj.displayName=uj;var hj="TabsContent",fj=_.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=w_(hj,n),l=pj(a.baseId,r),c=mj(a.baseId,r),d=r===a.value,h=_.useRef(d);return _.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),f.jsx(ml,{present:i||d,children:({present:p})=>f.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&s})})});fj.displayName=hj;function pj(t,e){return`${t}-trigger-${e}`}function mj(t,e){return`${t}-content-${e}`}var IK=aj,gj=cj,yj=dj,vj=fj;const AK=IK,wj=ce.forwardRef(({className:t,...e},n)=>f.jsx(gj,{ref:n,className:De("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));wj.displayName=gj.displayName;const f0=ce.forwardRef(({className:t,...e},n)=>f.jsx(yj,{ref:n,className:De("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));f0.displayName=yj.displayName;const p0=ce.forwardRef(({className:t,...e},n)=>f.jsx(vj,{ref:n,className:De("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));p0.displayName=vj.displayName;const iI=({item:t,onDelete:e})=>{const[n,r]=_.useState(!1),i=_.useRef(null),{loadingDelete:s}=ce.useContext(xj),o=()=>{n?i.current.pause():i.current.play(),r(!n)};return f.jsx(xn,{children:f.jsx(_n,{className:"p-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold",children:t.title}),f.jsx("p",{className:"text-sm text-gray-600",children:t.file})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("audio",{ref:i,src:t.url,onEnded:()=>r(!1)}),f.jsx(ue,{size:"sm",variant:"outline",onClick:o,children:n?f.jsx(e6,{className:"h-4 w-4"}):f.jsx(r6,{className:"h-4 w-4"})}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>e(t.id),className:"text-red-600 hover:bg-red-50",disabled:s[t.id],children:s[t.id]?f.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1 text-red-600",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):f.jsx(hu,{className:"h-4 w-4"})})]})]})})})},PK=({music:t,setMusic:e})=>{const{toast:n}=ur(),[r,i]=_.useState(!1),[s,o]=_.useState({title:"",category:"quran",file:null}),[a,l]=_.useState(!1),[c,d]=_.useState(0),[h,p]=_.useState({});_.useEffect(()=>{Nx().then(e)},[]);const m=(E,y)=>new Promise((w,T)=>{const C="dkfue0nxr",D="unsigned_preset",j=`https://api.cloudinary.com/v1_1/${C}/auto/upload`,A=new XMLHttpRequest;A.open("POST",j),A.upload.onprogress=I=>{if(I.lengthComputable&&y){const P=Math.round(I.loaded/I.total*100);y(P)}},A.onload=()=>{if(A.status===200){const I=JSON.parse(A.responseText);w({secure_url:I.secure_url,resource_type:I.resource_type||"auto"})}else T(new Error("Upload gagal"))},A.onerror=()=>T(new Error("Upload gagal"));const S=new FormData;S.append("file",E),S.append("upload_preset",D),A.send(S)}),x=async E=>{if(E.preventDefault(),!s.file){n({title:"File Audio Diperlukan",description:"Silakan pilih file audio untuk diunggah.",variant:"destructive"});return}if(s.file.size>10*1024*1024){n({title:"Ukuran File Terlalu Besar",description:"Ukuran file audio maksimal 10MB.",variant:"destructive"});return}l(!0),d(0);let y="";try{y=await m(s.file,d)}catch(D){l(!1),d(0),n({title:"Gagal upload ke Cloudinary",description:D.message,variant:"destructive"});return}l(!1),d(0);function w(D){const j=D.match(/\/upload\/(?:v\d+\/)?(.+?)\.[a-zA-Z0-9]+$/);return j&&j[1]?j[1]:null}const T={title:s.title,category:s.category,file:s.file.name,url:y.secure_url,public_id:w(y.secure_url),resource_type:y.resource_type,createdAt:new Date().toISOString()},C=await CN(T);e(D=>[...D,C]),n({title:"Musik Ditambahkan",description:"Musik baru berhasil diupload ke Cloudinary."}),i(!1),o({title:"",category:"quran",file:null})},v=async E=>{p(T=>({...T,[E]:!0}));const y=t.find(T=>T.id===E);if(!y)return;let w=null;if(y.public_id)try{await fetch("http://localhost:4000/delete-music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:y.public_id,resource_type:y.resource_type||"auto"})})}catch(T){w=T}try{await RN(y.id),e(T=>T.filter(C=>C.id!==y.id)),n({title:"Musik Dihapus",description:w?"Metadata dihapus dari database, tapi file Cloudinary gagal dihapus.":"Musik berhasil dihapus dari dashboard, database, dan Cloudinary.",variant:w?"destructive":void 0})}catch(T){n({title:"Gagal hapus metadata di Firestore",description:T.message,variant:"destructive"})}p(T=>({...T,[E]:!1}))};return f.jsx("div",{children:f.jsxs(xj.Provider,{value:{loadingDelete:h},children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Kelola Musik"}),f.jsxs(ld,{open:r,onOpenChange:i,children:[f.jsx(GD,{asChild:!0,children:f.jsxs(ue,{className:"gradient-bg text-white",children:[f.jsx(gf,{className:"h-4 w-4 mr-2"}),"Tambah Musik"]})}),f.jsxs(Al,{className:"max-w-md",children:[f.jsx(Pl,{children:f.jsx(Cl,{children:"Tambah Musik Baru"})}),f.jsxs("form",{onSubmit:x,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"title",children:"Judul"}),f.jsx(ke,{id:"title",value:s.title,onChange:E=>o({...s,title:E.target.value}),required:!0})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"category",children:"Kategori"}),f.jsxs(Uh,{value:s.category,onValueChange:E=>o({...s,category:E}),children:[f.jsx(Wc,{children:f.jsx(zh,{})}),f.jsxs(Gc,{children:[f.jsx($n,{value:"quran",children:"Ayat Al-Qur'an"}),f.jsx($n,{value:"nasyid",children:"Nasyid"})]})]})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"file",children:"File Audio"}),f.jsx(ke,{id:"file",type:"file",accept:"audio/*",onChange:E=>o({...s,file:E.target.files[0]||null}),required:!0})]}),f.jsx(ue,{type:"submit",className:"w-full",disabled:a,children:a?"Menyimpan...":"Simpan"}),a&&f.jsxs("div",{className:"mt-4",children:[f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:f.jsx("div",{className:"bg-purple-500 h-3 rounded-full transition-all duration-200",style:{width:`${c}%`}})}),f.jsxs("div",{className:"text-xs text-gray-600 mt-1 text-center",children:["Uploading: ",c,"%"]})]})]})]})]})]}),f.jsxs(AK,{defaultValue:"quran",className:"w-full",children:[f.jsxs(wj,{className:"grid w-full grid-cols-2",children:[f.jsx(f0,{value:"quran",children:"Ayat Al-Qur'an"}),f.jsx(f0,{value:"nasyid",children:"Nasyid"})]}),f.jsx(p0,{value:"quran",className:"mt-6",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.filter(E=>E.category==="quran").map(E=>f.jsx(iI,{item:E,onDelete:v},E.id))})}),f.jsx(p0,{value:"nasyid",className:"mt-6",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.filter(E=>E.category==="nasyid").map(E=>f.jsx(iI,{item:E,onDelete:v},E.id))})})]})]})})},xj=ce.createContext({loadingDelete:{}}),CK=ce.forwardRef(({className:t,...e},n)=>f.jsx("textarea",{className:De("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));CK.displayName="Textarea";function RK(){try{return JSON.parse(localStorage.getItem("adminUser"))||null}catch{return null}}const sI=({orders:t,setOrders:e,templates:n})=>{const{toast:r}=ur();let i=RK();i&&i.type==="admin"&&(localStorage.removeItem("adminUser"),i=null);const[s,o]=_.useState(!1),[a,l]=_.useState([]);_.useEffect(()=>{Nx().then(l).catch(()=>l([]))},[]),_.useEffect(()=>{async function I(){o(!0);try{const P=await Ff();e(P)}catch(P){r({title:"Gagal memuat pesanan",description:P.message||String(P),variant:"destructive"})}finally{o(!1)}}I()},[]);const c=async I=>{o(!0);try{await VN(I);const P=await Ff();e(P),r({title:"Pesanan Dihapus",description:`Pesanan dengan ID ${I} telah dihapus dari database (cloud).`})}catch(P){console.error("[ERROR] Gagal menghapus order:",P),r({title:"Gagal menghapus pesanan",description:P.message||String(P),variant:"destructive"})}finally{o(!1)}},d=async I=>{o(!0);try{const P=t.find(z=>z.id===I);if(!P)return;const V=(z=>z.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))(`${P.groomNickname||""} & ${P.brideNickname||""}`),N=t.filter(z=>z.id!==I&&z.invitationLink&&typeof z.invitationLink=="string").map(z=>{const W=z.invitationLink.match(/\/invitation\/([^/?#]+)/);return W?W[1]:null}).filter(Boolean);let G=V,K=2;for(;N.includes(G);)G=`${V}-${K}`,K++;const q=`${window.location.origin}/invitation/${G}`;let J="";const M=n.find(z=>z.id===P.templateId);if(M){let z=M.html||"";Object.entries(P).forEach(([le,Z])=>{if(le==="weddingGifts"||le==="musicUrl"||typeof Z=="object"&&Z!==null)return;const me=new RegExp(`{{\\s*${le}\\s*}}`,"g");z=z.replace(me,Z??"")});let W="";if(P.selectedMusic&&Array.isArray(a)){const le=a.find(Z=>Z.id===P.selectedMusic);le&&le.url&&(W=le.url)}z=z.replace(/{{\\s*musicUrl\\s*}}/g,W);let B="";W&&(B=`
<audio id="wedding-music" src="${W}" style="display:none" preload="auto" loop></audio>
<button id="music-toggle-btn" style="position:fixed;right:24px;bottom:24px;width:56px;height:56px;border-radius:50%;background:#8b5cf6;box-shadow:0 2px 8px #0002;display:flex;align-items:center;justify-content:center;z-index:9999;border:none;cursor:pointer;outline:none;">
  <svg id="music-play-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21 5,3"/></svg>
  <svg id="music-pause-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24" style="display:none;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
</button>
<script>(function(){
  var audio = document.getElementById('wedding-music');
  var toggleBtn = document.getElementById('music-toggle-btn');
  var playIcon = document.getElementById('music-play-icon');
  var pauseIcon = document.getElementById('music-pause-icon');
  var isPlaying = false;
  function updateBtn() {
    if(isPlaying) { playIcon.style.display = 'none'; pauseIcon.style.display = ''; }
    else { playIcon.style.display = ''; pauseIcon.style.display = 'none'; }
  }
  function playMusic() { if(audio && audio.src) { audio.play(); isPlaying = true; updateBtn(); } }
  function pauseMusic() { if(audio) { audio.pause(); isPlaying = false; updateBtn(); } }
  toggleBtn.onclick = function() { if(isPlaying) { pauseMusic(); } else { playMusic(); } };
  if(audio) {
    audio.addEventListener('play', function(){ isPlaying = true; updateBtn(); });
    audio.addEventListener('pause', function(){ isPlaying = false; updateBtn(); });
    audio.addEventListener('ended', function(){ isPlaying = false; updateBtn(); });
  }
  document.body.addEventListener('click', function playMusicOnce(){
    if(audio && !isPlaying) { playMusic(); }
    document.body.removeEventListener('click', playMusicOnce);
  });
  document.addEventListener('visibilitychange', function(){
    if(document.hidden && audio && !audio.paused) { pauseMusic(); }
  });
  updateBtn();
})();<\/script>`);let Y=P.weddingGifts;if(typeof Y=="string")try{Y=JSON.parse(Y),Array.isArray(Y)||(Y=[])}catch{Y=[]}const se=(Y||[]).filter(le=>le&&typeof le=="object"&&(le.name||le.account||le.holder));if(se.length>0){const le=se.map((Z,me,we)=>{const ve=Z.type==="ewallet",fe=ve?'<svg width="20" height="20" fill="none" stroke="#06b6d4" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="3" y="7" width="18" height="10" rx="2"/><path d="M16 11h2a1 1 0 0 1 0 2h-2z"/></svg>':'<svg width="20" height="20" fill="none" stroke="#4f46e5" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="2" y="7" width="20" height="10" rx="2"/><path d="M6 11h4a1 1 0 0 1 0 2H6z"/></svg>',_e=Z.account?`<button type="button" class="btn-copy-account" data-account="${Z.account}" style="margin-left:8px;padding:2px 10px;font-size:0.95rem;border:none;background:#f1f5f9;color:#2563eb;border-radius:6px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .2s;"><svg width=16 height=16 fill=none stroke='#2563eb' stroke-width=2 viewBox='0 0 24 24'><rect x='9' y='9' width='13' height='13' rx='2'/><path d='M5 15V5a2 2 0 0 1 2-2h10'/></svg> <span>Salin</span></button>`:"";return`<div class="gift-item" style="display:flex;align-items:flex-start;padding:16px 0;${me<we.length-1?"border-bottom:1px solid #e5e7eb;":""}">
            <div style="margin-right:12px;">${fe}</div>
            <div style="flex:1;min-width:0;">
              <div style="font-weight:600;font-size:1rem;color:#111827;">${ve?"E-Wallet":"Bank"}: ${Z.name||"-"}</div>
              <div style="color:#374151;font-size:0.95rem;">a.n. ${Z.holder||"-"}</div>
              <div style="color:#2563eb;font-size:1.05rem;word-break:break-all;display:flex;align-items:center;gap:4px;">${Z.account||"-"}${_e}</div>
            </div>
          </div>`}).join("");z=z.replace(/{{\\s*weddingGifts\\s*}}/g,le)}else z=z.replace(/<section[^>]*id=["']wedding-gift-section["'][^>]*>[\s\S]*?<\/section>/gi,""),z=z.replace(/{{\\s*weddingGifts\\s*}}/g,"");const Pe=`<script>(function(){
          document.addEventListener('click',function(e){
            const btn = e.target.closest('.btn-copy-account');
            if(btn){
              const acc = btn.getAttribute('data-account');
              if(acc){
                navigator.clipboard.writeText(acc).then(()=>{
                  const span = btn.querySelector('span');
                  if(span){
                    span.textContent='Disalin!';
                    setTimeout(()=>{span.textContent='Salin';},1200);
                  }
                });
              }
            }
          });
        })();<\/script>`;J=`<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Undangan</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>${M.css||""}</style>
</head>
<body>
${z}
<script type="text/javascript">
${M.js||""}
<\/script>
${Pe}
</body>
</html>`,B&&(J=J.replace("</body>",B+`
</body>`))}const $={...P,status:"completed",invitationLink:q,processedAt:new Date().toISOString(),invitationHtml:J};await Bv(I,$),e(z=>z.map(W=>W.id===I?$:W)),r({title:"Pesanan Diproses",description:`Link undangan: ${q}`})}catch(P){r({title:"Gagal memproses pesanan",description:P.message||String(P),variant:"destructive"})}finally{o(!1)}},h=async()=>{o(!0);try{const I=t.find(k=>k.id===p);let P={...x};if(I&&I.invitationLink){const k=n.find(V=>V.id===x.templateId);if(k){let V=k.html||"";Object.entries(x).forEach(([$,z])=>{if($==="weddingGifts"||$==="musicUrl"||typeof z=="object"&&z!==null)return;const W=new RegExp(`{{\\s*${$}\\s*}}`,"g");V=V.replace(W,z??"")});let N="";if(x.selectedMusic&&Array.isArray(a)){const $=a.find(z=>z.id===x.selectedMusic);$&&$.url&&(N=$.url)}V=V.replace(/{{\s*musicUrl\s*}}/g,N);let G="";N&&(G=`
<audio id="wedding-music" src="${N}" style="display:none" preload="auto" loop></audio>
<button id="music-toggle-btn" style="position:fixed;right:24px;bottom:24px;width:56px;height:56px;border-radius:50%;background:#8b5cf6;box-shadow:0 2px 8px #0002;display:flex;align-items:center;justify-content:center;z-index:9999;border:none;cursor:pointer;outline:none;">
  <svg id="music-play-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21 5,3"/></svg>
  <svg id="music-pause-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" stroke="#fff" stroke-width="2" viewBox="0 0 24 24" style="display:none;"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>
</button>
<script>(function(){
  var audio = document.getElementById('wedding-music');
  var toggleBtn = document.getElementById('music-toggle-btn');
  var playIcon = document.getElementById('music-play-icon');
  var pauseIcon = document.getElementById('music-pause-icon');
  var isPlaying = false;
  function updateBtn() {
    if(isPlaying) { playIcon.style.display = 'none'; pauseIcon.style.display = ''; }
    else { playIcon.style.display = ''; pauseIcon.style.display = 'none'; }
  }
  function playMusic() { if(audio && audio.src) { audio.play(); isPlaying = true; updateBtn(); } }
  function pauseMusic() { if(audio) { audio.pause(); isPlaying = false; updateBtn(); } }
  toggleBtn.onclick = function() { if(isPlaying) { pauseMusic(); } else { playMusic(); } };
  if(audio) {
    audio.addEventListener('play', function(){ isPlaying = true; updateBtn(); });
    audio.addEventListener('pause', function(){ isPlaying = false; updateBtn(); });
    audio.addEventListener('ended', function(){ isPlaying = false; updateBtn(); });
  }
  document.body.addEventListener('click', function playMusicOnce(){
    if(audio && !isPlaying) { playMusic(); }
    document.body.removeEventListener('click', playMusicOnce);
  });
  document.addEventListener('visibilitychange', function(){
    if(document.hidden && audio && !audio.paused) { pauseMusic(); }
  });
  updateBtn();
})();<\/script>`);let K=x.weddingGifts;if(typeof K=="string")try{K=JSON.parse(K),Array.isArray(K)||(K=[])}catch{K=[]}const q=(K||[]).filter($=>$&&typeof $=="object"&&($.name||$.account||$.holder));if(q.length>0){const $=q.map((z,W,B)=>{const Y=z.type==="ewallet",se=Y?'<svg width="20" height="20" fill="none" stroke="#06b6d4" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="3" y="7" width="18" height="10" rx="2"/><path d="M16 11h2a1 1 0 0 1 0 2h-2z"/></svg>':'<svg width="20" height="20" fill="none" stroke="#4f46e5" stroke-width="2" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:8px;"><rect x="2" y="7" width="20" height="10" rx="2"/><path d="M6 11h4a1 1 0 0 1 0 2H6z"/></svg>',Pe=z.account?`<button type="button" class="btn-copy-account" data-account="${z.account}" style="margin-left:8px;padding:2px 10px;font-size:0.95rem;border:none;background:#f1f5f9;color:#2563eb;border-radius:6px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .2s;"><svg width=16 height=16 fill=none stroke='#2563eb' stroke-width=2 viewBox='0 0 24 24'><rect x='9' y='9' width='13' height='13' rx='2'/><path d='M5 15V5a2 2 0 0 1 2-2h10'/></svg> <span>Salin</span></button>`:"";return`<div class="gift-item" style="display:flex;align-items:flex-start;padding:16px 0;${W<B.length-1?"border-bottom:1px solid #e5e7eb;":""}">
            <div style="margin-right:12px;">${se}</div>
            <div style="flex:1;min-width:0;">
              <div style="font-weight:600;font-size:1rem;color:#111827;">${Y?"E-Wallet":"Bank"}: ${z.name||"-"}</div>
              <div style="color:#374151;font-size:0.95rem;">a.n. ${z.holder||"-"}</div>
              <div style="color:#2563eb;font-size:1.05rem;word-break:break-all;display:flex;align-items:center;gap:4px;">${z.account||"-"}${Pe}</div>
            </div>
          </div>`}).join("");V=V.replace(/{{\s*weddingGifts\s*}}/g,$)}else V=V.replace(/<section[^>]*id=["']wedding-gift-section["'][^>]*>[\s\S]*?<\/section>/gi,""),V=V.replace(/{{\s*weddingGifts\s*}}/g,"");const J=`<script>(function(){
  document.addEventListener('click',function(e){
    const btn = e.target.closest('.btn-copy-account');
    if(btn){
      const acc = btn.getAttribute('data-account');
      if(acc){
        navigator.clipboard.writeText(acc).then(()=>{
          const span = btn.querySelector('span');
          if(span){
            span.textContent='Disalin!';
            setTimeout(()=>{span.textContent='Salin';},1200);
          }
        });
      }
    }
  });
})();<\/script>`;let M=`<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Undangan</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>${k.css||""}</style>
</head>
<body>
${V}
<script type="text/javascript">
${k.js||""}
<\/script>
${J}
</body>
</html>`;G&&(M=M.replace("</body>",G+`
</body>`)),P={...x,invitationHtml:M,invitationLink:I.invitationLink}}}await Bv(p,P),e(k=>k.map(V=>V.id===p?{...P}:V)),m(null),r({title:"Pesanan Diperbarui",description:"Data pesanan & undangan berhasil diupdate."})}catch(I){r({title:"Gagal update pesanan",description:I.message||String(I),variant:"destructive"})}finally{o(!1)}},[p,m]=_.useState(null),[x,v]=_.useState({}),E=I=>{m(I.id),v({...I,groomFatherName:I.groomFatherName||"",groomMotherName:I.groomMotherName||"",brideFatherName:I.brideFatherName||"",brideMotherName:I.brideMotherName||""})},y=(I,P)=>{v(k=>({...k,[I]:P}))},[w,T]=_.useState("pending"),[C,D]=_.useState(""),S=[...t].sort((I,P)=>{const k=I.createdAt?new Date(I.createdAt).getTime():0;return(P.createdAt?new Date(P.createdAt).getTime():0)-k}).filter(I=>w==="pending"?I.status==="pending":w==="processed"?I.status==="processing"||I.status==="completed":!0).filter(I=>{var V,N,G,K,q,J;if(!C)return!0;const P=n.find(M=>M.id===I.templateId),k=C.toLowerCase();return((V=I.groomName)==null?void 0:V.toLowerCase().includes(k))||((N=I.brideName)==null?void 0:N.toLowerCase().includes(k))||((G=I.groomNickname)==null?void 0:G.toLowerCase().includes(k))||((K=I.brideNickname)==null?void 0:K.toLowerCase().includes(k))||((q=P==null?void 0:P.name)==null?void 0:q.toLowerCase().includes(k))||((J=I.status)==null?void 0:J.toLowerCase().includes(k))});return s?f.jsx("div",{className:"py-12 text-center text-lg text-gray-500",children:"Memuat data pesanan..."}):f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center mb-6",children:f.jsx("h1",{className:"text-2xl font-bold mr-2",children:"Kelola Pesanan"})}),f.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:items-center gap-2 md:gap-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{variant:w==="pending"?"default":"outline",onClick:()=>T("pending"),children:"Pesanan Terbaru"}),f.jsx(ue,{variant:w==="processed"?"default":"outline",onClick:()=>T("processed"),children:"Pesanan Diproses"}),f.jsx(ue,{variant:w==="all"?"default":"outline",onClick:()=>T("all"),children:"Semua Pesanan"})]}),f.jsx("div",{className:"flex-1",children:f.jsx(ke,{type:"text",placeholder:"Cari nama, template, status...",value:C,onChange:I=>D(I.target.value),className:"w-full md:w-64"})})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"min-w-full text-sm border rounded-lg bg-white dark:bg-gray-900 dark:border-gray-700",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800 text-left",children:[f.jsx("th",{className:"py-2 px-3 font-semibold",children:"Pasangan"}),f.jsx("th",{className:"py-2 px-3 font-semibold",children:"Template"}),f.jsx("th",{className:"py-2 px-3 font-semibold",children:"Tanggal"}),f.jsx("th",{className:"py-2 px-3 font-semibold",children:"Harga"}),f.jsx("th",{className:"py-2 px-3 font-semibold",children:"Status"}),f.jsx("th",{className:"py-2 px-3 font-semibold text-center",children:"Aksi"})]})}),f.jsxs("tbody",{children:[S.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-400 dark:text-gray-500",children:"Belum ada pesanan"})}),S.map(I=>{const P=n.find(k=>k.id===I.templateId);return f.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[f.jsxs("td",{className:"py-2 px-3 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100",children:[I.groomName," & ",I.brideName]}),f.jsx("td",{className:"py-2 px-3 whitespace-nowrap text-gray-700 dark:text-gray-200",children:(P==null?void 0:P.name)||"-"}),f.jsx("td",{className:"py-2 px-3 whitespace-nowrap text-gray-700 dark:text-gray-200",children:new Date(I.createdAt).toLocaleDateString()}),f.jsx("td",{className:"py-2 px-3 whitespace-nowrap text-gray-700 dark:text-gray-200",children:P!=null&&P.price?`Rp${(P.discount&&P.discount>0&&P.discount<100?Math.round(P.price*(1-P.discount/100)):P.price).toLocaleString("id-ID")}`:"-"}),f.jsx("td",{className:"py-2 px-3",children:f.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold 
                      ${I.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":I.status==="processing"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300"}
                    `,children:I.status})}),f.jsxs("td",{className:"py-2 px-3 text-center",children:[I.invitationLink&&f.jsx("a",{href:I.invitationLink,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700 mr-1",children:"Lihat"}),I.status==="pending"&&f.jsx(ue,{onClick:()=>d(I.id),size:"sm",className:"bg-blue-500 text-white hover:bg-blue-600 mr-1",children:"Proses"}),f.jsxs(ld,{open:p===I.id,onOpenChange:k=>{k||m(null)},children:[f.jsx(GD,{asChild:!0,children:f.jsx(ue,{size:"sm",variant:"outline",className:"mr-1",onClick:()=>E(I),children:"Edit"})}),f.jsxs(Al,{className:"max-h-[90vh] overflow-y-auto w-full max-w-md",children:[f.jsx(Pl,{children:f.jsx(Cl,{children:"Edit Pesanan"})}),f.jsxs("form",{onSubmit:k=>{k.preventDefault(),h()},children:[f.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.jsx(Te,{children:"Nama Mempelai Pria"}),f.jsx(ke,{value:x.groomName||"",onChange:k=>y("groomName",k.target.value),required:!0}),f.jsx(Te,{children:"Nama Panggilan Pria"}),f.jsx(ke,{value:x.groomNickname||"",onChange:k=>y("groomNickname",k.target.value),required:!0}),f.jsx(Te,{children:"Nama Mempelai Wanita"}),f.jsx(ke,{value:x.brideName||"",onChange:k=>y("brideName",k.target.value),required:!0}),f.jsx(Te,{children:"Nama Panggilan Wanita"}),f.jsx(ke,{value:x.brideNickname||"",onChange:k=>y("brideNickname",k.target.value),required:!0}),f.jsx(Te,{children:"Nama Ayah Pria"}),f.jsx(ke,{value:x.groomFatherName||"",onChange:k=>y("groomFatherName",k.target.value)}),f.jsx(Te,{children:"Nama Ibu Pria"}),f.jsx(ke,{value:x.groomMotherName||"",onChange:k=>y("groomMotherName",k.target.value)}),f.jsx(Te,{children:"Nama Ayah Wanita"}),f.jsx(ke,{value:x.brideFatherName||"",onChange:k=>y("brideFatherName",k.target.value)}),f.jsx(Te,{children:"Nama Ibu Wanita"}),f.jsx(ke,{value:x.brideMotherName||"",onChange:k=>y("brideMotherName",k.target.value)}),f.jsx(Te,{children:"Tanggal Akad"}),f.jsx(ke,{type:"date",value:x.akadDate?x.akadDate.slice(0,10):"",onChange:k=>y("akadDate",k.target.value),required:!0}),f.jsx(Te,{children:"Jam Akad"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ke,{type:"time",value:x.akadTime||"",onChange:k=>y("akadTime",k.target.value)}),f.jsxs(Uh,{value:x.akadTimezone||"WIB",onValueChange:k=>y("akadTimezone",k),children:[f.jsx(Wc,{className:"w-24",children:f.jsx(zh,{})}),f.jsxs(Gc,{children:[f.jsx($n,{value:"WIB",children:"WIB"}),f.jsx($n,{value:"WITA",children:"WITA"}),f.jsx($n,{value:"WIT",children:"WIT"})]})]})]}),f.jsx(Te,{children:"Tempat Akad"}),f.jsx(ke,{value:x.akadVenue||"",onChange:k=>y("akadVenue",k.target.value),required:!0}),f.jsx(Te,{children:"Google Maps Akad"}),f.jsx(ke,{type:"url",value:x.akadMapLink||"",onChange:k=>y("akadMapLink",k.target.value),placeholder:"Link Google Maps lokasi akad"}),f.jsx(Te,{children:"Tanggal Resepsi"}),f.jsx(ke,{type:"date",value:x.receptionDate?x.receptionDate.slice(0,10):"",onChange:k=>y("receptionDate",k.target.value),required:!0}),f.jsx(Te,{children:"Jam Resepsi"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ke,{type:"time",value:x.receptionTime||"",onChange:k=>y("receptionTime",k.target.value)}),f.jsxs(Uh,{value:x.receptionTimezone||"WIB",onValueChange:k=>y("receptionTimezone",k),children:[f.jsx(Wc,{className:"w-24",children:f.jsx(zh,{})}),f.jsxs(Gc,{children:[f.jsx($n,{value:"WIB",children:"WIB"}),f.jsx($n,{value:"WITA",children:"WITA"}),f.jsx($n,{value:"WIT",children:"WIT"})]})]})]}),f.jsx(Te,{children:"Tempat Resepsi"}),f.jsx(ke,{value:x.receptionVenue||"",onChange:k=>y("receptionVenue",k.target.value),required:!0}),f.jsx(Te,{children:"Google Maps Resepsi"}),f.jsx(ke,{type:"url",value:x.receptionMapLink||"",onChange:k=>y("receptionMapLink",k.target.value),placeholder:"Link Google Maps lokasi resepsi"}),f.jsx(Te,{children:"Status"}),f.jsxs(Uh,{value:x.status||"pending",onValueChange:k=>y("status",k),children:[f.jsx(Wc,{children:f.jsx(zh,{})}),f.jsxs(Gc,{children:[f.jsx($n,{value:"pending",children:"pending"}),f.jsx($n,{value:"processing",children:"processing"}),f.jsx($n,{value:"completed",children:"completed"})]})]})]}),f.jsxs(HD,{className:"mt-4",children:[f.jsx(ue,{type:"submit",children:"Simpan"}),f.jsx(ue,{type:"button",variant:"ghost",onClick:()=>m(null),children:"Batal"})]})]})]})]}),f.jsx(ue,{onClick:()=>c(I.id),size:"sm",variant:"destructive",style:{display:i&&i.type==="cs"?"none":void 0},children:"Hapus"})]})]},I.id)})]})]})})]})},kK=({paymentInfo:t,setPaymentInfo:e})=>{const{toast:n}=ur(),[r,i]=_.useState(!1),[s,o]=_.useState("bank"),[a,l]=_.useState({name:"",account:"",holder:""}),[c,d]=_.useState(null),h=async y=>{y.preventDefault();const w=s==="bank"?"banks":"ewallets";let T=Array.isArray(t[w])?t[w]:[],C="ditambahkan",D;if(c)T=T.map(j=>j.id===c?{...j,...a}:j),C="diedit",D={...t,[w]:T};else{const j={id:Date.now().toString(),...a};D={...t,[w]:[...T,j]}}e(D);try{await Fv(D)}catch(j){n({title:"Gagal menyimpan ke Firestore",description:j.message||"Terjadi error."});return}n({title:`Informasi Pembayaran ${C.charAt(0).toUpperCase()+C.slice(1)}`,description:`${s==="bank"?"Bank":"E-wallet"} berhasil ${C}.`}),i(!1),l({name:"",account:"",holder:""}),d(null)},p=async(y,w)=>{const T={...t,[y]:t[y].filter(C=>C.id!==w)};e(T);try{await Fv(T)}catch(C){n({title:"Gagal menghapus di Firestore",description:C.message||"Terjadi error."});return}n({title:"Informasi Pembayaran Dihapus",description:"Informasi pembayaran berhasil dihapus."})},m=y=>{o(y),l({name:"",account:"",holder:""}),d(null),i(!0)},x=(y,w)=>{o(y),l({name:w.name,account:w.account,holder:w.holder}),d(w.id),i(!0)},v=Array.isArray(t==null?void 0:t.banks)?t.banks:[],E=Array.isArray(t==null?void 0:t.ewallets)?t.ewallets:[];return f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Kelola Informasi Pembayaran"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs(xn,{children:[f.jsx(go,{children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(yo,{children:"Rekening Bank"}),f.jsxs(ue,{onClick:()=>m("bank"),size:"sm",children:[f.jsx(gf,{className:"h-4 w-4 mr-2"}),"Tambah"]})]})}),f.jsx(_n,{children:f.jsx("div",{className:"space-y-4",children:v.map(y=>f.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:y.name}),f.jsx("p",{className:"text-gray-600",children:y.account}),f.jsx("p",{className:"text-sm text-gray-500",children:y.holder})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>x("bank",y),className:"text-blue-600 hover:bg-blue-50",children:"Edit"}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>p("banks",y.id),className:"text-red-600 hover:bg-red-50",children:f.jsx(hu,{className:"h-4 w-4"})})]})]},y.id))})})]}),f.jsxs(xn,{children:[f.jsx(go,{children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(yo,{children:"E-wallet"}),f.jsxs(ue,{onClick:()=>m("ewallet"),size:"sm",children:[f.jsx(gf,{className:"h-4 w-4 mr-2"}),"Tambah"]})]})}),f.jsx(_n,{children:f.jsx("div",{className:"space-y-4",children:E.map(y=>f.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:y.name}),f.jsx("p",{className:"text-gray-600",children:y.account}),f.jsx("p",{className:"text-sm text-gray-500",children:y.holder})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>x("ewallet",y),className:"text-blue-600 hover:bg-blue-50",children:"Edit"}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>p("ewallets",y.id),className:"text-red-600 hover:bg-red-50",children:f.jsx(hu,{className:"h-4 w-4"})})]})]},y.id))})})]})]}),f.jsx(ld,{open:r,onOpenChange:y=>{i(y),y||(d(null),l({name:"",account:"",holder:""}))},children:f.jsxs(Al,{className:"max-w-md",children:[f.jsx(Pl,{children:f.jsxs(Cl,{children:[c?"Edit":"Tambah"," ",s==="bank"?"Rekening Bank":"E-wallet"]})}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsxs(Te,{htmlFor:"name",children:["Nama ",s==="bank"?"Bank":"E-wallet"]}),f.jsx(ke,{id:"name",value:a.name,onChange:y=>l({...a,name:y.target.value}),placeholder:s==="bank"?"Bank BCA":"Dana",required:!0})]}),f.jsxs("div",{children:[f.jsxs(Te,{htmlFor:"account",children:["Nomor ",s==="bank"?"Rekening":"E-wallet"]}),f.jsx(ke,{id:"account",value:a.account,onChange:y=>l({...a,account:y.target.value}),placeholder:s==="bank"?"1234567890":"081234567890",required:!0})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"holder",children:"Nama Pemilik"}),f.jsx(ke,{id:"holder",value:a.holder,onChange:y=>l({...a,holder:y.target.value}),placeholder:"Nama Pemilik Rekening",required:!0})]}),f.jsx(ue,{type:"submit",className:"w-full",children:c?"Simpan Perubahan":"Simpan"})]})]})})]})},NK=()=>{const{toast:t}=ur(),[e,n]=_.useState(!1),[r,i]=_.useState({username:"",password:"",type:"admin",whatsapp:""}),[s,o]=_.useState(null),[a,l]=_.useState([]),[c,d]=_.useState(!0);_.useEffect(()=>{(async()=>{d(!0);try{const v=await Pa();l(v)}catch(v){t({title:"Gagal memuat user",description:v.message,variant:"destructive"})}finally{d(!1)}})()},[]);const h=x=>{x?(i({username:x.username,password:x.password,type:x.type,whatsapp:x.whatsapp||""}),o(x.id)):(i({username:"",password:"",type:"admin",whatsapp:""}),o(null)),n(!0)},p=async x=>{if(x.preventDefault(),r.type==="cs"&&(!r.whatsapp||r.whatsapp.trim()==="")){t({title:"Nomor WhatsApp wajib diisi untuk Customer Service",variant:"destructive"});return}try{s?(await AN(s,r),t({title:"User berhasil diedit",description:`Username: ${r.username}, Tipe: ${r.type}`})):(await IN(r),t({title:"User berhasil ditambahkan",description:`Username: ${r.username}, Tipe: ${r.type}`}));const v=await Pa();l(v),i({username:"",password:"",type:"admin",whatsapp:""}),o(null),n(!1)}catch(v){t({title:"Gagal menyimpan user",description:v.message,variant:"destructive"})}},m=async x=>{try{await PN(x);const v=await Pa();l(v),t({title:"User berhasil dihapus"})}catch(v){t({title:"Gagal menghapus user",description:v.message,variant:"destructive"})}};return f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Manajemen User"}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:f.jsxs(xn,{children:[f.jsx(go,{children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(yo,{children:"Daftar User"}),f.jsxs(ue,{onClick:()=>h(null),size:"sm",children:[f.jsx(gf,{className:"h-4 w-4 mr-2"}),"Tambah"]})]})}),f.jsx(_n,{children:f.jsx("div",{className:"space-y-4",children:c?f.jsx("p",{className:"text-gray-400 text-sm",children:"Memuat data user..."}):a.length===0?f.jsx("p",{className:"text-gray-400 text-sm",children:"Belum ada user."}):a.map(x=>f.jsxs("div",{className:"flex justify-between items-center p-4 border rounded-lg",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold",children:x.username}),f.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:[x.type==="admin"?"Admin":x.type==="cs"?"Customer Service":"Designer",x.type==="cs"&&x.whatsapp?f.jsxs("span",{className:"block text-xs text-green-600",children:["WA: ",x.whatsapp]}):null]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>h(x),className:"text-blue-600 hover:bg-blue-50",children:f.jsx(n6,{className:"h-4 w-4"})}),f.jsx(ue,{size:"sm",variant:"outline",onClick:()=>m(x.id),className:"text-red-600 hover:bg-red-50",children:f.jsx(hu,{className:"h-4 w-4"})})]})]},x.id))})})]})}),f.jsx(ld,{open:e,onOpenChange:x=>{n(x),x||(o(null),i({username:"",password:"",type:"admin",whatsapp:""}))},children:f.jsxs(Al,{className:"max-w-md",children:[f.jsx(Pl,{children:f.jsx(Cl,{children:s?"Edit User":"Tambah User"})}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"username",children:"Username"}),f.jsx(ke,{id:"username",value:r.username,onChange:x=>i({...r,username:x.target.value}),placeholder:"Username",required:!0,autoFocus:!0})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"password",children:"Password"}),f.jsx(ke,{id:"password",type:"password",value:r.password,onChange:x=>i({...r,password:x.target.value}),placeholder:"Password",required:!0})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"type",children:"Tipe User"}),f.jsxs("select",{id:"type",className:"w-full px-3 py-2 rounded border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-500",value:r.type,onChange:x=>i({...r,type:x.target.value}),required:!0,children:[f.jsx("option",{value:"admin",children:"Admin (kendali penuh)"}),f.jsx("option",{value:"cs",children:"Customer Service (akses pesanan, tidak bisa hapus)"}),f.jsx("option",{value:"designer",children:"Designer (akses template miliknya saja)"})]})]}),r.type==="cs"&&f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"whatsapp",children:"Nomor WhatsApp (Customer Service)"}),f.jsx(ke,{id:"whatsapp",type:"tel",value:r.whatsapp,onChange:x=>i({...r,whatsapp:x.target.value}),placeholder:"08xxxxxxxxxx",required:r.type==="cs"})]}),f.jsx(ue,{type:"submit",className:"w-full",children:s?"Simpan Perubahan":"Simpan"})]})]})})]})},DK={siteName:"",logoLight:"",logoDark:""},VK=()=>{const{toast:t}=ur(),[e,n]=_.useState(DK),[r,i]=_.useState(""),[s,o]=_.useState(""),a=_.useRef(),l=_.useRef();_.useEffect(()=>{async function h(){const p=await Mx();p&&(n(p),i(p.logoLight||""),o(p.logoDark||""))}h()},[]);const c=(h,p)=>{const m=h.target.files[0];if(!m)return;if(!m.type.startsWith("image/")){t({title:"File harus berupa gambar."});return}if(m.size>2*1024*1024){t({title:"Ukuran logo maksimal 2MB."});return}const x=new FileReader;x.onload=v=>{n(E=>({...E,[p]:v.target.result})),p==="logoLight"&&i(v.target.result),p==="logoDark"&&o(v.target.result)},x.readAsDataURL(m)},d=async h=>{h.preventDefault();try{await Ng(e),t({title:"Pengaturan logo berhasil disimpan!"})}catch(p){t({title:"Gagal menyimpan ke server",description:p.message,variant:"destructive"})}};return f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-bold mb-8 text-center flex items-center justify-center gap-2",children:[f.jsx(vC,{className:"h-8 w-8 text-primary"})," Pengaturan Logo Website"]}),f.jsx(xn,{className:"max-w-2xl mx-auto shadow-lg border border-gray-200 dark:border-gray-700",children:f.jsx(_n,{className:"p-8",children:f.jsxs("form",{onSubmit:d,className:"space-y-8",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{className:"font-semibold text-base",children:"Logo (Light Mode)"}),f.jsx(ke,{type:"file",accept:"image/*",ref:a,onChange:h=>c(h,"logoLight"),className:"mt-2"}),r&&f.jsxs("div",{className:"flex flex-col items-center mt-2",children:[f.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Preview"}),f.jsx("div",{className:"bg-white border rounded shadow p-2 flex items-center justify-center min-h-[60px]",children:f.jsx("img",{src:r,alt:"Logo Light",className:"h-16 object-contain"})}),f.jsx(ue,{type:"button",variant:"destructive",size:"sm",className:"mt-2",onClick:async()=>{n(h=>({...h,logoLight:""})),i(""),a.current&&(a.current.value="");try{await Ng({...e,logoLight:""}),t({title:"Logo Light berhasil dihapus!"})}catch(h){t({title:"Gagal menghapus logo",description:h.message,variant:"destructive"})}},children:"Hapus Logo Light"})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{className:"font-semibold text-base",children:"Logo (Dark Mode)"}),f.jsx(ke,{type:"file",accept:"image/*",ref:l,onChange:h=>c(h,"logoDark"),className:"mt-2"}),s&&f.jsxs("div",{className:"flex flex-col items-center mt-2",children:[f.jsx("span",{className:"text-xs text-gray-500 mb-1",children:"Preview"}),f.jsx("div",{className:"bg-gray-900 border rounded shadow p-2 flex items-center justify-center min-h-[60px]",children:f.jsx("img",{src:s,alt:"Logo Dark",className:"h-16 object-contain"})}),f.jsx(ue,{type:"button",variant:"destructive",size:"sm",className:"mt-2",onClick:async()=>{n(h=>({...h,logoDark:""})),o(""),l.current&&(l.current.value="");try{await Ng({...e,logoDark:""}),t({title:"Logo Dark berhasil dihapus!"})}catch(h){t({title:"Gagal menghapus logo",description:h.message,variant:"destructive"})}},children:"Hapus Logo Dark"})]})]})]}),f.jsx("div",{className:"text-center pt-4",children:f.jsx(ue,{type:"submit",className:"px-8 py-2 text-base font-semibold",children:"Simpan Logo"})})]})})})]})},jK=()=>{const t=Io(),{toast:e}=ur(),n=dw(),r=()=>new URLSearchParams(n.search).get("tab")||"dashboard",[i,s]=_.useState(r()),[o,a]=_.useState(()=>{try{return JSON.parse(localStorage.getItem("adminUser"))||null}catch{return null}}),[l,c]=_.useState([]),[d,h]=_.useState([]),[p,m]=_.useState([]);_.useEffect(()=>{const T=NN(C=>{m(C),localStorage.setItem("orders",JSON.stringify(C))});return()=>T()},[]);const[x,v]=_.useState({banks:[],ewallets:[]});_.useEffect(()=>{localStorage.getItem("adminLoggedIn")||t("/admin/login");try{a(JSON.parse(localStorage.getItem("adminUser"))||null)}catch{a(null)}},[t]),_.useEffect(()=>{(async()=>{try{const j=await Mx();j&&localStorage.setItem("siteSettings",JSON.stringify(j))}catch{}try{const j=await Dx();c(j)}catch{c([])}const C=localStorage.getItem("music");C?h(JSON.parse(C)):(h([]),localStorage.setItem("music",JSON.stringify([])));const D=localStorage.getItem("orders");D&&m(JSON.parse(D));try{const j=await kx();v(j)}catch{v({banks:[],ewallets:[]})}})()},[]);const E=()=>{localStorage.removeItem("adminLoggedIn"),localStorage.removeItem("adminUser"),e({title:"Logout Berhasil",description:"Anda telah keluar dari dashboard admin."}),t("/admin/login")};let y=[{id:"dashboard",label:"Dashboard",icon:QF},{id:"templates",label:"Template",icon:av},{id:"music",label:"Musik",icon:yC},{id:"orders",label:"Pesanan",icon:vg},{id:"payment",label:"Pembayaran",icon:vg},{id:"users",label:"User",icon:l6},{id:"settings",label:"Pengaturan",icon:vC}];o&&o.type==="cs"&&(y=[{id:"orders",label:"Pesanan",icon:vg}],i!=="orders"&&setTimeout(()=>s("orders"),0)),o&&o.type==="designer"&&(y=[{id:"templates",label:"Template",icon:av}],i!=="templates"&&setTimeout(()=>s("templates"),0));const w=()=>{if(o&&o.type==="cs")return f.jsx(sI,{orders:p,setOrders:m,templates:l});if(o&&o.type==="designer")return f.jsx(KS,{templates:l,setTemplates:c});switch(i){case"dashboard":return f.jsx(HS,{templates:l,orders:p});case"templates":return f.jsx(KS,{templates:l,setTemplates:c});case"music":return f.jsx(PK,{music:d,setMusic:h});case"orders":return f.jsx(sI,{orders:p,setOrders:m,templates:l});case"payment":return f.jsx(kK,{paymentInfo:x,setPaymentInfo:v});case"users":return f.jsx(NK,{});case"settings":return f.jsx(VK,{});default:return f.jsx(HS,{templates:l,orders:p})}};return f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsx("title",{children:"Dashboard Admin - UndanganKami"}),f.jsx("meta",{name:"description",content:"Dashboard admin untuk mengelola platform UndanganKami"})]}),f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex relative",children:[f.jsxs("div",{className:"w-64 admin-sidebar text-white flex flex-col",children:[f.jsxs("div",{className:"p-6",children:[f.jsx("div",{className:"flex items-center space-x-3 mb-8",children:f.jsx(Qf,{size:40,className:"h-10 w-auto"})}),f.jsx("nav",{className:"space-y-2",children:y.map(T=>{const C=T.icon;let D=null;if(T.id==="orders"){const j=p.filter(A=>A.status==="pending").length;j>0&&(D=f.jsx("span",{className:"ml-2 inline-flex items-center justify-center rounded-full bg-red-600 text-white text-xs font-semibold w-6 h-6 animate-bounce shadow",title:`Ada ${j} pesanan baru`,children:j}))}return f.jsxs("button",{onClick:()=>s(T.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${i===T.id?"bg-purple-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[f.jsx(C,{className:"h-5 w-5"}),f.jsxs("span",{className:"flex items-center",children:[T.label,D]})]},T.id)})})]}),f.jsx("div",{className:"mt-auto p-6",children:f.jsxs(ue,{onClick:E,variant:"ghost",className:"w-full text-gray-300 hover:bg-gray-700 hover:text-white",children:[f.jsx(XF,{className:"h-5 w-5 mr-3"}),"Logout"]})})]}),f.jsx("main",{className:"flex-1 p-8 overflow-y-auto",children:f.jsx(Yt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:w()},i)}),f.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:f.jsx(ad,{})})]})]})},MK=()=>{const t=Io(),{toast:e}=ur(),[n,r]=_.useState({username:"",password:""}),i=async o=>{o.preventDefault();try{const l=(await Pa()).find(c=>c.username===n.username&&c.password===n.password);l?(localStorage.setItem("adminLoggedIn","true"),localStorage.setItem("adminUser",JSON.stringify(l)),e({title:"Login Berhasil!",description:"Selamat datang di dashboard admin."}),t("/admin")):e({title:"Login Gagal",description:"Username atau password salah.",variant:"destructive"})}catch(a){e({title:"Login Error",description:a.message,variant:"destructive"})}},s=o=>{r({...n,[o.target.name]:o.target.value})};return f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsx("title",{children:"Admin Login - UndanganKami"}),f.jsx("meta",{name:"description",content:"Login ke dashboard admin UndanganKami"})]}),f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:f.jsx(Yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:f.jsxs(xn,{className:"glass-effect border-white/20",children:[f.jsxs(go,{className:"text-center",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"p-3 bg-purple-600 rounded-full",children:f.jsx(gC,{className:"h-8 w-8 text-white"})})}),f.jsx(yo,{className:"text-2xl font-bold text-white font-playfair",children:"Admin Login"}),f.jsx("p",{className:"text-purple-200",children:"Masuk ke dashboard admin"})]}),f.jsxs(_n,{children:[f.jsxs("form",{onSubmit:i,className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{htmlFor:"username",className:"text-white",children:"Username"}),f.jsxs("div",{className:"relative",children:[f.jsx(a6,{className:"absolute left-3 top-3 h-4 w-4 text-purple-300"}),f.jsx(ke,{id:"username",name:"username",type:"text",placeholder:"Masukkan username",value:n.username,onChange:s,className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-purple-200",required:!0})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(Te,{htmlFor:"password",className:"text-white",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx(YF,{className:"absolute left-3 top-3 h-4 w-4 text-purple-300"}),f.jsx(ke,{id:"password",name:"password",type:"password",placeholder:"Masukkan password",value:n.password,onChange:s,className:"pl-10 bg-white/10 border-white/20 text-white placeholder:text-purple-200",required:!0})]})]}),f.jsx(ue,{type:"submit",className:"w-full gradient-bg text-white hover:shadow-lg transition-all",children:"Masuk"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx(ue,{variant:"ghost",onClick:()=>t("/"),className:"text-purple-200 hover:text-white hover:bg-white/10",children:"Kembali ke Homepage"})})]})]})})})]})},OK=()=>{const{id:t}=Tp(),[e,n]=_.useState(""),[r,i]=_.useState(!0);return _.useEffect(()=>{async function s(){i(!0);const a=(await Ff()).find(l=>{if(!l.invitationLink)return!1;const c=l.invitationLink.match(/\/invitation\/([^/?#]+)/);return c&&c[1]===t});a&&a.invitationHtml?n(a.invitationHtml):n(""),i(!1)}s()},[t]),_.useEffect(()=>{e&&setTimeout(()=>{const s=document.getElementById("invitation-container");if(!s)return;s.querySelectorAll("script").forEach(a=>{const l=document.createElement("script");for(const c of a.attributes)l.setAttribute(c.name,c.value);l.textContent=a.textContent,a.parentNode.replaceChild(l,a)})},0)},[e]),r?f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-center py-12",children:[f.jsx(Yt.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.2,ease:"linear"},className:"mb-4",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"#a78bfa",strokeWidth:"6",opacity:"0.2"}),f.jsx("path",{d:"M52 28c0-13.255-10.745-24-24-24",stroke:"#8b5cf6",strokeWidth:"6",strokeLinecap:"round"})]})}),f.jsx(Yt.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-purple-500 text-lg font-semibold",children:"Memuat undangan..."}),f.jsx(Yt.p,{initial:{opacity:0},animate:{opacity:.7},transition:{delay:1.2,duration:1.2,repeat:1/0,repeatType:"reverse"},className:"text-gray-400 mt-2",children:"Mohon tunggu sebentar, kami sedang mengambil undangan terbaik untuk Anda."})]}):e?f.jsx("div",{id:"invitation-container",dangerouslySetInnerHTML:{__html:e}}):f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Undangan tidak ditemukan."})},LK=()=>{const{templateId:t}=Tp(),e=Io(),[n,r]=_.useState(null),[i,s]=_.useState(!0);_.useState(!1),_.useEffect(()=>{t&&(s(!0),sm(t).then(c=>{r(c),s(!1)}).catch(()=>{r(null),s(!1)}))},[t]);const o={groomName:"Ahmad Yusuf",groomNickname:"Yusuf",brideName:"Siti Aisyah",brideNickname:"Aisyah",groomFather:"Bapak Abdullah",groomMother:"Ibu Khadijah",brideFather:"Bapak Muhammad",brideMother:"Ibu Fatimah",akadDate:"2024-12-15",akadTime:"08:00",akadVenue:"Masjid Al-Ikhlas, Jl. Merdeka No. 123, Jakarta Pusat",receptionDate:"2024-12-15",receptionTime:"11:00",receptionVenue:"Gedung Serbaguna Al-Hikmah, Jl. Sudirman No. 456, Jakarta Pusat",weddingDate:new Date("2024-12-15")},[a,l]=_.useState({days:0,hours:0,minutes:0,seconds:0});if(_.useEffect(()=>{const c=setInterval(()=>{const d=new Date().getTime(),p=o.weddingDate.getTime()-d;p>0&&l({days:Math.floor(p/864e5),hours:Math.floor(p%864e5/36e5),minutes:Math.floor(p%36e5/6e4),seconds:Math.floor(p%6e4/1e3)})},1e3);return()=>clearInterval(c)},[]),i)return f.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:f.jsxs("div",{className:"flex flex-col items-center justify-center w-full max-w-md bg-white/80 dark:bg-gray-900/80 rounded-xl shadow-lg p-6 md:p-10",children:[f.jsx(Yt.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1.2,ease:"linear"},className:"mb-4",children:f.jsxs("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{cx:"28",cy:"28",r:"24",stroke:"#a78bfa",strokeWidth:"6",opacity:"0.2"}),f.jsx("path",{d:"M52 28c0-13.255-10.745-24-24-24",stroke:"#8b5cf6",strokeWidth:"6",strokeLinecap:"round"})]})}),f.jsx(Yt.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-purple-500 text-lg font-semibold text-center",children:"Memuat preview template..."}),f.jsx(Yt.p,{initial:{opacity:0},animate:{opacity:.7},transition:{delay:1.2,duration:1.2,repeat:1/0,repeatType:"reverse"},className:"text-gray-400 mt-2 text-center text-base md:text-lg",children:"Mohon tunggu sebentar, kami sedang menyiapkan tampilan undangan terbaik untuk Anda."})]})});if(!n)return f.jsx("div",{className:"min-h-screen flex items-center justify-center",children:f.jsx("p",{className:"text-gray-500 text-lg",children:"Template tidak ditemukan"})});if(n.html||n.css||n.js){const c=`<!DOCTYPE html><html><head><style>${n.css||""}</style></head><body>${n.html||""}<script>${n.js||""}<\/script></body></html>`;return f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsxs("title",{children:["Preview ",n.name," - UndanganKami"]}),f.jsx("meta",{name:"description",content:`Preview template undangan digital ${n.name}`})]}),f.jsx("div",{style:{position:"fixed",top:24,left:24,zIndex:100},children:f.jsx(ue,{variant:"ghost",onClick:()=>e(-1),className:"p-2",children:f.jsx(zF,{className:"h-6 w-6"})})}),f.jsx("div",{style:{position:"fixed",top:24,right:24,zIndex:100},children:f.jsxs(ue,{onClick:()=>e(`/order/${t}`),className:"gradient-bg text-white flex items-center gap-2 p-2",children:[f.jsx(KF,{className:"h-6 w-6"}),f.jsx("span",{className:"font-medium",children:"Pesan template ini"})]})}),f.jsx("iframe",{title:`Preview ${n.name}`,srcDoc:c,sandbox:"allow-scripts allow-same-origin",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",border:"none",zIndex:50,background:"#fff"}})]})}return f.jsxs(f.Fragment,{children:[f.jsxs(ti,{children:[f.jsxs("title",{children:["Preview ",n.name," - UndanganKami"]}),f.jsx("meta",{name:"description",content:`Preview template undangan digital ${n.name}`})]}),f.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 relative",children:[f.jsx("p",{className:"text-gray-700 dark:text-gray-200",children:"Template tidak memiliki desain khusus."}),f.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:f.jsx(ad,{})})]})]})};function FK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oI(Object(n),!0).forEach(function(r){FK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $K(t,e){if(t==null)return{};var n=BK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UK(t,e){return zK(t)||WK(t,e)||GK(t,e)||qK()}function zK(t){if(Array.isArray(t))return t}function WK(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function GK(t,e){if(t){if(typeof t=="string")return lI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lI(t,e)}}function lI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cI(Object(n),!0).forEach(function(r){HK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KK(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,s){return s(i)},r)}}function _c(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(i,a))}}}function np(t){return{}.toString.call(t).includes("Object")}function QK(t){return!Object.keys(t).length}function ju(t){return typeof t=="function"}function YK(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function XK(t,e){return np(e)||Yi("changeType"),Object.keys(e).some(function(n){return!YK(t,n)})&&Yi("changeField"),e}function JK(t){ju(t)||Yi("selectorType")}function ZK(t){ju(t)||np(t)||Yi("handlerType"),np(t)&&Object.values(t).some(function(e){return!ju(e)})&&Yi("handlersType")}function eQ(t){t||Yi("initialIsRequired"),np(t)||Yi("initialType"),QK(t)&&Yi("initialContent")}function tQ(t,e){throw new Error(t[e]||t.default)}var nQ={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Yi=_c(tQ)(nQ),dh={changes:XK,selector:JK,handler:ZK,initial:eQ};function rQ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dh.initial(t),dh.handler(e);var n={current:t},r=_c(oQ)(n,e),i=_c(sQ)(n),s=_c(dh.changes)(t),o=_c(iQ)(n);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return dh.selector(c),c(n.current)}function l(c){KK(r,i,s,o)(c)}return[a,l]}function iQ(t,e){return ju(e)?e(t.current):e}function sQ(t,e){return t.current=uI(uI({},t.current),e),e}function oQ(t,e,n){return ju(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var aQ={create:rQ},lQ={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function cQ(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(i,a))}}}function uQ(t){return{}.toString.call(t).includes("Object")}function dQ(t){return t||dI("configIsRequired"),uQ(t)||dI("configType"),t.urls?(hQ(),{paths:{vs:t.urls.monacoBase}}):t}function hQ(){console.warn(_j.deprecation)}function fQ(t,e){throw new Error(t[e]||t.default)}var _j={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},dI=cQ(fQ)(_j),pQ={config:dQ},mQ=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}};function Tj(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],Tj(t[n],e[n]))}),aI(aI({},t),e)}var gQ={type:"cancelation",msg:"operation is manually canceled"};function ny(t){var e=!1,n=new Promise(function(r,i){t.then(function(s){return e?i(gQ):r(s)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var yQ=aQ.create({config:lQ,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ej=UK(yQ,2),dd=Ej[0],Tm=Ej[1];function vQ(t){var e=pQ.config(t),n=e.monaco,r=$K(e,["monaco"]);Tm(function(i){return{config:Tj(i.config,r),monaco:n}})}function wQ(){var t=dd(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(Tm({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ny(ry);if(window.monaco&&window.monaco.editor)return bj(window.monaco),t.resolve(window.monaco),ny(ry);mQ(xQ,TQ)(EQ)}return ny(ry)}function xQ(t){return document.body.appendChild(t)}function _Q(t){var e=document.createElement("script");return t&&(e.src=t),e}function TQ(t){var e=dd(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=_Q("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function EQ(){var t=dd(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){bj(n),t.resolve(n)},function(n){t.reject(n)})}function bj(t){dd().monaco||Tm({monaco:t})}function bQ(){return dd(function(t){var e=t.monaco;return e})}var ry=new Promise(function(t,e){return Tm({resolve:t,reject:e})}),Sj={config:vQ,init:wQ,__getMonacoInstance:bQ},SQ={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},iy=SQ,IQ={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},AQ=IQ;function PQ({children:t}){return ce.createElement("div",{style:AQ.container},t)}var CQ=PQ,RQ=CQ;function kQ({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:o}){return ce.createElement("section",{style:{...iy.wrapper,width:t,height:e},...o},!n&&ce.createElement(RQ,null,r),ce.createElement("div",{ref:i,style:{...iy.fullWidth,...!n&&iy.hide},className:s}))}var NQ=kQ,Ij=_.memo(NQ);function DQ(t){_.useEffect(t,[])}var Aj=DQ;function VQ(t,e,n=!0){let r=_.useRef(!0);_.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var In=VQ;function qc(){}function va(t,e,n,r){return jQ(t,r)||MQ(t,e,n,r)}function jQ(t,e){return t.editor.getModel(Pj(t,e))}function MQ(t,e,n,r){return t.editor.createModel(e,n,r?Pj(t,r):void 0)}function Pj(t,e){return t.Uri.parse(e)}function OQ({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:d="Loading...",options:h={},height:p="100%",width:m="100%",className:x,wrapperProps:v={},beforeMount:E=qc,onMount:y=qc}){let[w,T]=_.useState(!1),[C,D]=_.useState(!0),j=_.useRef(null),A=_.useRef(null),S=_.useRef(null),I=_.useRef(y),P=_.useRef(E),k=_.useRef(!1);Aj(()=>{let K=Sj.init();return K.then(q=>(A.current=q)&&D(!1)).catch(q=>(q==null?void 0:q.type)!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>j.current?G():K.cancel()}),In(()=>{if(j.current&&A.current){let K=j.current.getOriginalEditor(),q=va(A.current,t||"",r||n||"text",s||"");q!==K.getModel()&&K.setModel(q)}},[s],w),In(()=>{if(j.current&&A.current){let K=j.current.getModifiedEditor(),q=va(A.current,e||"",i||n||"text",o||"");q!==K.getModel()&&K.setModel(q)}},[o],w),In(()=>{let K=j.current.getModifiedEditor();K.getOption(A.current.editor.EditorOption.readOnly)?K.setValue(e||""):e!==K.getValue()&&(K.executeEdits("",[{range:K.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),K.pushUndoStop())},[e],w),In(()=>{var K,q;(q=(K=j.current)==null?void 0:K.getModel())==null||q.original.setValue(t||"")},[t],w),In(()=>{let{original:K,modified:q}=j.current.getModel();A.current.editor.setModelLanguage(K,r||n||"text"),A.current.editor.setModelLanguage(q,i||n||"text")},[n,r,i],w),In(()=>{var K;(K=A.current)==null||K.editor.setTheme(c)},[c],w),In(()=>{var K;(K=j.current)==null||K.updateOptions(h)},[h],w);let V=_.useCallback(()=>{var J;if(!A.current)return;P.current(A.current);let K=va(A.current,t||"",r||n||"text",s||""),q=va(A.current,e||"",i||n||"text",o||"");(J=j.current)==null||J.setModel({original:K,modified:q})},[n,e,i,t,r,s,o]),N=_.useCallback(()=>{var K;!k.current&&S.current&&(j.current=A.current.editor.createDiffEditor(S.current,{automaticLayout:!0,...h}),V(),(K=A.current)==null||K.editor.setTheme(c),T(!0),k.current=!0)},[h,c,V]);_.useEffect(()=>{w&&I.current(j.current,A.current)},[w]),_.useEffect(()=>{!C&&!w&&N()},[C,w,N]);function G(){var q,J,M,$;let K=(q=j.current)==null?void 0:q.getModel();a||((J=K==null?void 0:K.original)==null||J.dispose()),l||((M=K==null?void 0:K.modified)==null||M.dispose()),($=j.current)==null||$.dispose()}return ce.createElement(Ij,{width:m,height:p,isEditorReady:w,loading:d,_ref:S,className:x,wrapperProps:v})}var LQ=OQ;_.memo(LQ);function FQ(t){let e=_.useRef();return _.useEffect(()=>{e.current=t},[t]),e.current}var BQ=FQ,hh=new Map;function $Q({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:s,theme:o="light",line:a,loading:l="Loading...",options:c={},overrideServices:d={},saveViewState:h=!0,keepCurrentModel:p=!1,width:m="100%",height:x="100%",className:v,wrapperProps:E={},beforeMount:y=qc,onMount:w=qc,onChange:T,onValidate:C=qc}){let[D,j]=_.useState(!1),[A,S]=_.useState(!0),I=_.useRef(null),P=_.useRef(null),k=_.useRef(null),V=_.useRef(w),N=_.useRef(y),G=_.useRef(),K=_.useRef(r),q=BQ(s),J=_.useRef(!1),M=_.useRef(!1);Aj(()=>{let W=Sj.init();return W.then(B=>(I.current=B)&&S(!1)).catch(B=>(B==null?void 0:B.type)!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>P.current?z():W.cancel()}),In(()=>{var B,Y,se,Pe;let W=va(I.current,t||r||"",e||i||"",s||n||"");W!==((B=P.current)==null?void 0:B.getModel())&&(h&&hh.set(q,(Y=P.current)==null?void 0:Y.saveViewState()),(se=P.current)==null||se.setModel(W),h&&((Pe=P.current)==null||Pe.restoreViewState(hh.get(s))))},[s],D),In(()=>{var W;(W=P.current)==null||W.updateOptions(c)},[c],D),In(()=>{!P.current||r===void 0||(P.current.getOption(I.current.editor.EditorOption.readOnly)?P.current.setValue(r):r!==P.current.getValue()&&(M.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),P.current.pushUndoStop(),M.current=!1))},[r],D),In(()=>{var B,Y;let W=(B=P.current)==null?void 0:B.getModel();W&&i&&((Y=I.current)==null||Y.editor.setModelLanguage(W,i))},[i],D),In(()=>{var W;a!==void 0&&((W=P.current)==null||W.revealLine(a))},[a],D),In(()=>{var W;(W=I.current)==null||W.editor.setTheme(o)},[o],D);let $=_.useCallback(()=>{var W;if(!(!k.current||!I.current)&&!J.current){N.current(I.current);let B=s||n,Y=va(I.current,r||t||"",e||i||"",B||"");P.current=(W=I.current)==null?void 0:W.editor.create(k.current,{model:Y,automaticLayout:!0,...c},d),h&&P.current.restoreViewState(hh.get(B)),I.current.editor.setTheme(o),a!==void 0&&P.current.revealLine(a),j(!0),J.current=!0}},[t,e,n,r,i,s,c,d,h,o,a]);_.useEffect(()=>{D&&V.current(P.current,I.current)},[D]),_.useEffect(()=>{!A&&!D&&$()},[A,D,$]),K.current=r,_.useEffect(()=>{var W,B;D&&T&&((W=G.current)==null||W.dispose(),G.current=(B=P.current)==null?void 0:B.onDidChangeModelContent(Y=>{M.current||T(P.current.getValue(),Y)}))},[D,T]),_.useEffect(()=>{if(D){let W=I.current.editor.onDidChangeMarkers(B=>{var se;let Y=(se=P.current.getModel())==null?void 0:se.uri;if(Y&&B.find(Pe=>Pe.path===Y.path)){let Pe=I.current.editor.getModelMarkers({resource:Y});C==null||C(Pe)}});return()=>{W==null||W.dispose()}}return()=>{}},[D,C]);function z(){var W,B;(W=G.current)==null||W.dispose(),p?h&&hh.set(s,P.current.saveViewState()):(B=P.current.getModel())==null||B.dispose(),P.current.dispose()}return ce.createElement(Ij,{width:m,height:x,isEditorReady:D,loading:l,_ref:k,className:v,wrapperProps:E})}var UQ=$Q,zQ=_.memo(UQ),sy=zQ;const hI=()=>{const[t,e]=_.useState(null),n=Io(),{templateId:r}=Tp(),{toast:i}=ur(),[s,o]=_.useState(""),[a,l]=_.useState(""),[c,d]=_.useState("Classic"),[h,p]=_.useState(""),[m,x]=_.useState(""),[v,E]=_.useState(""),[y,w]=_.useState(""),[T,C]=_.useState(""),[D,j]=_.useState(""),[A,S]=_.useState(""),[I,P]=_.useState("html");_.useState(!1);const[k,V]=_.useState(!1),[N,G]=_.useState(!1),[K,q]=_.useState(!1),[J,M]=_.useState(null),[$,z]=_.useState(!1);_.useEffect(()=>{r?sm(r).then(B=>{B&&(o(B.name||""),l(B.description||""),d(B.category||"Classic"),p(B.price!==void 0?B.price:""),x(B.discount!==void 0?B.discount:""),E(B.html||""),w(B.css||""),C(B.js||""),j(B.thumbnail||""),G(!1),M({name:B.name||"",description:B.description||"",category:B.category||"Classic",price:B.price!==void 0?B.price:"",discount:B.discount!==void 0?B.discount:"",html:B.html||"",css:B.css||"",js:B.js||"",thumbnail:B.thumbnail||""}))}):(o(""),l(""),E(""),w(""),C(""),j(""),G(!0),M({name:"",description:"",category:"Classic",price:"",discount:"",html:"",css:"",js:"",thumbnail:""}))},[r]),_.useEffect(()=>{const B=setTimeout(()=>{S(`<!DOCTYPE html><html lang="id"><head><meta charset='UTF-8'/><meta name='viewport' content='width=device-width, initial-scale=1.0'/>
<link href='https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap' rel='stylesheet'>
<style>${y}</style></head><body>${v}<script>${T}
<\/script></body></html>`)},300);return()=>clearTimeout(B)},[v,y,T]);const W=async()=>{var Pe;z(!0);let B=D;if(t){if(D&&typeof D=="string"&&D.startsWith("http")){i({title:"Hapus gambar lama dulu sebelum upload gambar baru.",variant:"destructive"}),z(!1);return}try{const le=new FormData;le.append("file",t),le.append("upload_preset","unsigned_preset");const me=await(await fetch("https://api.cloudinary.com/v1_1/dkfue0nxr/image/upload",{method:"POST",body:le})).json();if(me.secure_url)B=me.secure_url;else{i({title:"Gagal upload thumbnail",description:((Pe=me.error)==null?void 0:Pe.message)||"",variant:"destructive"}),z(!1);return}}catch(le){i({title:"Gagal upload thumbnail",description:le.message,variant:"destructive"}),z(!1);return}}if(!s){i({title:"Nama Template Diperlukan",variant:"destructive"}),z(!1);return}if(!h||isNaN(Number(h))||Number(h)<0){i({title:"Harga tidak valid",description:"Masukkan harga template (angka, minimal 0)",variant:"destructive"}),z(!1);return}if(m&&(isNaN(Number(m))||Number(m)<0||Number(m)>100)){i({title:"Diskon tidak valid",description:"Diskon harus 0-100 (%)",variant:"destructive"}),z(!1);return}let Y=null;try{Y=JSON.parse(localStorage.getItem("adminUser"))||null}catch{Y=null}const se={name:s,description:a,price:h,discount:m,status:"draft",category:c,html:v,css:y,js:T,thumbnail:B,createdBy:Y?Y.username:"admin",updatedAt:new Date().toISOString()};r?jx(r,se).then(()=>{i({title:"Template Diperbarui!",description:"Perubahan template berhasil disimpan."}),j(se.thumbnail),M({name:se.name,description:se.description,category:se.category,price:se.price,discount:se.discount,html:se.html,css:se.css,js:se.js,thumbnail:se.thumbnail})}).catch(le=>{i({title:"Gagal update template",description:le.message,variant:"destructive"})}).finally(()=>z(!1)):Vx({...se,createdAt:new Date().toISOString()}).then(le=>{i({title:"Template Disimpan!",description:"Template Anda berhasil disimpan."}),G(!1),M({name:se.name,description:se.description,category:se.category,price:se.price,discount:se.discount,html:se.html,css:se.css,js:se.js,thumbnail:se.thumbnail}),le&&le.id&&n(`/admin/template-builder/${le.id}`,{replace:!0})}).catch(le=>{i({title:"Gagal simpan template",description:le.message,variant:"destructive"})}).finally(()=>z(!1)),e(null)};return f.jsxs(f.Fragment,{children:[f.jsx(ti,{children:f.jsx("title",{children:"Theme Builder HTML/CSS/JS - UndanganKami"})}),f.jsx("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 relative",children:f.jsxs("main",{className:"flex-1 flex flex-col p-0 md:p-8 gap-4 overflow-y-auto",children:[f.jsxs("div",{className:"w-full flex items-center gap-4 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-2 rounded-t-lg shadow-sm mb-2",style:{minHeight:48},children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[f.jsx("button",{className:"px-3 py-1 rounded bg-purple-50 text-purple-700 font-semibold text-sm border border-purple-100 hover:bg-purple-100 transition-colors",onClick:()=>G(!0),children:"Info Template"}),f.jsx("button",{className:"px-3 py-1 rounded bg-gray-100 text-gray-700 font-semibold text-sm border border-gray-200 hover:bg-gray-200 transition-colors ml-2",onClick:B=>{J&&(s!==J.name||a!==J.description||c!==J.category||h!==J.price||m!==J.discount||v!==J.html||y!==J.css||T!==J.js||D!==J.thumbnail)?q(!0):n("/admin?tab=templates")},title:"Kembali ke Pengelolaan Template",children:" Kembali ke Pengelolaan Template"}),K&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-2 py-8",children:f.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl p-6 w-full max-w-sm border border-gray-200 dark:border-gray-700 animate-fadeIn",children:[f.jsx("div",{className:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100",children:"Perubahan Belum Disimpan"}),f.jsx("div",{className:"mb-4 text-gray-600 dark:text-gray-300",children:"Anda memiliki perubahan yang belum disimpan. Yakin ingin keluar tanpa menyimpan?"}),f.jsxs("div",{className:"flex gap-2 justify-end",children:[f.jsx(ue,{onClick:()=>q(!1),variant:"outline",children:"Batal"}),f.jsx(ue,{className:"bg-red-500 hover:bg-red-600 text-white",onClick:()=>{q(!1),n("/admin?tab=templates")},children:"Ya, Keluar"})]})]})})]}),f.jsx(ue,{onClick:W,className:"gradient-bg text-white flex-shrink-0",disabled:$,children:$?f.jsxs(f.Fragment,{children:[f.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2 inline-block text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"Menyimpan..."]}):f.jsxs(f.Fragment,{children:[f.jsx(i6,{className:"h-4 w-4 mr-2"})," Simpan"]})})]}),N&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 px-2 py-8 overflow-y-auto",children:f.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl p-4 sm:p-8 w-full max-w-md relative animate-fadeIn border border-gray-200 dark:border-gray-700",children:[f.jsx("button",{className:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-2xl font-bold",onClick:()=>G(!1),"aria-label":"Tutup",children:""}),f.jsx("h2",{className:"text-lg font-bold mb-4 text-center text-gray-800 dark:text-gray-100",children:"Info Template"}),f.jsxs("form",{className:"grid gap-4",children:[f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templateName",className:"text-gray-700 dark:text-gray-200",children:"Nama Template"}),f.jsx(ke,{id:"templateName",value:s,onChange:B=>o(B.target.value),placeholder:"Contoh: Mawar HTML",className:"mt-1"})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templateDescription",className:"text-gray-700 dark:text-gray-200",children:"Deskripsi"}),f.jsx("textarea",{id:"templateDescription",value:a,onChange:B=>l(B.target.value),placeholder:"Deskripsi singkat template",className:"w-full min-h-[60px] rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-700 mt-1"})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templateCategory",className:"text-gray-700 dark:text-gray-200",children:"Kategori Template"}),f.jsxs("select",{id:"templateCategory",className:"w-full rounded border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-purple-200 dark:focus:ring-purple-700 mt-1",value:c,onChange:B=>d(B.target.value),children:[f.jsx("option",{value:"Classic",children:"Classic"}),f.jsx("option",{value:"Modern",children:"Modern"}),f.jsx("option",{value:"Minimalist",children:"Minimalist"}),f.jsx("option",{value:"Traditional",children:"Traditional"}),f.jsx("option",{value:"Elegant",children:"Elegant"}),f.jsx("option",{value:"Islamic",children:"Islamic"}),f.jsx("option",{value:"Custom",children:"Custom"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templatePrice",className:"text-gray-700 dark:text-gray-200",children:"Harga Template (Rp)"}),f.jsx(ke,{id:"templatePrice",type:"number",min:"0",value:h,onChange:B=>p(B.target.value),placeholder:"Contoh: 150000",className:"mt-1"})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templateDiscount",className:"text-gray-700 dark:text-gray-200",children:"Diskon (%)"}),f.jsx(ke,{id:"templateDiscount",type:"number",min:"0",max:"100",value:m,onChange:B=>x(B.target.value),placeholder:"Contoh: 20",className:"mt-1"}),f.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Isi 0 jika tidak ada diskon"})]})]}),f.jsxs("div",{children:[f.jsx(Te,{htmlFor:"templateThumbnail",className:"text-gray-700 dark:text-gray-200",children:"Thumbnail / Feature Image"}),D&&typeof D=="string"&&D.startsWith("http")&&f.jsxs(f.Fragment,{children:[f.jsx("img",{src:D,alt:"Thumbnail Preview",className:"mt-2 rounded w-full h-32 object-cover border border-gray-200 dark:border-gray-700",loading:"lazy"}),f.jsx(ue,{type:"button",className:"mt-2 w-full bg-red-500 hover:bg-red-600 text-white",onClick:async()=>{try{const B=D.match(/\/v\d+\/([^\.\/]+)(?:\.[a-zA-Z0-9]+)?$/),Y=B?B[1]:null;Y&&(await fetch("http://localhost:4000/delete-music",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:Y,resource_type:"image"})}),j(""),e(null),i({title:"Thumbnail berhasil dihapus."}))}catch(B){i({title:"Gagal hapus thumbnail",description:B==null?void 0:B.message,variant:"destructive"})}},children:"Hapus Thumbnail"}),f.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Hapus gambar lama sebelum upload baru."})]}),(!D||typeof D=="string"&&!D.startsWith("http"))&&f.jsx("input",{id:"templateThumbnail",type:"file",accept:"image/*",className:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 mt-1",onChange:async B=>{const Y=B.target.files&&B.target.files[0];if(Y){e(Y);const se=new FileReader;se.onloadend=()=>{j(se.result)},se.readAsDataURL(Y)}}})]}),f.jsx(ue,{onClick:()=>G(!1),className:"w-full gradient-bg text-white mt-2",children:"Simpan"})]})]})}),f.jsxs("div",{className:"flex border-b bg-gray-50 dark:bg-gray-900 rounded-t-lg px-2",children:[f.jsx("button",{onClick:()=>P("html"),className:`px-4 py-2 text-sm font-mono border-b-2 transition-colors ${I==="html"?"border-purple-500 text-purple-700 bg-white":"border-transparent text-gray-500 hover:bg-gray-100"}`,children:"HTML"}),f.jsx("button",{onClick:()=>P("css"),className:`px-4 py-2 text-sm font-mono border-b-2 transition-colors ${I==="css"?"border-purple-500 text-purple-700 bg-white":"border-transparent text-gray-500 hover:bg-gray-100"}`,children:"CSS"}),f.jsx("button",{onClick:()=>P("js"),className:`px-4 py-2 text-sm font-mono border-b-2 transition-colors ${I==="js"?"border-purple-500 text-purple-700 bg-white":"border-transparent text-gray-500 hover:bg-gray-100"}`,children:"JS"})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[f.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm min-h-[350px]",children:f.jsxs("div",{className:"flex-1 min-h-[200px]",children:[I==="html"&&f.jsx(sy,{height:"100%",defaultLanguage:"html",value:v,onChange:B=>E(B||""),options:{minimap:{enabled:!1},fontSize:13,wordWrap:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}}),I==="css"&&f.jsx(sy,{height:"100%",defaultLanguage:"css",value:y,onChange:B=>w(B||""),options:{minimap:{enabled:!1},fontSize:13,wordWrap:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}}),I==="js"&&f.jsx(sy,{height:"100%",defaultLanguage:"javascript",value:T,onChange:B=>C(B||""),options:{minimap:{enabled:!1},fontSize:13,wordWrap:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}})]})}),f.jsxs("div",{className:"flex-1 border rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col min-h-[350px] relative",children:[k&&f.jsx("button",{className:"fixed top-4 right-4 z-[100] px-3 py-1 rounded bg-white/90 border border-purple-200 shadow text-purple-700 text-xs font-semibold hover:bg-purple-50 transition-colors",onClick:()=>V(!1),style:{boxShadow:"0 2px 8px #0002"},title:"Keluar Fullscreen",children:"Keluar Fullscreen "}),f.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-2 text-sm text-gray-500 dark:text-gray-300 flex items-center justify-between",children:[f.jsx("span",{children:"Live Preview"}),!k&&f.jsx("button",{className:"ml-auto px-2 py-1 rounded hover:bg-purple-100 text-purple-700 text-xs font-semibold transition-colors",onClick:()=>V(!0),title:"Fullscreen Preview",children:"Fullscreen"})]}),f.jsx("iframe",{title:"Live Preview",srcDoc:A,sandbox:"allow-scripts allow-clipboard-write",className:"w-full flex-1 bg-white dark:bg-gray-900",style:k?{border:"none",minHeight:"100vh",minWidth:"100vw",position:"fixed",top:0,left:0,zIndex:50,background:"#111"}:{border:"none",minHeight:350}}),f.jsx("div",{className:"fixed right-6 bottom-6 z-50",children:f.jsx(ad,{})})]})]})]})})]})};function WQ(){return f.jsx(T4,{children:f.jsxs("div",{className:"min-h-screen",children:[f.jsxs(w4,{children:[f.jsx(Lr,{path:"/",element:f.jsx(tG,{})}),f.jsx(Lr,{path:"/order/:templateId",element:f.jsx(wq,{})}),f.jsx(Lr,{path:"/admin/login",element:f.jsx(MK,{})}),f.jsx(Lr,{path:"/admin",element:f.jsx(jK,{})}),f.jsx(Lr,{path:"/admin/template-builder",element:f.jsx(hI,{})}),f.jsx(Lr,{path:"/admin/template-builder/:templateId",element:f.jsx(hI,{})}),f.jsx(Lr,{path:"/preview/:templateId",element:f.jsx(LK,{})}),f.jsx(Lr,{path:"/invitation/:id",element:f.jsx(OK,{})})]}),f.jsx(m6,{})]})})}oy.createRoot(document.getElementById("root")).render(f.jsx(ce.StrictMode,{children:f.jsx(WQ,{})}));export{Nr as $,EN as A,Pn as B,Sr as C,Be as D,eX as E,ko as F,Ir as G,ZY as H,YQ as I,an as J,o3 as K,m9 as L,im as M,EY as N,bY as O,L9 as P,Nt as Q,fY as R,Di as S,Me as T,WY as U,or as V,j9 as W,zY as X,TY as Y,iY as Z,Sw as _,Iu as a,dY as a$,JQ as a0,p9 as a1,E9 as a2,JY as a3,rm as a4,$Y as a5,aY as a6,XY as a7,ln as a8,cY as a9,MY as aA,g9 as aB,Lf as aC,NY as aD,DY as aE,hY as aF,pY as aG,LY as aH,FY as aI,D9 as aJ,uY as aK,lN as aL,IY as aM,ZQ as aN,BY as aO,UY as aP,S9 as aQ,KY as aR,qQ as aS,AY as aT,vY as aU,yY as aV,_Y as aW,lY as aX,nm as aY,qY as aZ,sY as a_,SY as aa,nY as ab,rY as ac,oY as ad,YY as ae,xY as af,wY as ag,ct as ah,nd as ai,I9 as aj,VY as ak,td as al,PY as am,CY as an,tm as ao,RY as ap,kY as aq,cN as ar,QY as as,GY as at,tY as au,mY as av,gY as aw,Tb as ax,jY as ay,OY as az,y9 as b,HY as b0,f as b1,ce as b2,Yt as b3,fC as b4,Te as b5,ke as b6,Uh as b7,Wc as b8,zh as b9,Gc as ba,$n as bb,CK as bc,_ as bd,ue as be,kn as c,No as d,Ue as e,H as f,Il as g,Zu as h,jh as i,Zp as j,ed as k,Xp as l,Ax as m,Nn as n,Jp as o,O9 as p,ft as q,so as r,ee as s,KQ as t,eY as u,X5 as v,tt as w,tX as x,be as y,HQ as z};
